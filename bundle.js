/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={490:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=r(272),i=r.n(n),s=r(609),a=r.n(s)()(i());a.push([t.id,".spellbook{position:absolute;color:red;bottom:50px;right:50px;display:flex}.spellbook .book{margin-right:8px;width:32px;height:32px;border:1px solid #fff;background-color:green;cursor:pointer}.spellbook .book img{width:100%;height:100%}.spellbook .spell{margin-right:8px;width:32px;height:32px;border:1px solid #fff;cursor:pointer}.spellbook .spell img{width:100%;height:100%}.spellbook .spell.inactive{cursor:auto}.spellbook .spell.inactive img{filter:grayscale(100%)}","",{version:3,sources:["webpack://./src/controls/spellbook.scss"],names:[],mappings:"AAAA,WACE,iBAAA,CACA,SAAA,CACA,WAAA,CACA,UAAA,CACA,YAAA,CAEA,iBACE,gBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,sBAAA,CACA,cAAA,CAEA,qBACE,UAAA,CACA,WAAA,CAIJ,kBACE,gBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,cAAA,CAEA,sBACE,UAAA,CACA,WAAA,CAGF,2BACE,WAAA,CAEA,+BACE,sBAAA",sourcesContent:[".spellbook {\n  position: absolute;\n  color: red;\n  bottom: 50px;\n  right: 50px;\n  display: flex;\n\n  .book {\n    margin-right: 8px;\n    width: 32px;\n    height: 32px;\n    border: 1px solid white;\n    background-color: green;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  .spell {\n    margin-right: 8px;\n    width: 32px;\n    height: 32px;\n    border: 1px solid white;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    &.inactive {\n      cursor: auto;\n\n      img {\n        filter: grayscale(100%);\n      }\n    }\n  }\n}\n"],sourceRoot:""}]);const o=a},609:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var h=0;h<t.length;h++){var u=[].concat(t[h]);n&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},272:t=>{"use strict";t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),s="/*# ".concat(i," */"),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([s]).join("\n")}return[e].join("\n")}},502:t=>{"use strict";function e(t,e,n){n=n||2;var s,a,o,l,c,d,p,m=e&&e.length,g=m?e[0]*n:t.length,_=r(t,0,g,n,!0),v=[];if(!_||_.next===_.prev)return v;if(m&&(_=function(t,e,n,i){var s,a,o,l=[];for(s=0,a=e.length;s<a;s++)(o=r(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),l.push(f(o));for(l.sort(h),s=0;s<l.length;s++)n=u(l[s],n);return n}(t,e,_,n)),t.length>80*n){s=o=t[0],a=l=t[1];for(var y=n;y<g;y+=n)(c=t[y])<s&&(s=c),(d=t[y+1])<a&&(a=d),c>o&&(o=c),d>l&&(l=d);p=0!==(p=Math.max(o-s,l-a))?32767/p:0}return i(_,v,n,s,a,p,0),v}function r(t,e,r,n,i){var s,a;if(i===A(t,e,r,n)>0)for(s=e;s<r;s+=n)a=T(s,t[s],t[s+1],a);else for(s=r-n;s>=e;s-=n)a=T(s,t[s],t[s+1],a);return a&&_(a,a.next)&&(E(a),a=a.next),a}function n(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!_(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(E(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function i(t,e,r,h,u,c,f){if(t){!f&&c&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,s,a,o,l,h=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,n=r,o=0,e=0;e<h&&(o++,n=n.nextZ);e++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,h*=2}while(a>1)}(i)}(t,h,u,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?a(t,h,u,c):s(t))e.push(p.i/r|0),e.push(t.i/r|0),e.push(m.i/r|0),E(t),t=m.next,g=m.next;else if((t=m)===g){f?1===f?i(t=o(n(t),e,r),e,r,h,u,c,2):2===f&&l(t,e,r,h,u,c):i(n(t),e,r,h,u,c,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(g(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,a=n.x,o=e.y,l=r.y,h=n.y,u=i<s?i<a?i:a:s<a?s:a,c=o<l?o<h?o:h:l<h?l:h,d=i>s?i>a?i:a:s>a?s:a,f=o>l?o>h?o:h:l>h?l:h,m=n.next;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=c&&m.y<=f&&p(i,o,s,l,a,h,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function a(t,e,r,n){var i=t.prev,s=t,a=t.next;if(g(i,s,a)>=0)return!1;for(var o=i.x,l=s.x,h=a.x,u=i.y,c=s.y,f=a.y,m=o<l?o<h?o:h:l<h?l:h,_=u<c?u<f?u:f:c<f?c:f,v=o>l?o>h?o:h:l>h?l:h,y=u>c?u>f?u:f:c>f?c:f,x=d(m,_,e,r,n),b=d(v,y,e,r,n),w=t.prevZ,T=t.nextZ;w&&w.z>=x&&T&&T.z<=b;){if(w.x>=m&&w.x<=v&&w.y>=_&&w.y<=y&&w!==i&&w!==a&&p(o,u,l,c,h,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,T.x>=m&&T.x<=v&&T.y>=_&&T.y<=y&&T!==i&&T!==a&&p(o,u,l,c,h,f,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=v&&w.y>=_&&w.y<=y&&w!==i&&w!==a&&p(o,u,l,c,h,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=b;){if(T.x>=m&&T.x<=v&&T.y>=_&&T.y<=y&&T!==i&&T!==a&&p(o,u,l,c,h,f,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function o(t,e,r){var i=t;do{var s=i.prev,a=i.next.next;!_(s,a)&&v(s,i,i.next,a)&&b(s,a)&&b(a,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(a.i/r|0),E(i),E(i.next),i=t=a),i=i.next}while(i!==t);return n(i)}function l(t,e,r,s,a,o){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&m(l,h)){var u=w(l,h);return l=n(l,l.next),u=n(u,u.next),i(l,e,r,s,a,o,0),void i(u,e,r,s,a,o,0)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function u(t,e){var r=function(t,e){var r,n=e,i=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a&&(a=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next}while(n!==e);if(!r)return null;var l,h=r,u=r.x,d=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&p(s<d?i:a,s,u,d,s<d?a:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),b(n,t)&&(l<f||l===f&&(n.x>r.x||n.x===r.x&&c(r,n)))&&(r=n,f=l)),n=n.next}while(n!==h);return r}(t,e);if(!r)return e;var i=w(r,t);return n(i,i.next),n(r,r.next)}function c(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function p(t,e,r,n,i,s,a,o){return(i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(r-a)*(e-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&v(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||_(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,r,n){var i=x(g(t,e,r)),s=x(g(t,e,n)),a=x(g(r,n,t)),o=x(g(r,n,e));return i!==s&&a!==o||!(0!==i||!y(t,r,e))||!(0!==s||!y(t,n,e))||!(0!==a||!y(r,t,n))||!(0!==o||!y(r,e,n))}function y(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var r=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function T(t,e,r,n){var i=new S(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,n){for(var i=0,s=e,a=r-n;s<r;s+=n)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,a=Math.abs(A(t,0,s,r));if(i)for(var o=0,l=e.length;o<l;o++){var h=e[o]*r,u=o<l-1?e[o+1]*r:t.length;a-=Math.abs(A(t,h,u,r))}var c=0;for(o=0;o<n.length;o+=3){var d=n[o]*r,f=n[o+1]*r,p=n[o+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var a=0;a<e;a++)r.vertices.push(t[i][s][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},161:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,s||t,a),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,e,n,i,s,a){var o=r?r+t:t;if(!this._events[o])return!1;var l,h,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,s),!0;case 6:return u.fn.call(u.context,e,n,i,s,a),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,f=u.length;for(h=0;h<f;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,n);break;case 4:u[h].fn.call(u[h].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},o.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},o.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==e||i&&!o[l].once||n&&o[l].context!==n)&&h.push(o[l]);h.length?this._events[s]=1===h.length?h[0]:h:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o},808:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,r,n,i){r=r||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(r);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var l=t.length;o>0&&l>o&&(l=o);for(var h=0;h<l;++h){var u,c,d,f,p=t[h].replace(a,"%20"),m=p.indexOf(n);m>=0?(u=p.substr(0,m),c=p.substr(m+1)):(u=p,c=""),d=decodeURIComponent(u),f=decodeURIComponent(c),e(s,d)?Array.isArray(s[d])?s[d].push(f):s[d]=[s[d],f]:s[d]=f}return s}},368:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,r,n,i){return r=r||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var s=encodeURIComponent(e(i))+n;return Array.isArray(t[i])?t[i].map((function(t){return s+encodeURIComponent(e(t))})).join(r):s+encodeURIComponent(e(t[i]))})).join(r):i?encodeURIComponent(e(i))+n+encodeURIComponent(e(t)):""}},642:(t,e,r)=>{"use strict";e.decode=e.parse=r(808),e.encode=e.stringify=r(368)},967:(t,e,r)=>{"use strict";var n=r(784),i=r(616);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){h(t,e),h(t+"Capture",e)}function h(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,r,n,i,s,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function y(t,e,r,n){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:n||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,r,n){if(null==e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,i,n)&&(r=null),n||null===i?function(t){return!!c.call(p,t)||!c.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(_,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(_,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(_,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function N(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=O&&t[O]||t["@@iterator"])?t:null}var F,B=Object.assign;function L(t){if(void 0===F)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var U=!1;function z(t,e){if(!t||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var n=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){n=t}t.call(e.prototype)}else{try{throw Error()}catch(t){n=t}t()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=n.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?L(t):""}function G(t){switch(t.tag){case 5:return L(t.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return z(t.type,!1);case 11:return z(t.type.render,!1);case 1:return z(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case T:return"Fragment";case w:return"Portal";case S:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case R:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case M:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case k:e=t._payload,t=t._init;try{return H(t(e))}catch(t){}}return null}function j(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function X(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function V(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=W(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}function $(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function q(t,e){var r=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function K(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=X(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&y(t,"checked",e,!1)}function Z(t,e){Q(t,e);var r=X(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,r):e.hasOwnProperty("defaultValue")&&tt(t,e.type,X(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function tt(t,e,r){"number"===e&&$(t.ownerDocument)===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var et=Array.isArray;function rt(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+X(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(s(92));if(et(r)){if(1<r.length)throw Error(s(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:X(r)}}function st(t,e){var r=X(e.value),n=X(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ht,ut,ct=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,r){return null==e||"boolean"==typeof e||""===e?"":r||"number"!=typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=mt(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var _t=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(_t[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62))}}function yt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,Tt=null,Et=null;function St(t){if(t=yi(t)){if("function"!=typeof wt)throw Error(s(280));var e=t.stateNode;e&&(e=bi(e),wt(t.stateNode,t.type,e))}}function At(t){Tt?Et?Et.push(t):Et=[t]:Tt=t}function Ct(){if(Tt){var t=Tt,e=Et;if(Et=Tt=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function Rt(t,e){return t(e)}function Pt(){}var It=!1;function Mt(t,e,r){if(It)return t(e,r);It=!0;try{return Rt(t,e,r)}finally{It=!1,(null!==Tt||null!==Et)&&(Pt(),Ct())}}function kt(t,e){var r=t.stateNode;if(null===r)return null;var n=bi(r);if(null===n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(r&&"function"!=typeof r)throw Error(s(231,e,typeof r));return r}var Dt=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){Dt=!1}function Nt(t,e,r,n,i,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(t){this.onError(t)}}var Ft=!1,Bt=null,Lt=!1,Ut=null,zt={onError:function(t){Ft=!0,Bt=t}};function Gt(t,e,r,n,i,s,a,o,l){Ft=!1,Bt=null,Nt.apply(zt,arguments)}function Ht(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Xt(t){if(Ht(t)!==t)throw Error(s(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(s(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Xt(i),t;if(a===n)return Xt(i),e;a=a.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?t:e}(t))?Vt(t):null}function Vt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Vt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=i.unstable_scheduleCallback,$t=i.unstable_cancelCallback,qt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Qt=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,re=i.unstable_LowPriority,ne=i.unstable_IdlePriority,ie=null,se=null,ae=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2,he=64,ue=4194304;function ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var r=t.pendingLanes;if(0===r)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=268435455&r;if(0!==a){var o=a&~i;0!==o?n=ce(o):0!=(s&=a)&&(n=ce(s))}else 0!=(a=r&~i)?n=ce(a):0!==s&&(n=ce(s));if(0===n)return 0;if(0!==e&&e!==n&&0==(e&i)&&((i=n&-n)>=(s=e&-e)||16===i&&0!=(4194240&s)))return e;if(0!=(4&n)&&(n|=16&r),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)i=1<<(r=31-ae(e)),n|=t[r],e&=~i;return n}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=he;return 0==(4194240&(he<<=1))&&(he=64),t}function ge(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function _e(t,e,r){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=r}function ve(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ae(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ye=0;function xe(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var be,we,Te,Ee,Se,Ae=!1,Ce=[],Re=null,Pe=null,Ie=null,Me=new Map,ke=new Map,De=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ne(t,e){switch(t){case"focusin":case"focusout":Re=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Me.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(e.pointerId)}}function Fe(t,e,r,n,i,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==e&&null!==(e=yi(e))&&we(e),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Be(t){var e=vi(t.target);if(null!==e){var r=Ht(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=jt(r)))return t.blockedOn=e,void Se(t.priority,(function(){Te(r)}))}else if(3===e&&r.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function Le(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var r=qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r)return null!==(e=yi(r))&&we(e),t.blockedOn=r,!1;var n=new(r=t.nativeEvent).constructor(r.type,r);xt=n,r.target.dispatchEvent(n),xt=null,e.shift()}return!0}function Ue(t,e,r){Le(t)&&r.delete(e)}function ze(){Ae=!1,null!==Re&&Le(Re)&&(Re=null),null!==Pe&&Le(Pe)&&(Pe=null),null!==Ie&&Le(Ie)&&(Ie=null),Me.forEach(Ue),ke.forEach(Ue)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Ae||(Ae=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ze)))}function He(t){function e(e){return Ge(e,t)}if(0<Ce.length){Ge(Ce[0],t);for(var r=1;r<Ce.length;r++){var n=Ce[r];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==Re&&Ge(Re,t),null!==Pe&&Ge(Pe,t),null!==Ie&&Ge(Ie,t),Me.forEach(e),ke.forEach(e),r=0;r<De.length;r++)(n=De[r]).blockedOn===t&&(n.blockedOn=null);for(;0<De.length&&null===(r=De[0]).blockedOn;)Be(r),null===r.blockedOn&&De.shift()}var je=x.ReactCurrentBatchConfig,Xe=!0;function We(t,e,r,n){var i=ye,s=je.transition;je.transition=null;try{ye=1,Ye(t,e,r,n)}finally{ye=i,je.transition=s}}function Ve(t,e,r,n){var i=ye,s=je.transition;je.transition=null;try{ye=4,Ye(t,e,r,n)}finally{ye=i,je.transition=s}}function Ye(t,e,r,n){if(Xe){var i=qe(t,e,r,n);if(null===i)Xn(t,e,n,$e,r),Ne(t,n);else if(function(t,e,r,n,i){switch(e){case"focusin":return Re=Fe(Re,t,e,r,n,i),!0;case"dragenter":return Pe=Fe(Pe,t,e,r,n,i),!0;case"mouseover":return Ie=Fe(Ie,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Me.set(s,Fe(Me.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ke.set(s,Fe(ke.get(s)||null,t,e,r,n,i)),!0}return!1}(i,t,e,r,n))n.stopPropagation();else if(Ne(t,n),4&e&&-1<Oe.indexOf(t)){for(;null!==i;){var s=yi(i);if(null!==s&&be(s),null===(s=qe(t,e,r,n))&&Xn(t,e,n,$e,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else Xn(t,e,n,null,r)}}var $e=null;function qe(t,e,r,n){if($e=null,null!==(t=vi(t=bt(n))))if(null===(e=Ht(t)))t=null;else if(13===(r=e.tag)){if(null!==(t=jt(e)))return t;t=null}else if(3===r){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $e=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case Jt:return 1;case te:return 4;case ee:case re:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Qe=null,Ze=null,Je=null;function tr(){if(Je)return Je;var t,e,r=Ze,n=r.length,i="value"in Qe?Qe.value:Qe.textContent,s=i.length;for(t=0;t<n&&r[t]===i[t];t++);var a=n-t;for(e=1;e<=a&&r[n-e]===i[s-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function er(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rr(){return!0}function nr(){return!1}function ir(t){function e(e,r,n,i,s){for(var a in this._reactName=e,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),e}var sr,ar,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=ir(lr),ur=B({},lr,{view:0,detail:0}),cr=ir(ur),dr=B({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==or&&(or&&"mousemove"===t.type?(sr=t.screenX-or.screenX,ar=t.screenY-or.screenY):ar=sr=0,or=t),sr)},movementY:function(t){return"movementY"in t?t.movementY:ar}}),fr=ir(dr),pr=ir(B({},dr,{dataTransfer:0})),mr=ir(B({},ur,{relatedTarget:0})),gr=ir(B({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),_r=B({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vr=ir(_r),yr=ir(B({},lr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=wr[t])&&!!e[t]}function Er(){return Tr}var Sr=B({},ur,{key:function(t){if(t.key){var e=xr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=er(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?br[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(t){return"keypress"===t.type?er(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?er(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ar=ir(Sr),Cr=ir(B({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rr=ir(B({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Pr=ir(B({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=B({},dr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=ir(Ir),kr=[9,13,27,32],Dr=u&&"CompositionEvent"in window,Or=null;u&&"documentMode"in document&&(Or=document.documentMode);var Nr=u&&"TextEvent"in window&&!Or,Fr=u&&(!Dr||Or&&8<Or&&11>=Or),Br=String.fromCharCode(32),Lr=!1;function Ur(t,e){switch(t){case"keyup":return-1!==kr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Gr=!1,Hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hr[t.type]:"textarea"===e}function Xr(t,e,r,n){At(n),0<(e=Vn(e,"onChange")).length&&(r=new hr("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Wr=null,Vr=null;function Yr(t){Ln(t,0)}function $r(t){if(Y(xi(t)))return t}function qr(t,e){if("change"===t)return e}var Kr=!1;if(u){var Qr;if(u){var Zr="oninput"in document;if(!Zr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Zr="function"==typeof Jr.oninput}Qr=Zr}else Qr=!1;Kr=Qr&&(!document.documentMode||9<document.documentMode)}function tn(){Wr&&(Wr.detachEvent("onpropertychange",en),Vr=Wr=null)}function en(t){if("value"===t.propertyName&&$r(Vr)){var e=[];Xr(e,Vr,t,bt(t)),Mt(Yr,e)}}function rn(t,e,r){"focusin"===t?(tn(),Vr=r,(Wr=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function nn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $r(Vr)}function sn(t,e){if("click"===t)return $r(e)}function an(t,e){if("input"===t||"change"===t)return $r(e)}var on="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function ln(t,e){if(on(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!c.call(e,i)||!on(t[i],e[i]))return!1}return!0}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function un(t,e){var r,n=hn(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=hn(n)}}function cn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?cn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dn(){for(var t=window,e=$();e instanceof t.HTMLIFrameElement;){try{var r="string"==typeof e.contentWindow.location.href}catch(t){r=!1}if(!r)break;e=$((t=e.contentWindow).document)}return e}function fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pn(t){var e=dn(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&cn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if((t=(e=r.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=un(r,s);var a=un(r,n);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=r;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<e.length;r++)(t=e[r]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,_n=null,vn=null,yn=!1;function xn(t,e,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==gn||gn!==$(n)||(n="selectionStart"in(n=gn)&&fn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Vn(_n,"onSelect")).length&&(e=new hr("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=gn)))}function bn(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wn={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionend:bn("Transition","TransitionEnd")},Tn={},En={};function Sn(t){if(Tn[t])return Tn[t];if(!wn[t])return t;var e,r=wn[t];for(e in r)if(r.hasOwnProperty(e)&&e in En)return Tn[t]=r[e];return t}u&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var An=Sn("animationend"),Cn=Sn("animationiteration"),Rn=Sn("animationstart"),Pn=Sn("transitionend"),In=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){In.set(t,e),l(e,[t])}for(var Dn=0;Dn<Mn.length;Dn++){var On=Mn[Dn];kn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}kn(An,"onAnimationEnd"),kn(Cn,"onAnimationIteration"),kn(Rn,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(Pn,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nn));function Bn(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,n,i,a,o,l,h){if(Gt.apply(this,arguments),Ft){if(!Ft)throw Error(s(198));var u=Bt;Ft=!1,Bt=null,Lt||(Lt=!0,Ut=u)}}(n,e,void 0,t),t.currentTarget=null}function Ln(t,e){e=0!=(4&e);for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;t:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break t;Bn(i,o,h),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,h=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break t;Bn(i,o,h),s=l}}}if(Lt)throw t=Ut,Lt=!1,Ut=null,t}function Un(t,e){var r=e[mi];void 0===r&&(r=e[mi]=new Set);var n=t+"__bubble";r.has(n)||(jn(e,t,2,!1),r.add(n))}function zn(t,e,r){var n=0;e&&(n|=4),jn(r,t,n,e)}var Gn="_reactListening"+Math.random().toString(36).slice(2);function Hn(t){if(!t[Gn]){t[Gn]=!0,a.forEach((function(e){"selectionchange"!==e&&(Fn.has(e)||zn(e,!1,t),zn(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Gn]||(e[Gn]=!0,zn("selectionchange",!1,e))}}function jn(t,e,r,n){switch(Ke(e)){case 1:var i=We;break;case 4:i=Ve;break;default:i=Ye}r=i.bind(null,e,r,t),i=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),n?void 0!==i?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):void 0!==i?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Xn(t,e,r,n,i){var s=n;if(0==(1&e)&&0==(2&e)&&null!==n)t:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue t}o=o.parentNode}}n=n.return}Mt((function(){var n=s,i=bt(r),a=[];t:{var o=In.get(t);if(void 0!==o){var l=hr,h=t;switch(t){case"keypress":if(0===er(r))break t;case"keydown":case"keyup":l=Ar;break;case"focusin":h="focus",l=mr;break;case"focusout":h="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rr;break;case An:case Cn:case Rn:l=gr;break;case Pn:l=Pr;break;case"scroll":l=cr;break;case"wheel":l=Mr;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!=(4&e),c=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=kt(p,d))&&u.push(Wn(p,m,f))),c)break;p=p.return}0<u.length&&(o=new l(o,h,null,r,i),a.push({event:o,listeners:u}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||r===xt||!(h=r.relatedTarget||r.fromElement)||!vi(h)&&!h[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(h=(h=r.relatedTarget||r.toElement)?vi(h):null)&&(h!==(c=Ht(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=n),l!==h)){if(u=fr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cr,m="onPointerLeave",d="onPointerEnter",p="pointer"),c=null==l?o:xi(l),f=null==h?o:xi(h),(o=new u(m,p+"leave",l,r,i)).target=c,o.relatedTarget=f,m=null,vi(i)===n&&((u=new u(d,p+"enter",h,r,i)).target=f,u.relatedTarget=c,m=u),c=m,l&&h)t:{for(d=h,p=0,f=u=l;f;f=Yn(f))p++;for(f=0,m=d;m;m=Yn(m))f++;for(;0<p-f;)u=Yn(u),p--;for(;0<f-p;)d=Yn(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Yn(u),d=Yn(d)}u=null}else u=null;null!==l&&$n(a,o,l,u,!1),null!==h&&null!==c&&$n(a,c,h,u,!0)}if("select"===(l=(o=n?xi(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=qr;else if(jr(o))if(Kr)g=an;else{g=nn;var _=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sn);switch(g&&(g=g(t,n))?Xr(a,g,r,i):(_&&_(t,o,n),"focusout"===t&&(_=o._wrapperState)&&_.controlled&&"number"===o.type&&tt(o,"number",o.value)),_=n?xi(n):window,t){case"focusin":(jr(_)||"true"===_.contentEditable)&&(gn=_,_n=n,vn=null);break;case"focusout":vn=_n=gn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,xn(a,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":xn(a,r,i)}var v;if(Dr)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Gr?Ur(t,r)&&(y="onCompositionEnd"):"keydown"===t&&229===r.keyCode&&(y="onCompositionStart");y&&(Fr&&"ko"!==r.locale&&(Gr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gr&&(v=tr()):(Ze="value"in(Qe=i)?Qe.value:Qe.textContent,Gr=!0)),0<(_=Vn(n,y)).length&&(y=new yr(y,t,null,r,i),a.push({event:y,listeners:_}),(v||null!==(v=zr(r)))&&(y.data=v))),(v=Nr?function(t,e){switch(t){case"compositionend":return zr(e);case"keypress":return 32!==e.which?null:(Lr=!0,Br);case"textInput":return(t=e.data)===Br&&Lr?null:t;default:return null}}(t,r):function(t,e){if(Gr)return"compositionend"===t||!Dr&&Ur(t,e)?(t=tr(),Je=Ze=Qe=null,Gr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fr&&"ko"!==e.locale?null:e.data}}(t,r))&&0<(n=Vn(n,"onBeforeInput")).length&&(i=new yr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v)}Ln(a,e)}))}function Wn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vn(t,e){for(var r=e+"Capture",n=[];null!==t;){var i=t,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=kt(t,r))&&n.unshift(Wn(t,s,i)),null!=(s=kt(t,e))&&n.push(Wn(t,s,i))),t=t.return}return n}function Yn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function $n(t,e,r,n,i){for(var s=e._reactName,a=[];null!==r&&r!==n;){var o=r,l=o.alternate,h=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==h&&(o=h,i?null!=(l=kt(r,s))&&a.unshift(Wn(r,l,o)):i||null!=(l=kt(r,s))&&a.push(Wn(r,l,o))),r=r.return}0!==a.length&&t.push({event:e,listeners:a})}var qn=/\r\n?/g,Kn=/\u0000|\uFFFD/g;function Qn(t){return("string"==typeof t?t:""+t).replace(qn,"\n").replace(Kn,"")}function Zn(t,e,r){if(e=Qn(e),Qn(t)!==e&&r)throw Error(s(425))}function Jn(){}var ti=null,ei=null;function ri(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(t){return si.resolve(null).then(t).catch(oi)}:ni;function oi(t){setTimeout((function(){throw t}))}function li(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return t.removeChild(i),void He(e);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);He(e)}function hi(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===e)return t;e--}else"/$"===r&&e++}t=t.previousSibling}return null}var ci=Math.random().toString(36).slice(2),di="__reactFiber$"+ci,fi="__reactProps$"+ci,pi="__reactContainer$"+ci,mi="__reactEvents$"+ci,gi="__reactListeners$"+ci,_i="__reactHandles$"+ci;function vi(t){var e=t[di];if(e)return e;for(var r=t.parentNode;r;){if(e=r[pi]||r[di]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=ui(t);null!==t;){if(r=t[di])return r;t=ui(t)}return e}r=(t=r).parentNode}return null}function yi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function bi(t){return t[fi]||null}var wi=[],Ti=-1;function Ei(t){return{current:t}}function Si(t){0>Ti||(t.current=wi[Ti],wi[Ti]=null,Ti--)}function Ai(t,e){Ti++,wi[Ti]=t.current,t.current=e}var Ci={},Ri=Ei(Ci),Pi=Ei(!1),Ii=Ci;function Mi(t,e){var r=t.type.contextTypes;if(!r)return Ci;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ki(t){return null!=t.childContextTypes}function Di(){Si(Pi),Si(Ri)}function Oi(t,e,r){if(Ri.current!==Ci)throw Error(s(168));Ai(Ri,e),Ai(Pi,r)}function Ni(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(s(108,j(t)||"Unknown",i));return B({},r,n)}function Fi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ci,Ii=Ri.current,Ai(Ri,t),Ai(Pi,Pi.current),!0}function Bi(t,e,r){var n=t.stateNode;if(!n)throw Error(s(169));r?(t=Ni(t,e,Ii),n.__reactInternalMemoizedMergedChildContext=t,Si(Pi),Si(Ri),Ai(Ri,t)):Si(Pi),Ai(Pi,r)}var Li=null,Ui=!1,zi=!1;function Gi(t){null===Li?Li=[t]:Li.push(t)}function Hi(){if(!zi&&null!==Li){zi=!0;var t=0,e=ye;try{var r=Li;for(ye=1;t<r.length;t++){var n=r[t];do{n=n(!0)}while(null!==n)}Li=null,Ui=!1}catch(e){throw null!==Li&&(Li=Li.slice(t+1)),Yt(Jt,Hi),e}finally{ye=e,zi=!1}}return null}var ji=[],Xi=0,Wi=null,Vi=0,Yi=[],$i=0,qi=null,Ki=1,Qi="";function Zi(t,e){ji[Xi++]=Vi,ji[Xi++]=Wi,Wi=t,Vi=e}function Ji(t,e,r){Yi[$i++]=Ki,Yi[$i++]=Qi,Yi[$i++]=qi,qi=t;var n=Ki;t=Qi;var i=32-ae(n)-1;n&=~(1<<i),r+=1;var s=32-ae(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Ki=1<<32-ae(e)+i|r<<i|n,Qi=s+t}else Ki=1<<s|r<<i|n,Qi=t}function ts(t){null!==t.return&&(Zi(t,1),Ji(t,1,0))}function es(t){for(;t===Wi;)Wi=ji[--Xi],ji[Xi]=null,Vi=ji[--Xi],ji[Xi]=null;for(;t===qi;)qi=Yi[--$i],Yi[$i]=null,Qi=Yi[--$i],Yi[$i]=null,Ki=Yi[--$i],Yi[$i]=null}var rs=null,ns=null,is=!1,ss=null;function as(t,e){var r=Mh(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,null===(e=t.deletions)?(t.deletions=[r],t.flags|=16):e.push(r)}function os(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,rs=t,ns=hi(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,rs=t,ns=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(r=null!==qi?{id:Ki,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},(r=Mh(18,null,null,0)).stateNode=e,r.return=t,t.child=r,rs=t,ns=null,!0);default:return!1}}function ls(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function hs(t){if(is){var e=ns;if(e){var r=e;if(!os(t,e)){if(ls(t))throw Error(s(418));e=hi(r.nextSibling);var n=rs;e&&os(t,e)?as(n,r):(t.flags=-4097&t.flags|2,is=!1,rs=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,is=!1,rs=t}}}function us(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;rs=t}function cs(t){if(t!==rs)return!1;if(!is)return us(t),is=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ri(t.type,t.memoizedProps)),e&&(e=ns)){if(ls(t))throw ds(),Error(s(418));for(;e;)as(t,e),e=hi(e.nextSibling)}if(us(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){ns=hi(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}ns=null}}else ns=rs?hi(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=ns;t;)t=hi(t.nextSibling)}function fs(){ns=rs=null,is=!1}function ps(t){null===ss?ss=[t]:ss.push(t)}var ms=x.ReactCurrentBatchConfig;function gs(t,e){if(t&&t.defaultProps){for(var r in e=B({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}return e}var _s=Ei(null),vs=null,ys=null,xs=null;function bs(){xs=ys=vs=null}function ws(t){var e=_s.current;Si(_s),t._currentValue=e}function Ts(t,e,r){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==n&&(n.childLanes|=e)):null!==n&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Es(t,e){vs=t,xs=ys=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(xo=!0),t.firstContext=null)}function Ss(t){var e=t._currentValue;if(xs!==t)if(t={context:t,memoizedValue:e,next:null},null===ys){if(null===vs)throw Error(s(308));ys=t,vs.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return e}var As=null;function Cs(t){null===As?As=[t]:As.push(t)}function Rs(t,e,r,n){var i=e.interleaved;return null===i?(r.next=r,Cs(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ps(t,n)}function Ps(t,e){t.lanes|=e;var r=t.alternate;for(null!==r&&(r.lanes|=e),r=t,t=t.return;null!==t;)t.childLanes|=e,null!==(r=t.alternate)&&(r.childLanes|=e),r=t,t=t.return;return 3===r.tag?r.stateNode:null}var Is=!1;function Ms(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ks(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(t,e,r){var n=t.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&Rl)){var i=n.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ps(t,r)}return null===(i=n.interleaved)?(e.next=e,Cs(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ps(t,r)}function Ns(t,e,r){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&r))){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}function Fs(t,e){var r=t.updateQueue,n=t.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=a:s=s.next=a,r=r.next}while(null!==r);null===s?i=s=e:s=s.next=e}else i=s=e;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(t.updateQueue=r)}null===(t=r.lastBaseUpdate)?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Bs(t,e,r,n){var i=t.updateQueue;Is=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,h=l.next;l.next=null,null===a?s=h:a.next=h,a=l;var u=t.alternate;null!==u&&(o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=l)}if(null!==s){var c=i.baseState;for(a=0,u=h=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var p=t,m=o;switch(d=e,f=r,m.tag){case 1:if("function"==typeof(p=m.payload)){c=p.call(f,c,d);break t}c=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,c,d):p))break t;c=B({},c,d);break t;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(h=u=f,l=c):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=c),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=c}}function Ls(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(s(191,i));i.call(n)}}}var Us=(new n.Component).refs;function zs(t,e,r,n){r=null==(r=r(n,e=t.memoizedState))?e:B({},e,r),t.memoizedState=r,0===t.lanes&&(t.updateQueue.baseState=r)}var Gs={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=th(),i=eh(t),s=Ds(n,i);s.payload=e,null!=r&&(s.callback=r),null!==(e=Os(t,s,i))&&(rh(e,t,i,n),Ns(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=th(),i=eh(t),s=Ds(n,i);s.tag=1,s.payload=e,null!=r&&(s.callback=r),null!==(e=Os(t,s,i))&&(rh(e,t,i,n),Ns(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=th(),n=eh(t),i=Ds(r,n);i.tag=2,null!=e&&(i.callback=e),null!==(e=Os(t,i,n))&&(rh(e,t,n,r),Ns(e,t,n))}};function Hs(t,e,r,n,i,s,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,s,a):!(e.prototype&&e.prototype.isPureReactComponent&&ln(r,n)&&ln(i,s))}function js(t,e,r){var n=!1,i=Ci,s=e.contextType;return"object"==typeof s&&null!==s?s=Ss(s):(i=ki(e)?Ii:Ri.current,s=(n=null!=(n=e.contextTypes))?Mi(t,i):Ci),e=new e(r,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Gs,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Xs(t,e,r,n){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Gs.enqueueReplaceState(e,e.state,null)}function Ws(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Us,Ms(t);var s=e.contextType;"object"==typeof s&&null!==s?i.context=Ss(s):(s=ki(e)?Ii:Ri.current,i.context=Mi(t,s)),i.state=t.memoizedState,"function"==typeof(s=e.getDerivedStateFromProps)&&(zs(t,e,s,r),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Gs.enqueueReplaceState(i,i.state,null),Bs(t,r,i,n),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function Vs(t,e,r){if(null!==(t=r.ref)&&"function"!=typeof t&&"object"!=typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,t));var i=n,a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===Us&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!=typeof t)throw Error(s(284));if(!r._owner)throw Error(s(290,t))}return t}function Ys(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $s(t){return(0,t._init)(t._payload)}function qs(t){function e(e,r){if(t){var n=e.deletions;null===n?(e.deletions=[r],e.flags|=16):n.push(r)}}function r(r,n){if(!t)return null;for(;null!==n;)e(r,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Dh(t,e)).index=0,t.sibling=null,t}function a(e,r,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<r?(e.flags|=2,r):n:(e.flags|=2,r):(e.flags|=1048576,r)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,r,n){return null===e||6!==e.tag?((e=Bh(r,t.mode,n)).return=t,e):((e=i(e,r)).return=t,e)}function h(t,e,r,n){var s=r.type;return s===T?c(t,e,r.props.children,n,r.key):null!==e&&(e.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===k&&$s(s)===e.type)?((n=i(e,r.props)).ref=Vs(t,e,r),n.return=t,n):((n=Oh(r.type,r.key,r.props,null,t.mode,n)).ref=Vs(t,e,r),n.return=t,n)}function u(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Lh(r,t.mode,n)).return=t,e):((e=i(e,r.children||[])).return=t,e)}function c(t,e,r,n,s){return null===e||7!==e.tag?((e=Nh(r,t.mode,n,s)).return=t,e):((e=i(e,r)).return=t,e)}function d(t,e,r){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Bh(""+e,t.mode,r)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case b:return(r=Oh(e.type,e.key,e.props,null,t.mode,r)).ref=Vs(t,null,e),r.return=t,r;case w:return(e=Lh(e,t.mode,r)).return=t,e;case k:return d(t,(0,e._init)(e._payload),r)}if(et(e)||N(e))return(e=Nh(e,t.mode,r,null)).return=t,e;Ys(t,e)}return null}function f(t,e,r,n){var i=null!==e?e.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:l(t,e,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===i?h(t,e,r,n):null;case w:return r.key===i?u(t,e,r,n):null;case k:return f(t,e,(i=r._init)(r._payload),n)}if(et(r)||N(r))return null!==i?null:c(t,e,r,n,null);Ys(t,r)}return null}function p(t,e,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return l(e,t=t.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return h(e,t=t.get(null===n.key?r:n.key)||null,n,i);case w:return u(e,t=t.get(null===n.key?r:n.key)||null,n,i);case k:return p(t,e,r,(0,n._init)(n._payload),i)}if(et(n)||N(n))return c(e,t=t.get(r)||null,n,i,null);Ys(e,n)}return null}function m(i,s,o,l){for(var h=null,u=null,c=s,m=s=0,g=null;null!==c&&m<o.length;m++){c.index>m?(g=c,c=null):g=c.sibling;var _=f(i,c,o[m],l);if(null===_){null===c&&(c=g);break}t&&c&&null===_.alternate&&e(i,c),s=a(_,s,m),null===u?h=_:u.sibling=_,u=_,c=g}if(m===o.length)return r(i,c),is&&Zi(i,m),h;if(null===c){for(;m<o.length;m++)null!==(c=d(i,o[m],l))&&(s=a(c,s,m),null===u?h=c:u.sibling=c,u=c);return is&&Zi(i,m),h}for(c=n(i,c);m<o.length;m++)null!==(g=p(c,i,m,o[m],l))&&(t&&null!==g.alternate&&c.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?h=g:u.sibling=g,u=g);return t&&c.forEach((function(t){return e(i,t)})),is&&Zi(i,m),h}function g(i,o,l,h){var u=N(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var c=u=null,m=o,g=o=0,_=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=f(i,m,v.value,h);if(null===y){null===m&&(m=_);break}t&&m&&null===y.alternate&&e(i,m),o=a(y,o,g),null===c?u=y:c.sibling=y,c=y,m=_}if(v.done)return r(i,m),is&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,h))&&(o=a(v,o,g),null===c?u=v:c.sibling=v,c=v);return is&&Zi(i,g),u}for(m=n(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,h))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===c?u=v:c.sibling=v,c=v);return t&&m.forEach((function(t){return e(i,t)})),is&&Zi(i,g),u}return function t(n,s,a,l){if("object"==typeof a&&null!==a&&a.type===T&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var h=a.key,u=s;null!==u;){if(u.key===h){if((h=a.type)===T){if(7===u.tag){r(n,u.sibling),(s=i(u,a.props.children)).return=n,n=s;break t}}else if(u.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===k&&$s(h)===u.type){r(n,u.sibling),(s=i(u,a.props)).ref=Vs(n,u,a),s.return=n,n=s;break t}r(n,u);break}e(n,u),u=u.sibling}a.type===T?((s=Nh(a.props.children,n.mode,l,a.key)).return=n,n=s):((l=Oh(a.type,a.key,a.props,null,n.mode,l)).ref=Vs(n,s,a),l.return=n,n=l)}return o(n);case w:t:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){r(n,s.sibling),(s=i(s,a.children||[])).return=n,n=s;break t}r(n,s);break}e(n,s),s=s.sibling}(s=Lh(a,n.mode,l)).return=n,n=s}return o(n);case k:return t(n,s,(u=a._init)(a._payload),l)}if(et(a))return m(n,s,a,l);if(N(a))return g(n,s,a,l);Ys(n,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,a)).return=n,n=s):(r(n,s),(s=Bh(a,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var Ks=qs(!0),Qs=qs(!1),Zs={},Js=Ei(Zs),ta=Ei(Zs),ea=Ei(Zs);function ra(t){if(t===Zs)throw Error(s(174));return t}function na(t,e){switch(Ai(ea,e),Ai(ta,t),Ai(Js,Zs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Si(Js),Ai(Js,e)}function ia(){Si(Js),Si(ta),Si(ea)}function sa(t){ra(ea.current);var e=ra(Js.current),r=lt(e,t.type);e!==r&&(Ai(ta,t),Ai(Js,r))}function aa(t){ta.current===t&&(Si(Js),Si(ta))}var oa=Ei(0);function la(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=[];function ua(){for(var t=0;t<ha.length;t++)ha[t]._workInProgressVersionPrimary=null;ha.length=0}var ca=x.ReactCurrentDispatcher,da=x.ReactCurrentBatchConfig,fa=0,pa=null,ma=null,ga=null,_a=!1,va=!1,ya=0,xa=0;function ba(){throw Error(s(321))}function wa(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!on(t[r],e[r]))return!1;return!0}function Ta(t,e,r,n,i,a){if(fa=a,pa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ca.current=null===t||null===t.memoizedState?ao:oo,t=r(n,i),va){a=0;do{if(va=!1,ya=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,e.updateQueue=null,ca.current=lo,t=r(n,i)}while(va)}if(ca.current=so,e=null!==ma&&null!==ma.next,fa=0,ga=ma=pa=null,_a=!1,e)throw Error(s(300));return t}function Ea(){var t=0!==ya;return ya=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?pa.memoizedState=ga=t:ga=ga.next=t,ga}function Aa(){if(null===ma){var t=pa.alternate;t=null!==t?t.memoizedState:null}else t=ma.next;var e=null===ga?pa.memoizedState:ga.next;if(null!==e)ga=e,ma=t;else{if(null===t)throw Error(s(310));t={memoizedState:(ma=t).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?pa.memoizedState=ga=t:ga=ga.next=t}return ga}function Ca(t,e){return"function"==typeof e?e(t):e}function Ra(t){var e=Aa(),r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=t;var n=ma,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=o=null,h=null,u=a;do{var c=u.lane;if((fa&c)===c)null!==h&&(h=h.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===h?(l=h=d,o=n):h=h.next=d,pa.lanes|=c,Fl|=c}u=u.next}while(null!==u&&u!==a);null===h?o=n:h.next=l,on(n,e.memoizedState)||(xo=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=h,r.lastRenderedState=n}if(null!==(t=r.interleaved)){i=t;do{a=i.lane,pa.lanes|=a,Fl|=a,i=i.next}while(i!==t)}else null===i&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Pa(t){var e=Aa(),r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{a=t(a,o.action),o=o.next}while(o!==i);on(a,e.memoizedState)||(xo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Ia(){}function Ma(t,e){var r=pa,n=Aa(),i=e(),a=!on(n.memoizedState,i);if(a&&(n.memoizedState=i,xo=!0),n=n.queue,ja(Oa.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||null!==ga&&1&ga.memoizedState.tag){if(r.flags|=2048,La(9,Da.bind(null,r,n,i,e),void 0,null),null===Pl)throw Error(s(349));0!=(30&fa)||ka(r,e,i)}return i}function ka(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},null===(e=pa.updateQueue)?(e={lastEffect:null,stores:null},pa.updateQueue=e,e.stores=[t]):null===(r=e.stores)?e.stores=[t]:r.push(t)}function Da(t,e,r,n){e.value=r,e.getSnapshot=n,Na(e)&&Fa(t)}function Oa(t,e,r){return r((function(){Na(e)&&Fa(t)}))}function Na(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!on(t,r)}catch(t){return!0}}function Fa(t){var e=Ps(t,1);null!==e&&rh(e,t,1,-1)}function Ba(t){var e=Sa();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},e.queue=t,t=t.dispatch=eo.bind(null,pa,t),[e.memoizedState,t]}function La(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},null===(e=pa.updateQueue)?(e={lastEffect:null,stores:null},pa.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function Ua(){return Aa().memoizedState}function za(t,e,r,n){var i=Sa();pa.flags|=t,i.memoizedState=La(1|e,r,void 0,void 0===n?null:n)}function Ga(t,e,r,n){var i=Aa();n=void 0===n?null:n;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==n&&wa(n,a.deps))return void(i.memoizedState=La(e,r,s,n))}pa.flags|=t,i.memoizedState=La(1|e,r,s,n)}function Ha(t,e){return za(8390656,8,t,e)}function ja(t,e){return Ga(2048,8,t,e)}function Xa(t,e){return Ga(4,2,t,e)}function Wa(t,e){return Ga(4,4,t,e)}function Va(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ya(t,e,r){return r=null!=r?r.concat([t]):null,Ga(4,4,Va.bind(null,e,t),r)}function $a(){}function qa(t,e){var r=Aa();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&wa(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Ka(t,e){var r=Aa();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&wa(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Qa(t,e,r){return 0==(21&fa)?(t.baseState&&(t.baseState=!1,xo=!0),t.memoizedState=r):(on(r,e)||(r=me(),pa.lanes|=r,Fl|=r,t.baseState=!0),e)}function Za(t,e){var r=ye;ye=0!==r&&4>r?r:4,t(!0);var n=da.transition;da.transition={};try{t(!1),e()}finally{ye=r,da.transition=n}}function Ja(){return Aa().memoizedState}function to(t,e,r){var n=eh(t);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ro(t)?no(e,r):null!==(r=Rs(t,e,r,n))&&(rh(r,t,n,th()),io(r,e,n))}function eo(t,e,r){var n=eh(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ro(t))no(e,i);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,on(o,a)){var l=e.interleaved;return null===l?(i.next=i,Cs(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(t){}null!==(r=Rs(t,e,i,n))&&(rh(r,t,n,i=th()),io(r,e,n))}}function ro(t){var e=t.alternate;return t===pa||null!==e&&e===pa}function no(t,e){va=_a=!0;var r=t.pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function io(t,e,r){if(0!=(4194240&r)){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,ve(t,r)}}var so={readContext:Ss,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useInsertionEffect:ba,useLayoutEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useMutableSource:ba,useSyncExternalStore:ba,useId:ba,unstable_isNewReconciler:!1},ao={readContext:Ss,useCallback:function(t,e){return Sa().memoizedState=[t,void 0===e?null:e],t},useContext:Ss,useEffect:Ha,useImperativeHandle:function(t,e,r){return r=null!=r?r.concat([t]):null,za(4194308,4,Va.bind(null,e,t),r)},useLayoutEffect:function(t,e){return za(4194308,4,t,e)},useInsertionEffect:function(t,e){return za(4,2,t,e)},useMemo:function(t,e){var r=Sa();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Sa();return e=void 0!==r?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=to.bind(null,pa,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},Sa().memoizedState=t},useState:Ba,useDebugValue:$a,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=Ba(!1),e=t[0];return t=Za.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pa,i=Sa();if(is){if(void 0===r)throw Error(s(407));r=r()}else{if(r=e(),null===Pl)throw Error(s(349));0!=(30&fa)||ka(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,Ha(Oa.bind(null,n,a,t),[t]),n.flags|=2048,La(9,Da.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Sa(),e=Pl.identifierPrefix;if(is){var r=Qi;e=":"+e+"R"+(r=(Ki&~(1<<32-ae(Ki)-1)).toString(32)+r),0<(r=ya++)&&(e+="H"+r.toString(32)),e+=":"}else e=":"+e+"r"+(r=xa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oo={readContext:Ss,useCallback:qa,useContext:Ss,useEffect:ja,useImperativeHandle:Ya,useInsertionEffect:Xa,useLayoutEffect:Wa,useMemo:Ka,useReducer:Ra,useRef:Ua,useState:function(){return Ra(Ca)},useDebugValue:$a,useDeferredValue:function(t){return Qa(Aa(),ma.memoizedState,t)},useTransition:function(){return[Ra(Ca)[0],Aa().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Ma,useId:Ja,unstable_isNewReconciler:!1},lo={readContext:Ss,useCallback:qa,useContext:Ss,useEffect:ja,useImperativeHandle:Ya,useInsertionEffect:Xa,useLayoutEffect:Wa,useMemo:Ka,useReducer:Pa,useRef:Ua,useState:function(){return Pa(Ca)},useDebugValue:$a,useDeferredValue:function(t){var e=Aa();return null===ma?e.memoizedState=t:Qa(e,ma.memoizedState,t)},useTransition:function(){return[Pa(Ca)[0],Aa().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Ma,useId:Ja,unstable_isNewReconciler:!1};function ho(t,e){try{var r="",n=e;do{r+=G(n),n=n.return}while(n);var i=r}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i,digest:null}}function uo(t,e,r){return{value:t,source:null,stack:null!=r?r:null,digest:null!=e?e:null}}function co(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var fo="function"==typeof WeakMap?WeakMap:Map;function po(t,e,r){(r=Ds(-1,r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Xl||(Xl=!0,Wl=n),co(0,e)},r}function mo(t,e,r){(r=Ds(-1,r)).tag=3;var n=t.type.getDerivedStateFromError;if("function"==typeof n){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){co(0,e)}}var s=t.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){co(0,e),"function"!=typeof n&&(null===Vl?Vl=new Set([this]):Vl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),r}function go(t,e,r){var n=t.pingCache;if(null===n){n=t.pingCache=new fo;var i=new Set;n.set(e,i)}else void 0===(i=n.get(e))&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Sh.bind(null,t,e,r),e.then(t,t))}function _o(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vo(t,e,r,n,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((e=Ds(-1,1)).tag=2,Os(r,e,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var yo=x.ReactCurrentOwner,xo=!1;function bo(t,e,r,n){e.child=null===t?Qs(e,null,r,n):Ks(e,t.child,r,n)}function wo(t,e,r,n,i){r=r.render;var s=e.ref;return Es(e,i),n=Ta(t,e,r,n,s,i),r=Ea(),null===t||xo?(is&&r&&ts(e),e.flags|=1,bo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i))}function To(t,e,r,n,i){if(null===t){var s=r.type;return"function"!=typeof s||kh(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Oh(r.type,null,n,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Eo(t,e,s,n,i))}if(s=t.child,0==(t.lanes&i)){var a=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&t.ref===e.ref)return Xo(t,e,i)}return e.flags|=1,(t=Dh(s,n)).ref=e.ref,t.return=e,e.child=t}function Eo(t,e,r,n,i){if(null!==t){var s=t.memoizedProps;if(ln(s,n)&&t.ref===e.ref){if(xo=!1,e.pendingProps=n=s,0==(t.lanes&i))return e.lanes=t.lanes,Xo(t,e,i);0!=(131072&t.flags)&&(xo=!0)}}return Co(t,e,r,n,i)}function So(t,e,r){var n=e.pendingProps,i=n.children,s=null!==t?t.memoizedState:null;if("hidden"===n.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Dl,kl),kl|=r;else{if(0==(1073741824&r))return t=null!==s?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ai(Dl,kl),kl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ai(Dl,kl),kl|=n}else null!==s?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ai(Dl,kl),kl|=n;return bo(t,e,i,r),e.child}function Ao(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Co(t,e,r,n,i){var s=ki(r)?Ii:Ri.current;return s=Mi(e,s),Es(e,i),r=Ta(t,e,r,n,s,i),n=Ea(),null===t||xo?(is&&n&&ts(e),e.flags|=1,bo(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i))}function Ro(t,e,r,n,i){if(ki(r)){var s=!0;Fi(e)}else s=!1;if(Es(e,i),null===e.stateNode)jo(t,e),js(e,r,n),Ws(e,r,n,i),n=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,h=r.contextType;h="object"==typeof h&&null!==h?Ss(h):Mi(e,h=ki(r)?Ii:Ri.current);var u=r.getDerivedStateFromProps,c="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==n||l!==h)&&Xs(e,a,n,h),Is=!1;var d=e.memoizedState;a.state=d,Bs(e,n,a,i),l=e.memoizedState,o!==n||d!==l||Pi.current||Is?("function"==typeof u&&(zs(e,r,u,n),l=e.memoizedState),(o=Is||Hs(e,r,o,n,d,l,h))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4194308)):("function"==typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=h,n=o):("function"==typeof a.componentDidMount&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ks(t,e),o=e.memoizedProps,h=e.type===e.elementType?o:gs(e.type,o),a.props=h,c=e.pendingProps,d=a.context,l="object"==typeof(l=r.contextType)&&null!==l?Ss(l):Mi(e,l=ki(r)?Ii:Ri.current);var f=r.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==c||d!==l)&&Xs(e,a,n,l),Is=!1,d=e.memoizedState,a.state=d,Bs(e,n,a,i);var p=e.memoizedState;o!==c||d!==p||Pi.current||Is?("function"==typeof f&&(zs(e,r,f,n),p=e.memoizedState),(h=Is||Hs(e,r,h,n,d,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=l,n=h):("function"!=typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return Po(t,e,r,n,s,i)}function Po(t,e,r,n,i,s){Ao(t,e);var a=0!=(128&e.flags);if(!n&&!a)return i&&Bi(e,r,!1),Xo(t,e,s);n=e.stateNode,yo.current=e;var o=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&a?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,o,s)):bo(t,e,o,s),e.memoizedState=n.state,i&&Bi(e,r,!0),e.child}function Io(t){var e=t.stateNode;e.pendingContext?Oi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Oi(0,e.context,!1),na(t,e.containerInfo)}function Mo(t,e,r,n,i){return fs(),ps(i),e.flags|=256,bo(t,e,r,n),e.child}var ko,Do,Oo,No={dehydrated:null,treeContext:null,retryLane:0};function Fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bo(t,e,r){var n,i=e.pendingProps,a=oa.current,o=!1,l=0!=(128&e.flags);if((n=l)||(n=(null===t||null!==t.memoizedState)&&0!=(2&a)),n?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ai(oa,1&a),null===t)return hs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},0==(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fh(l,i,0,null),t=Nh(t,i,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Fo(r),e.memoizedState=No,t):Lo(e,l));if(null!==(a=t.memoizedState)&&null!==(n=a.dehydrated))return function(t,e,r,n,i,a,o){if(r)return 256&e.flags?(e.flags&=-257,Uo(t,e,o,n=uo(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Fh({mode:"visible",children:n.children},i,0,null),(a=Nh(a,i,o,null)).flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,0!=(1&e.mode)&&Ks(e,t.child,null,o),e.child.memoizedState=Fo(o),e.memoizedState=No,a);if(0==(1&e.mode))return Uo(t,e,o,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Uo(t,e,o,n=uo(a=Error(s(419)),n,void 0))}if(l=0!=(o&t.childLanes),xo||l){if(null!==(n=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(n.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ps(t,i),rh(n,t,i,-1))}return mh(),Uo(t,e,o,n=uo(Error(s(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Ch.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ns=hi(i.nextSibling),rs=e,is=!0,ss=null,null!==t&&(Yi[$i++]=Ki,Yi[$i++]=Qi,Yi[$i++]=qi,Ki=t.id,Qi=t.overflow,qi=e),(e=Lo(e,n.children)).flags|=4096,e)}(t,e,l,i,n,a,r);if(o){o=i.fallback,l=e.mode,n=(a=t.child).sibling;var h={mode:"hidden",children:i.children};return 0==(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=h,e.deletions=null):(i=Dh(a,h)).subtreeFlags=14680064&a.subtreeFlags,null!==n?o=Dh(n,o):(o=Nh(o,l,r,null)).flags|=2,o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=null===(l=t.child.memoizedState)?Fo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~r,e.memoizedState=No,i}return t=(o=t.child).sibling,i=Dh(o,{mode:"visible",children:i.children}),0==(1&e.mode)&&(i.lanes=r),i.return=e,i.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function Lo(t,e){return(e=Fh({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Uo(t,e,r,n){return null!==n&&ps(n),Ks(e,t.child,null,r),(t=Lo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function zo(t,e,r){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),Ts(t.return,e,r)}function Go(t,e,r,n,i){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Ho(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(bo(t,e,n.children,r),0!=(2&(n=oa.current)))n=1&n|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&zo(t,r,e);else if(19===t.tag)zo(t,r,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ai(oa,n),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;null!==r;)null!==(t=r.alternate)&&null===la(t)&&(i=r),r=r.sibling;null===(r=i)?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Go(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===la(t)){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Go(e,!0,r,null,s);break;case"together":Go(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jo(t,e){0==(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0==(r&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(r=Dh(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Dh(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function Wo(t,e){if(!is)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vo(t){var e=null!==t.alternate&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Yo(t,e,r){var n=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(e),null;case 1:case 17:return ki(e.type)&&Di(),Vo(e),null;case 3:return n=e.stateNode,ia(),Si(Pi),Si(Ri),ua(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(cs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==ss&&(ah(ss),ss=null))),Vo(e),null;case 5:aa(e);var i=ra(ea.current);if(r=e.type,null!==t&&null!=e.stateNode)Do(t,e,r,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(null===e.stateNode)throw Error(s(166));return Vo(e),null}if(t=ra(Js.current),cs(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[di]=e,n[fi]=a,t=0!=(1&e.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(i=0;i<Nn.length;i++)Un(Nn[i],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":K(n,a),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Un("invalid",n);break;case"textarea":it(n,a),Un("invalid",n)}for(var l in vt(r,a),i=null,a)if(a.hasOwnProperty(l)){var h=a[l];"children"===l?"string"==typeof h?n.textContent!==h&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,h,t),i=["children",h]):"number"==typeof h&&n.textContent!==""+h&&(!0!==a.suppressHydrationWarning&&Zn(n.textContent,h,t),i=["children",""+h]):o.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&Un("scroll",n)}switch(r){case"input":V(n),J(n,a,!0);break;case"textarea":V(n),at(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Jn)}n=i,e.updateQueue=n,null!==n&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(r)),"http://www.w3.org/1999/xhtml"===t?"script"===r?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof n.is?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),"select"===r&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[di]=e,t[fi]=n,ko(t,e),e.stateNode=t;t:{switch(l=yt(r,n),r){case"dialog":Un("cancel",t),Un("close",t),i=n;break;case"iframe":case"object":case"embed":Un("load",t),i=n;break;case"video":case"audio":for(i=0;i<Nn.length;i++)Un(Nn[i],t);i=n;break;case"source":Un("error",t),i=n;break;case"img":case"image":case"link":Un("error",t),Un("load",t),i=n;break;case"details":Un("toggle",t),i=n;break;case"input":K(t,n),i=q(t,n),Un("invalid",t);break;case"option":default:i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=B({},n,{value:void 0}),Un("invalid",t);break;case"textarea":it(t,n),i=nt(t,n),Un("invalid",t)}for(a in vt(r,i),h=i)if(h.hasOwnProperty(a)){var u=h[a];"style"===a?gt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ct(t,u):"children"===a?"string"==typeof u?("textarea"!==r||""!==u)&&dt(t,u):"number"==typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Un("scroll",t):null!=u&&y(t,a,u,l))}switch(r){case"input":V(t),J(t,n,!1);break;case"textarea":V(t),at(t);break;case"option":null!=n.value&&t.setAttribute("value",""+X(n.value));break;case"select":t.multiple=!!n.multiple,null!=(a=n.value)?rt(t,!!n.multiple,a,!1):null!=n.defaultValue&&rt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Vo(e),null;case 6:if(t&&null!=e.stateNode)Oo(0,e,t.memoizedProps,n);else{if("string"!=typeof n&&null===e.stateNode)throw Error(s(166));if(r=ra(ea.current),ra(Js.current),cs(e)){if(n=e.stateNode,r=e.memoizedProps,n[di]=e,(a=n.nodeValue!==r)&&null!==(t=rs))switch(t.tag){case 3:Zn(n.nodeValue,r,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!=(1&t.mode))}a&&(e.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=e,e.stateNode=n}return Vo(e),null;case 13:if(Si(oa),n=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(is&&null!==ns&&0!=(1&e.mode)&&0==(128&e.flags))ds(),fs(),e.flags|=98560,a=!1;else if(a=cs(e),null!==n&&null!==n.dehydrated){if(null===t){if(!a)throw Error(s(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=e}else fs(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Vo(e),a=!1}else null!==ss&&(ah(ss),ss=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!=(128&e.flags)?(e.lanes=r,e):((n=null!==n)!=(null!==t&&null!==t.memoizedState)&&n&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&oa.current)?0===Ol&&(Ol=3):mh())),null!==e.updateQueue&&(e.flags|=4),Vo(e),null);case 4:return ia(),null===t&&Hn(e.stateNode.containerInfo),Vo(e),null;case 10:return ws(e.type._context),Vo(e),null;case 19:if(Si(oa),null===(a=e.memoizedState))return Vo(e),null;if(n=0!=(128&e.flags),null===(l=a.rendering))if(n)Wo(a,!1);else{if(0!==Ol||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=la(t))){for(e.flags|=128,Wo(a,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;null!==r;)t=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ai(oa,1&oa.current|2),e.child}t=t.sibling}null!==a.tail&&Qt()>Hl&&(e.flags|=128,n=!0,Wo(a,!1),e.lanes=4194304)}else{if(!n)if(null!==(t=la(l))){if(e.flags|=128,n=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Vo(e),null}else 2*Qt()-a.renderingStartTime>Hl&&1073741824!==r&&(e.flags|=128,n=!0,Wo(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=a.last)?r.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,r=oa.current,Ai(oa,n?1&r|2:1&r),e):(Vo(e),null);case 22:case 23:return ch(),n=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==n&&(e.flags|=8192),n&&0!=(1&e.mode)?0!=(1073741824&kl)&&(Vo(e),6&e.subtreeFlags&&(e.flags|=8192)):Vo(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function $o(t,e){switch(es(e),e.tag){case 1:return ki(e.type)&&Di(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ia(),Si(Pi),Si(Ri),ua(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return aa(e),null;case 13:if(Si(oa),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Si(oa),null;case 4:return ia(),null;case 10:return ws(e.type._context),null;case 22:case 23:return ch(),null;default:return null}}ko=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Do=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ra(Js.current);var s,a=null;switch(r){case"input":i=q(t,i),n=q(t,n),a=[];break;case"select":i=B({},i,{value:void 0}),n=B({},n,{value:void 0}),a=[];break;case"textarea":i=nt(t,i),n=nt(t,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(t.onclick=Jn)}for(u in vt(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var h=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&h!==l&&(null!=h||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in h)h.hasOwnProperty(s)&&l[s]!==h[s]&&(r||(r={}),r[s]=h[s])}else r||(a||(a=[]),a.push(u,r)),r=h;else"dangerouslySetInnerHTML"===u?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(a=a||[]).push(u,h)):"children"===u?"string"!=typeof h&&"number"!=typeof h||(a=a||[]).push(u,""+h):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=h&&"onScroll"===u&&Un("scroll",t),a||l===h||(a=[])):(a=a||[]).push(u,h))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Oo=function(t,e,r,n){r!==n&&(e.flags|=4)};var qo=!1,Ko=!1,Qo="function"==typeof WeakSet?WeakSet:Set,Zo=null;function Jo(t,e){var r=t.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){Eh(t,e,r)}else r.current=null}function tl(t,e,r){try{r()}catch(r){Eh(t,e,r)}}var el=!1;function rl(t,e,r){var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(e,r,s)}i=i.next}while(i!==n)}}function nl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function il(t){var e=t.ref;if(null!==e){var r=t.stateNode;t.tag,t=r,"function"==typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[mi],delete e[gi],delete e[_i]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ol(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==e.onclick||(e.onclick=Jn));else if(4!==n&&null!==(t=t.child))for(ll(t,e,r),t=t.sibling;null!==t;)ll(t,e,r),t=t.sibling}function hl(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==n&&null!==(t=t.child))for(hl(t,e,r),t=t.sibling;null!==t;)hl(t,e,r),t=t.sibling}var ul=null,cl=!1;function dl(t,e,r){for(r=r.child;null!==r;)fl(t,e,r),r=r.sibling}function fl(t,e,r){if(se&&"function"==typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(ie,r)}catch(t){}switch(r.tag){case 5:Ko||Jo(r,e);case 6:var n=ul,i=cl;ul=null,dl(t,e,r),cl=i,null!==(ul=n)&&(cl?(t=ul,r=r.stateNode,8===t.nodeType?t.parentNode.removeChild(r):t.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(cl?(t=ul,r=r.stateNode,8===t.nodeType?li(t.parentNode,r):1===t.nodeType&&li(t,r),He(t)):li(ul,r.stateNode));break;case 4:n=ul,i=cl,ul=r.stateNode.containerInfo,cl=!0,dl(t,e,r),ul=n,cl=i;break;case 0:case 11:case 14:case 15:if(!Ko&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!=(2&s)||0!=(4&s))&&tl(r,e,a),i=i.next}while(i!==n)}dl(t,e,r);break;case 1:if(!Ko&&(Jo(r,e),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(t){Eh(r,e,t)}dl(t,e,r);break;case 21:dl(t,e,r);break;case 22:1&r.mode?(Ko=(n=Ko)||null!==r.memoizedState,dl(t,e,r),Ko=n):dl(t,e,r);break;default:dl(t,e,r)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new Qo),e.forEach((function(e){var n=Rh.bind(null,t,e);r.has(e)||(r.add(e),e.then(n,n))}))}}function ml(t,e){var r=e.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,cl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,cl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,cl=!1;var h=i.alternate;null!==h&&(h.return=null),i.return=null}catch(t){Eh(i,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),_l(t),4&n){try{rl(3,t,t.return),nl(3,t)}catch(e){Eh(t,t.return,e)}try{rl(5,t,t.return)}catch(e){Eh(t,t.return,e)}}break;case 1:ml(e,t),_l(t),512&n&&null!==r&&Jo(r,r.return);break;case 5:if(ml(e,t),_l(t),512&n&&null!==r&&Jo(r,r.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(e){Eh(t,t.return,e)}}if(4&n&&null!=(i=t.stateNode)){var a=t.memoizedProps,o=null!==r?r.memoizedProps:a,l=t.type,h=t.updateQueue;if(t.updateQueue=null,null!==h)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),yt(l,o);var u=yt(l,a);for(o=0;o<h.length;o+=2){var c=h[o],d=h[o+1];"style"===c?gt(i,d):"dangerouslySetInnerHTML"===c?ct(i,d):"children"===c?dt(i,d):y(i,c,d,u)}switch(l){case"input":Z(i,a);break;case"textarea":st(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?rt(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?rt(i,!!a.multiple,a.defaultValue,!0):rt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(e){Eh(t,t.return,e)}}break;case 6:if(ml(e,t),_l(t),4&n){if(null===t.stateNode)throw Error(s(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(e){Eh(t,t.return,e)}}break;case 3:if(ml(e,t),_l(t),4&n&&null!==r&&r.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(e){Eh(t,t.return,e)}break;case 4:default:ml(e,t),_l(t);break;case 13:ml(e,t),_l(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=Qt())),4&n&&pl(t);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&t.mode?(Ko=(u=Ko)||c,ml(e,t),Ko=u):ml(e,t),_l(t),8192&n){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!c&&0!=(1&t.mode))for(Zo=t,c=t.child;null!==c;){for(d=Zo=c;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Jo(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(t){Eh(n,r,t)}}break;case 5:Jo(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Zo=p):bl(d)}c=c.sibling}t:for(c=null,d=t;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,u?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=null!=(h=d.memoizedProps.style)&&h.hasOwnProperty("display")?h.display:null,l.style.display=mt("display",o))}catch(e){Eh(t,t.return,e)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(e){Eh(t,t.return,e)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),_l(t),4&n&&pl(t);case 21:}}function _l(t){var e=t.flags;if(2&e){try{t:{for(var r=t.return;null!==r;){if(al(r)){var n=r;break t}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(dt(i,""),n.flags&=-33),hl(t,ol(t),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(t,ol(t),a);break;default:throw Error(s(161))}}catch(e){Eh(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,r){Zo=t,yl(t,e,r)}function yl(t,e,r){for(var n=0!=(1&t.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=qo;var h=Ko;if(qo=a,(Ko=l)&&!h)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Zo=l):wl(i);for(;null!==s;)Zo=s,yl(s,e,r),s=s.sibling;Zo=i,qo=o,Ko=h}xl(t)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):xl(t)}}function xl(t){for(;null!==Zo;){var e=Zo;if(0!=(8772&e.flags)){var r=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ko||nl(5,e);break;case 1:var n=e.stateNode;if(4&e.flags&&!Ko)if(null===r)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:gs(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Ls(e,a,n);break;case 3:var o=e.updateQueue;if(null!==o){if(r=null,null!==e.child)switch(e.child.tag){case 5:case 1:r=e.child.stateNode}Ls(e,o,r)}break;case 5:var l=e.stateNode;if(null===r&&4&e.flags){r=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&He(d)}}}break;default:throw Error(s(163))}Ko||512&e.flags&&il(e)}catch(t){Eh(e,e.return,t)}}if(e===t){Zo=null;break}if(null!==(r=e.sibling)){r.return=e.return,Zo=r;break}Zo=e.return}}function bl(t){for(;null!==Zo;){var e=Zo;if(e===t){Zo=null;break}var r=e.sibling;if(null!==r){r.return=e.return,Zo=r;break}Zo=e.return}}function wl(t){for(;null!==Zo;){var e=Zo;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{nl(4,e)}catch(t){Eh(e,r,t)}break;case 1:var n=e.stateNode;if("function"==typeof n.componentDidMount){var i=e.return;try{n.componentDidMount()}catch(t){Eh(e,i,t)}}var s=e.return;try{il(e)}catch(t){Eh(e,s,t)}break;case 5:var a=e.return;try{il(e)}catch(t){Eh(e,a,t)}}}catch(t){Eh(e,e.return,t)}if(e===t){Zo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Zo=o;break}Zo=e.return}}var Tl,El=Math.ceil,Sl=x.ReactCurrentDispatcher,Al=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Rl=0,Pl=null,Il=null,Ml=0,kl=0,Dl=Ei(0),Ol=0,Nl=null,Fl=0,Bl=0,Ll=0,Ul=null,zl=null,Gl=0,Hl=1/0,jl=null,Xl=!1,Wl=null,Vl=null,Yl=!1,$l=null,ql=0,Kl=0,Ql=null,Zl=-1,Jl=0;function th(){return 0!=(6&Rl)?Qt():-1!==Zl?Zl:Zl=Qt()}function eh(t){return 0==(1&t.mode)?1:0!=(2&Rl)&&0!==Ml?Ml&-Ml:null!==ms.transition?(0===Jl&&(Jl=me()),Jl):0!==(t=ye)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function rh(t,e,r,n){if(50<Kl)throw Kl=0,Ql=null,Error(s(185));_e(t,r,n),0!=(2&Rl)&&t===Pl||(t===Pl&&(0==(2&Rl)&&(Bl|=r),4===Ol&&oh(t,Ml)),nh(t,n),1===r&&0===Rl&&0==(1&e.mode)&&(Hl=Qt()+500,Ui&&Hi()))}function nh(t,e){var r=t.callbackNode;!function(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ae(s),o=1<<a,l=i[a];-1===l?0!=(o&r)&&0==(o&n)||(i[a]=fe(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var n=de(t,t===Pl?Ml:0);if(0===n)null!==r&&$t(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(null!=r&&$t(r),1===e)0===t.tag?function(t){Ui=!0,Gi(t)}(lh.bind(null,t)):Gi(lh.bind(null,t)),ai((function(){0==(6&Rl)&&Hi()})),r=null;else{switch(xe(n)){case 1:r=Jt;break;case 4:r=te;break;case 16:default:r=ee;break;case 536870912:r=ne}r=Ph(r,ih.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ih(t,e){if(Zl=-1,Jl=0,0!=(6&Rl))throw Error(s(327));var r=t.callbackNode;if(wh()&&t.callbackNode!==r)return null;var n=de(t,t===Pl?Ml:0);if(0===n)return null;if(0!=(30&n)||0!=(n&t.expiredLanes)||e)e=gh(t,n);else{e=n;var i=Rl;Rl|=2;var a=ph();for(Pl===t&&Ml===e||(jl=null,Hl=Qt()+500,dh(t,e));;)try{vh();break}catch(e){fh(t,e)}bs(),Sl.current=a,Rl=i,null!==Il?e=0:(Pl=null,Ml=0,e=Ol)}if(0!==e){if(2===e&&0!==(i=pe(t))&&(n=i,e=sh(t,i)),1===e)throw r=Nl,dh(t,0),oh(t,n),nh(t,Qt()),r;if(6===e)oh(t,n);else{if(i=t.current.alternate,0==(30&n)&&!function(t){for(var e=t;;){if(16384&e.flags){var r=e.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch(t){return!1}}}if(r=e.child,16384&e.subtreeFlags&&null!==r)r.return=e,e=r;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gh(t,n))&&0!==(a=pe(t))&&(n=a,e=sh(t,a)),1===e))throw r=Nl,dh(t,0),oh(t,n),nh(t,Qt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(s(345));case 2:case 5:bh(t,zl,jl);break;case 3:if(oh(t,n),(130023424&n)===n&&10<(e=Gl+500-Qt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&n)!==n){th(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ni(bh.bind(null,t,zl,jl),e);break}bh(t,zl,jl);break;case 4:if(oh(t,n),(4194240&n)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ae(n);a=1<<o,(o=e[o])>i&&(i=o),n&=~a}if(n=i,10<(n=(120>(n=Qt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*El(n/1960))-n)){t.timeoutHandle=ni(bh.bind(null,t,zl,jl),n);break}bh(t,zl,jl);break;default:throw Error(s(329))}}}return nh(t,Qt()),t.callbackNode===r?ih.bind(null,t):null}function sh(t,e){var r=Ul;return t.current.memoizedState.isDehydrated&&(dh(t,e).flags|=256),2!==(t=gh(t,e))&&(e=zl,zl=r,null!==e&&ah(e)),t}function ah(t){null===zl?zl=t:zl.push.apply(zl,t)}function oh(t,e){for(e&=~Ll,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ae(e),n=1<<r;t[r]=-1,e&=~n}}function lh(t){if(0!=(6&Rl))throw Error(s(327));wh();var e=de(t,0);if(0==(1&e))return nh(t,Qt()),null;var r=gh(t,e);if(0!==t.tag&&2===r){var n=pe(t);0!==n&&(e=n,r=sh(t,n))}if(1===r)throw r=Nl,dh(t,0),oh(t,e),nh(t,Qt()),r;if(6===r)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bh(t,zl,jl),nh(t,Qt()),null}function hh(t,e){var r=Rl;Rl|=1;try{return t(e)}finally{0===(Rl=r)&&(Hl=Qt()+500,Ui&&Hi())}}function uh(t){null!==$l&&0===$l.tag&&0==(6&Rl)&&wh();var e=Rl;Rl|=1;var r=Cl.transition,n=ye;try{if(Cl.transition=null,ye=1,t)return t()}finally{ye=n,Cl.transition=r,0==(6&(Rl=e))&&Hi()}}function ch(){kl=Dl.current,Si(Dl)}function dh(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,ii(r)),null!==Il)for(r=Il.return;null!==r;){var n=r;switch(es(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Di();break;case 3:ia(),Si(Pi),Si(Ri),ua();break;case 5:aa(n);break;case 4:ia();break;case 13:case 19:Si(oa);break;case 10:ws(n.type._context);break;case 22:case 23:ch()}r=r.return}if(Pl=t,Il=t=Dh(t.current,null),Ml=kl=e,Ol=0,Nl=null,Ll=Bl=Fl=0,zl=Ul=null,null!==As){for(e=0;e<As.length;e++)if(null!==(n=(r=As[e]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var a=s.next;s.next=i,n.next=a}r.pending=n}As=null}return t}function fh(t,e){for(;;){var r=Il;try{if(bs(),ca.current=so,_a){for(var n=pa.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}_a=!1}if(fa=0,ga=ma=pa=null,va=!1,ya=0,Al.current=null,null===r||null===r.return){Ol=1,Nl=e,Il=null;break}t:{var a=t,o=r.return,l=r,h=e;if(e=Ml,l.flags|=32768,null!==h&&"object"==typeof h&&"function"==typeof h.then){var u=h,c=l,d=c.tag;if(0==(1&c.mode)&&(0===d||11===d||15===d)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=_o(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,e),1&p.mode&&go(a,u,e),h=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(h),e.updateQueue=g}else m.add(h);break t}if(0==(1&e)){go(a,u,e),mh();break t}h=Error(s(426))}else if(is&&1&l.mode){var _=_o(o);if(null!==_){0==(65536&_.flags)&&(_.flags|=256),vo(_,o,l,0,e),ps(ho(h,l));break t}}a=h=ho(h,l),4!==Ol&&(Ol=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Fs(a,po(0,h,e));break t;case 1:l=h;var v=a.type,y=a.stateNode;if(0==(128&a.flags)&&("function"==typeof v.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Vl||!Vl.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e,Fs(a,mo(a,l,e));break t}}a=a.return}while(null!==a)}xh(r)}catch(t){e=t,Il===r&&null!==r&&(Il=r=r.return);continue}break}}function ph(){var t=Sl.current;return Sl.current=so,null===t?so:t}function mh(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0==(268435455&Fl)&&0==(268435455&Bl)||oh(Pl,Ml)}function gh(t,e){var r=Rl;Rl|=2;var n=ph();for(Pl===t&&Ml===e||(jl=null,dh(t,e));;)try{_h();break}catch(e){fh(t,e)}if(bs(),Rl=r,Sl.current=n,null!==Il)throw Error(s(261));return Pl=null,Ml=0,Ol}function _h(){for(;null!==Il;)yh(Il)}function vh(){for(;null!==Il&&!qt();)yh(Il)}function yh(t){var e=Tl(t.alternate,t,kl);t.memoizedProps=t.pendingProps,null===e?xh(t):Il=e,Al.current=null}function xh(t){var e=t;do{var r=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(r=Yo(r,e,kl)))return void(Il=r)}else{if(null!==(r=$o(r,e)))return r.flags&=32767,void(Il=r);if(null===t)return Ol=6,void(Il=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Il=e);Il=e=t}while(null!==e);0===Ol&&(Ol=5)}function bh(t,e,r){var n=ye,i=Cl.transition;try{Cl.transition=null,ye=1,function(t,e,r,n){do{wh()}while(null!==$l);if(0!=(6&Rl))throw Error(s(327));r=t.finishedWork;var i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ae(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}(t,a),t===Pl&&(Il=Pl=null,Ml=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||Yl||(Yl=!0,Ph(ee,(function(){return wh(),null}))),a=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=ye;ye=1;var l=Rl;Rl|=4,Al.current=null,function(t,e){if(ti=Xe,fn(t=dn())){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(r=(r=t.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(t){r=null;break t}var o=0,l=-1,h=-1,u=0,c=0,d=t,f=null;e:for(;;){for(var p;d!==r||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==n&&3!==d.nodeType||(h=o+n),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===r&&++u===i&&(l=o),f===a&&++c===n&&(h=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}r=-1===l||-1===h?null:{start:l,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(ei={focusedElem:t,selectionRange:r},Xe=!1,Zo=e;null!==Zo;)if(t=(e=Zo).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,Zo=t;else for(;null!==Zo;){e=Zo;try{var m=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,_=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:gs(e.type,g),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(t){Eh(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,Zo=t;break}Zo=e.return}m=el,el=!1}(t,r),gl(r,t),pn(ei),Xe=!!ti,ei=ti=null,t.current=r,vl(r,t,i),Kt(),Rl=l,ye=o,Cl.transition=a}else t.current=r;if(Yl&&(Yl=!1,$l=t,ql=i),0===(a=t.pendingLanes)&&(Vl=null),function(t){if(se&&"function"==typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(ie,t,void 0,128==(128&t.current.flags))}catch(t){}}(r.stateNode),nh(t,Qt()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)n((i=e[r]).value,{componentStack:i.stack,digest:i.digest});if(Xl)throw Xl=!1,t=Wl,Wl=null,t;0!=(1&ql)&&0!==t.tag&&wh(),0!=(1&(a=t.pendingLanes))?t===Ql?Kl++:(Kl=0,Ql=t):Kl=0,Hi()}(t,e,r,n)}finally{Cl.transition=i,ye=n}return null}function wh(){if(null!==$l){var t=xe(ql),e=Cl.transition,r=ye;try{if(Cl.transition=null,ye=16>t?16:t,null===$l)var n=!1;else{if(t=$l,$l=null,ql=0,0!=(6&Rl))throw Error(s(331));var i=Rl;for(Rl|=4,Zo=t.current;null!==Zo;){var a=Zo,o=a.child;if(0!=(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var h=0;h<l.length;h++){var u=l[h];for(Zo=u;null!==Zo;){var c=Zo;switch(c.tag){case 0:case 11:case 15:rl(8,c,a)}var d=c.child;if(null!==d)d.return=c,Zo=d;else for(;null!==Zo;){var f=(c=Zo).sibling,p=c.return;if(sl(c),c===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}Zo=a}}if(0!=(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else t:for(;null!==Zo;){if(0!=(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break t}Zo=a.return}}var y=t.current;for(Zo=y;null!==Zo;){var x=(o=Zo).child;if(0!=(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else t:for(o=y;null!==Zo;){if(0!=(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(t){Eh(l,l.return,t)}if(l===o){Zo=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Zo=b;break t}Zo=l.return}}if(Rl=i,Hi(),se&&"function"==typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(ie,t)}catch(t){}n=!0}return n}finally{ye=r,Cl.transition=e}}return!1}function Th(t,e,r){t=Os(t,e=po(0,e=ho(r,e),1),1),e=th(),null!==t&&(_e(t,1,e),nh(t,e))}function Eh(t,e,r){if(3===t.tag)Th(t,t,r);else for(;null!==e;){if(3===e.tag){Th(e,t,r);break}if(1===e.tag){var n=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Vl||!Vl.has(n))){e=Os(e,t=mo(e,t=ho(r,t),1),1),t=th(),null!==e&&(_e(e,1,t),nh(e,t));break}}e=e.return}}function Sh(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),e=th(),t.pingedLanes|=t.suspendedLanes&r,Pl===t&&(Ml&r)===r&&(4===Ol||3===Ol&&(130023424&Ml)===Ml&&500>Qt()-Gl?dh(t,0):Ll|=r),nh(t,e)}function Ah(t,e){0===e&&(0==(1&t.mode)?e=1:(e=ue,0==(130023424&(ue<<=1))&&(ue=4194304)));var r=th();null!==(t=Ps(t,e))&&(_e(t,e,r),nh(t,r))}function Ch(t){var e=t.memoizedState,r=0;null!==e&&(r=e.retryLane),Ah(t,r)}function Rh(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(e),Ah(t,r)}function Ph(t,e){return Yt(t,e)}function Ih(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mh(t,e,r,n){return new Ih(t,e,r,n)}function kh(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Dh(t,e){var r=t.alternate;return null===r?((r=Mh(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&t.flags,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Oh(t,e,r,n,i,a){var o=2;if(n=t,"function"==typeof t)kh(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case T:return Nh(r.children,i,a,e);case E:o=8,i|=8;break;case S:return(t=Mh(12,r,e,2|i)).elementType=S,t.lanes=a,t;case P:return(t=Mh(13,r,e,i)).elementType=P,t.lanes=a,t;case I:return(t=Mh(19,r,e,i)).elementType=I,t.lanes=a,t;case D:return Fh(r,i,a,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case A:o=10;break t;case C:o=9;break t;case R:o=11;break t;case M:o=14;break t;case k:o=16,n=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Mh(o,r,e,i)).elementType=t,e.type=n,e.lanes=a,e}function Nh(t,e,r,n){return(t=Mh(7,t,n,e)).lanes=r,t}function Fh(t,e,r,n){return(t=Mh(22,t,n,e)).elementType=D,t.lanes=r,t.stateNode={isHidden:!1},t}function Bh(t,e,r){return(t=Mh(6,t,null,e)).lanes=r,t}function Lh(t,e,r){return(e=Mh(4,null!==t.children?t.children:[],t.key,e)).lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uh(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zh(t,e,r,n,i,s,a,o,l){return t=new Uh(t,e,r,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Mh(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),t}function Gh(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:t,containerInfo:e,implementation:r}}function Hh(t){if(!t)return Ci;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(ki(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var r=t.type;if(ki(r))return Ni(t,r,e)}return e}function jh(t,e,r,n,i,s,a,o,l){return(t=zh(r,n,!0,t,0,s,0,o,l)).context=Hh(null),r=t.current,(s=Ds(n=th(),i=eh(r))).callback=null!=e?e:null,Os(r,s,i),t.current.lanes=i,_e(t,i,n),nh(t,n),t}function Xh(t,e,r,n){var i=e.current,s=th(),a=eh(i);return r=Hh(r),null===e.context?e.context=r:e.pendingContext=r,(e=Ds(s,a)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),null!==(t=Os(i,e,a))&&(rh(t,i,a,s),Ns(t,i,a)),a}function Wh(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Vh(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var r=t.retryLane;t.retryLane=0!==r&&r<e?r:e}}function Yh(t,e){Vh(t,e),(t=t.alternate)&&Vh(t,e)}Tl=function(t,e,r){if(null!==t)if(t.memoizedProps!==e.pendingProps||Pi.current)xo=!0;else{if(0==(t.lanes&r)&&0==(128&e.flags))return xo=!1,function(t,e,r){switch(e.tag){case 3:Io(e),fs();break;case 5:sa(e);break;case 1:ki(e.type)&&Fi(e);break;case 4:na(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ai(_s,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=e.memoizedState))return null!==n.dehydrated?(Ai(oa,1&oa.current),e.flags|=128,null):0!=(r&e.child.childLanes)?Bo(t,e,r):(Ai(oa,1&oa.current),null!==(t=Xo(t,e,r))?t.sibling:null);Ai(oa,1&oa.current);break;case 19:if(n=0!=(r&e.childLanes),0!=(128&t.flags)){if(n)return Ho(t,e,r);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(oa,oa.current),n)break;return null;case 22:case 23:return e.lanes=0,So(t,e,r)}return Xo(t,e,r)}(t,e,r);xo=0!=(131072&t.flags)}else xo=!1,is&&0!=(1048576&e.flags)&&Ji(e,Vi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;jo(t,e),t=e.pendingProps;var i=Mi(e,Ri.current);Es(e,r),i=Ta(null,e,n,t,i,r);var a=Ea();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ki(n)?(a=!0,Fi(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(e),i.updater=Gs,e.stateNode=i,i._reactInternals=e,Ws(e,n,t,r),e=Po(null,e,n,!0,a,r)):(e.tag=0,is&&a&&ts(e),bo(null,e,i,r),e=e.child),e;case 16:n=e.elementType;t:{switch(jo(t,e),t=e.pendingProps,n=(i=n._init)(n._payload),e.type=n,i=e.tag=function(t){if("function"==typeof t)return kh(t)?1:0;if(null!=t){if((t=t.$$typeof)===R)return 11;if(t===M)return 14}return 2}(n),t=gs(n,t),i){case 0:e=Co(null,e,n,t,r);break t;case 1:e=Ro(null,e,n,t,r);break t;case 11:e=wo(null,e,n,t,r);break t;case 14:e=To(null,e,n,gs(n.type,t),r);break t}throw Error(s(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,Co(t,e,n,i=e.elementType===n?i:gs(n,i),r);case 1:return n=e.type,i=e.pendingProps,Ro(t,e,n,i=e.elementType===n?i:gs(n,i),r);case 3:t:{if(Io(e),null===t)throw Error(s(387));n=e.pendingProps,i=(a=e.memoizedState).element,ks(t,e),Bs(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Mo(t,e,n,r,i=ho(Error(s(423)),e));break t}if(n!==i){e=Mo(t,e,n,r,i=ho(Error(s(424)),e));break t}for(ns=hi(e.stateNode.containerInfo.firstChild),rs=e,is=!0,ss=null,r=Qs(e,null,n,r),e.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===i){e=Xo(t,e,r);break t}bo(t,e,n,r)}e=e.child}return e;case 5:return sa(e),null===t&&hs(e),n=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,o=i.children,ri(n,i)?o=null:null!==a&&ri(n,a)&&(e.flags|=32),Ao(t,e),bo(t,e,o,r),e.child;case 6:return null===t&&hs(e),null;case 13:return Bo(t,e,r);case 4:return na(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Ks(e,null,n,r):bo(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,wo(t,e,n,i=e.elementType===n?i:gs(n,i),r);case 7:return bo(t,e,e.pendingProps,r),e.child;case 8:case 12:return bo(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ai(_s,n._currentValue),n._currentValue=o,null!==a)if(on(a.value,o)){if(a.children===i.children&&!Pi.current){e=Xo(t,e,r);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var h=l.firstContext;null!==h;){if(h.context===n){if(1===a.tag){(h=Ds(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?h.next=h:(h.next=c.next,c.next=h),u.pending=h}}a.lanes|=r,null!==(h=a.alternate)&&(h.lanes|=r),Ts(a.return,r,e),l.lanes|=r;break}h=h.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ts(o,r,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Es(e,r),n=n(i=Ss(i)),e.flags|=1,bo(t,e,n,r),e.child;case 14:return i=gs(n=e.type,e.pendingProps),To(t,e,n,i=gs(n.type,i),r);case 15:return Eo(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:gs(n,i),jo(t,e),e.tag=1,ki(n)?(t=!0,Fi(e)):t=!1,Es(e,r),js(e,n,i),Ws(e,n,i,r),Po(null,e,n,!0,t,r);case 19:return Ho(t,e,r);case 22:return So(t,e,r)}throw Error(s(156,e.tag))};var $h="function"==typeof reportError?reportError:function(t){console.error(t)};function qh(t){this._internalRoot=t}function Kh(t){this._internalRoot=t}function Qh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jh(){}function tu(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var t=Wh(a);o.call(t)}}Xh(e,a,t,i)}else a=function(t,e,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var t=Wh(a);s.call(t)}}var a=jh(e,n,t,0,null,!1,0,"",Jh);return t._reactRootContainer=a,t[pi]=a.current,Hn(8===t.nodeType?t.parentNode:t),uh(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof n){var o=n;n=function(){var t=Wh(l);o.call(t)}}var l=zh(t,0,!1,null,0,!1,0,"",Jh);return t._reactRootContainer=l,t[pi]=l.current,Hn(8===t.nodeType?t.parentNode:t),uh((function(){Xh(e,l,r,n)})),l}(r,e,t,i,n);return Wh(a)}Kh.prototype.render=qh.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Xh(t,e,null,null)},Kh.prototype.unmount=qh.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uh((function(){Xh(null,t,null,null)})),e[pi]=null}},Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var r=0;r<De.length&&0!==e&&e<De[r].priority;r++);De.splice(r,0,t),0===r&&Be(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ce(e.pendingLanes);0!==r&&(ve(e,1|r),nh(e,Qt()),0==(6&Rl)&&(Hl=Qt()+500,Hi()))}break;case 13:uh((function(){var e=Ps(t,1);if(null!==e){var r=th();rh(e,t,1,r)}})),Yh(t,1)}},we=function(t){if(13===t.tag){var e=Ps(t,134217728);null!==e&&rh(e,t,134217728,th()),Yh(t,134217728)}},Te=function(t){if(13===t.tag){var e=eh(t),r=Ps(t,e);null!==r&&rh(r,t,e,th()),Yh(t,e)}},Ee=function(){return ye},Se=function(t,e){var r=ye;try{return ye=t,e()}finally{ye=r}},wt=function(t,e,r){switch(e){case"input":if(Z(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=bi(n);if(!i)throw Error(s(90));Y(n),Z(n,i)}}}break;case"textarea":st(t,r);break;case"select":null!=(e=r.value)&&rt(t,!!r.multiple,e,!1)}},Rt=hh,Pt=uh;var eu={usingClientEntryPoint:!1,Events:[yi,xi,bi,At,Ct,hh]},ru={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(nu),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qh(e))throw Error(s(200));return Gh(t,e,null,r)},e.createRoot=function(t,e){if(!Qh(t))throw Error(s(299));var r=!1,n="",i=$h;return null!=e&&(!0===e.unstable_strictMode&&(r=!0),void 0!==e.identifierPrefix&&(n=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=zh(t,1,!1,null,0,r,0,n,i),t[pi]=e.current,Hn(8===t.nodeType?t.parentNode:t),new qh(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return uh(t)},e.hydrate=function(t,e,r){if(!Zh(e))throw Error(s(200));return tu(null,t,e,!0,r)},e.hydrateRoot=function(t,e,r){if(!Qh(t))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",o=$h;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),e=jh(e,null,t,1,null!=r?r:null,i,0,a,o),t[pi]=e.current,Hn(t),n)for(t=0;t<n.length;t++)i=(i=(r=n[t])._getVersion)(r._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Kh(e)},e.render=function(t,e,r){if(!Zh(e))throw Error(s(200));return tu(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(s(40));return!!t._reactRootContainer&&(uh((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=hh,e.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zh(r))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tu(t,e,r,!1,n)},e.version="18.2.0-next-9e3b772b8-20220608"},29:(t,e,r)=>{"use strict";var n=r(316);e.s=n.createRoot,n.hydrateRoot},316:(t,e,r)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=r(967)},837:(t,e,r)=>{"use strict";var n=r(784),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,r){var n,s={},h=null,u=null;for(n in void 0!==r&&(h=""+r),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,n)&&!l.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===s[n]&&(s[n]=e[n]);return{$$typeof:i,type:t,key:h,ref:u,props:s,_owner:o.current}}e.Fragment=s,e.jsx=h,e.jsxs=h},426:(t,e)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function _(t,e,r){this.props=t,this.context=e,this.refs=g,this.updater=r||p}function v(){}function y(t,e,r){this.props=t,this.context=e,this.refs=g,this.updater=r||p}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=_.prototype;var x=y.prototype=new v;x.constructor=y,m(x,_.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,T={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,n){var i,s={},a=null,o=null;if(null!=e)for(i in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!E.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var h=Array(l),u=0;u<l;u++)h[u]=arguments[u+2];s.children=h}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:r,type:t,key:a,ref:o,props:s,_owner:T.current}}function A(t){return"object"==typeof t&&null!==t&&t.$$typeof===r}var C=/\/+/g;function R(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function P(t,e,i,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=t),t=""===s?"."+R(l,0):s,b(a)?(i="",null!=t&&(i=t.replace(C,"$&/")+"/"),P(a,e,i,"",(function(t){return t}))):null!=a&&(A(a)&&(a=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=""===s?".":s+":",b(t))for(var h=0;h<t.length;h++){var u=s+R(o=t[h],h);l+=P(o,e,i,u,a)}else if(u=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"==typeof u)for(t=u.call(t),h=0;!(o=t.next()).done;)l+=P(o=o.value,e,i,u=s+R(o,h++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,r){if(null==t)return t;var n=[],i=0;return P(t,n,"","",(function(t){return e.call(r,t,i++)})),n}function M(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var k={current:null},D={transition:null},O={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:D,ReactCurrentOwner:T};e.Children={map:I,forEach:function(t,e,r){I(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!A(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=_,e.Fragment=i,e.Profiler=a,e.PureComponent=y,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=T.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)w.call(e,h)&&!E.hasOwnProperty(h)&&(i[h]=void 0===e[h]&&void 0!==l?l[h]:e[h])}var h=arguments.length-2;if(1===h)i.children=n;else if(1<h){l=Array(h);for(var u=0;u<h;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:t.type,key:s,ref:a,props:i,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=A,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return k.current.useCallback(t,e)},e.useContext=function(t){return k.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return k.current.useDeferredValue(t)},e.useEffect=function(t,e){return k.current.useEffect(t,e)},e.useId=function(){return k.current.useId()},e.useImperativeHandle=function(t,e,r){return k.current.useImperativeHandle(t,e,r)},e.useInsertionEffect=function(t,e){return k.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return k.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return k.current.useMemo(t,e)},e.useReducer=function(t,e,r){return k.current.useReducer(t,e,r)},e.useRef=function(t){return k.current.useRef(t)},e.useState=function(t){return k.current.useState(t)},e.useSyncExternalStore=function(t,e,r){return k.current.useSyncExternalStore(t,e,r)},e.useTransition=function(){return k.current.useTransition()},e.version="18.2.0"},784:(t,e,r)=>{"use strict";t.exports=r(426)},94:(t,e,r)=>{"use strict";t.exports=r(837)},475:(t,e)=>{"use strict";function r(t,e){var r=t.length;t.push(e);t:for(;0<r;){var n=r-1>>>1,i=t[n];if(!(0<s(i,e)))break t;t[n]=e,t[r]=i,r=n}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;t:for(var n=0,i=t.length,a=i>>>1;n<a;){var o=2*(n+1)-1,l=t[o],h=o+1,u=t[h];if(0>s(l,r))h<i&&0>s(u,l)?(t[n]=u,t[h]=r,n=h):(t[n]=l,t[o]=r,n=o);else{if(!(h<i&&0>s(u,r)))break t;t[n]=u,t[h]=r,n=h}}}return e}function s(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var h=[],u=[],c=1,d=null,f=3,p=!1,m=!1,g=!1,_="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function x(t){for(var e=n(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,r(h,e)}e=n(u)}}function b(t){if(g=!1,x(t),!m)if(null!==n(h))m=!0,D(w);else{var e=n(u);null!==e&&O(b,e.startTime-t)}}function w(t,r){m=!1,g&&(g=!1,v(A),A=-1),p=!0;var s=f;try{for(x(r),d=n(h);null!==d&&(!(d.expirationTime>r)||t&&!P());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=r);r=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(h)&&i(h),x(r)}else i(h);d=n(h)}if(null!==d)var l=!0;else{var c=n(u);null!==c&&O(b,c.startTime-r),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,E=!1,S=null,A=-1,C=5,R=-1;function P(){return!(e.unstable_now()-R<C)}function I(){if(null!==S){var t=e.unstable_now();R=t;var r=!0;try{r=S(!0,t)}finally{r?T():(E=!1,S=null)}}else E=!1}if("function"==typeof y)T=function(){y(I)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,k=M.port2;M.port1.onmessage=I,T=function(){k.postMessage(null)}}else T=function(){_(I,0)};function D(t){S=t,E||(E=!0,T())}function O(t,r){A=_((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,D(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var r=f;f=e;try{return t()}finally{f=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=f;f=t;try{return e()}finally{f=r}},e.unstable_scheduleCallback=function(t,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:c++,callback:i,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,r(u,t),null===n(h)&&t===n(u)&&(g?(v(A),A=-1):g=!0,O(b,s-a))):(t.sortIndex=o,r(h,t),m||p||(m=!0,D(w))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var r=f;f=e;try{return t.apply(this,arguments)}finally{f=r}}}},616:(t,e,r)=>{"use strict";t.exports=r(475)},62:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var s={},a=[],o=0;o<t.length;o++){var l=t[o],h=n.base?l[0]+n.base:l[0],u=s[h]||0,c="".concat(h," ").concat(u);s[h]=u+1;var d=r(c),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=i(f,n);n.byIndex=o,e.splice(o,0,{identifier:c,updater:p,references:1})}a.push(c)}return a}function i(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var s=n(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var o=r(s[a]);e[o].references--}for(var l=n(t,i),h=0;h<s.length;h++){var u=r(s[h]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=l}}},793:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},173:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},892:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},36:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var s=r.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},464:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},639:function(t,e,r){var n;t=r.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r.g&&r.g;s.global!==s&&s.window!==s&&s.self;var a,o=2147483647,l=36,h=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function m(t){throw RangeError(d[t])}function g(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function _(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+g((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function y(t){return g(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,r){var n=0;for(t=r?f(t/700):t>>1,t+=f(t/e);t>455;n+=l)t=f(t/35);return f(n+36*t/(t+38))}function w(t){var e,r,n,i,s,a,h,u,c,d,p,g=[],_=t.length,v=0,x=128,w=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&m("not-basic"),g.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<_;){for(s=v,a=1,h=l;i>=_&&m("invalid-input"),((u=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:l)>=l||u>f((o-v)/a))&&m("overflow"),v+=u*a,!(u<(c=h<=w?1:h>=w+26?26:h-w));h+=l)a>f(o/(d=l-c))&&m("overflow"),a*=d;w=b(v-s,e=g.length+1,0==s),f(v/e)>o-x&&m("overflow"),x+=f(v/e),v%=e,g.splice(v++,0,x)}return y(g)}function T(t){var e,r,n,i,s,a,h,u,c,d,g,_,y,w,T,E=[];for(_=(t=v(t)).length,e=128,r=0,s=72,a=0;a<_;++a)(g=t[a])<128&&E.push(p(g));for(n=i=E.length,i&&E.push("-");n<_;){for(h=o,a=0;a<_;++a)(g=t[a])>=e&&g<h&&(h=g);for(h-e>f((o-r)/(y=n+1))&&m("overflow"),r+=(h-e)*y,e=h,a=0;a<_;++a)if((g=t[a])<e&&++r>o&&m("overflow"),g==e){for(u=r,c=l;!(u<(d=c<=s?1:c>=s+26?26:c-s));c+=l)T=u-d,w=l-d,E.push(p(x(d+T%w,0))),u=f(T/w);E.push(p(x(u,0))),s=b(r,y,n==i),r=0,++n}++r,++e}return E.join("")}a={version:"1.3.2",ucs2:{decode:v,encode:y},decode:w,encode:T,toASCII:function(t){return _(t,(function(t){return u.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return _(t,(function(t){return h.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n)}()},883:(t,e,r)=>{"use strict";var n=r(639),i=r(225);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=y,e.DB=function(t,e){return y(t,!1,!0).resolve(e)},e.WU=function(t){return i.isString(t)&&(t=y(t)),t instanceof s?t.format():s.prototype.format.call(t)};var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(642);function y(t,e,r){if(t&&i.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,r),n}s.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),o=-1!==s&&s<t.indexOf("#")?"?":"#",h=t.split(o);h[0]=h[0].replace(/\\/g,"/");var y=t=h.join(o);if(y=y.trim(),!r&&1===t.split("#").length){var x=l.exec(y);if(x)return this.path=y,this.href=y,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=a.exec(y);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,y=y.substr(b.length)}if(r||b||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||b&&g[b]||(y=y.substr(2),this.slashes=!0)}if(!g[b]&&(T||b&&!_[b])){for(var E,S,A=-1,C=0;C<d.length;C++)-1!==(R=y.indexOf(d[C]))&&(-1===A||R<A)&&(A=R);for(-1!==(S=-1===A?y.lastIndexOf("@"):y.lastIndexOf("@",A))&&(E=y.slice(0,S),y=y.slice(S+1),this.auth=decodeURIComponent(E)),A=-1,C=0;C<c.length;C++){var R;-1!==(R=y.indexOf(c[C]))&&(-1===A||R<A)&&(A=R)}-1===A&&(A=y.length),this.host=y.slice(0,A),y=y.slice(A),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var I=this.hostname.split(/\./),M=(C=0,I.length);C<M;C++){var k=I[C];if(k&&!k.match(f)){for(var D="",O=0,N=k.length;O<N;O++)k.charCodeAt(O)>127?D+="x":D+=k[O];if(!D.match(f)){var F=I.slice(0,C),B=I.slice(C+1),L=k.match(p);L&&(F.push(L[1]),B.unshift(L[2])),B.length&&(y="/"+B.join(".")+y),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+U,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[w])for(C=0,M=u.length;C<M;C++){var G=u[C];if(-1!==y.indexOf(G)){var H=encodeURIComponent(G);H===G&&(H=escape(G)),y=y.split(G).join(H)}}var j=y.indexOf("#");-1!==j&&(this.hash=y.substr(j),y=y.slice(0,j));var X=y.indexOf("?");if(-1!==X?(this.search=y.substr(X),this.query=y.substr(X+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,X)):e&&(this.search="",this.query={}),y&&(this.pathname=y),_[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(i.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var r=new s,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(r[u]=t[u])}return _[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!_[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||y||r.host&&t.pathname,w=b,T=r.pathname&&r.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!_[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===T[0])),x)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search))return E&&(r.hostname=r.host=T.shift(),(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift())),r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],A=(r.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,C=0,R=T.length;R>=0;R--)"."===(S=T[R])?T.splice(R,1):".."===S?(T.splice(R,1),C++):C&&(T.splice(R,1),C--);if(!b&&!w)for(;C--;C)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var P,I=""===T[0]||T[0]&&"/"===T[0].charAt(0);return E&&(r.hostname=r.host=I?"":T.length?T.shift():"",(P=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=P.shift(),r.host=r.hostname=P.shift())),(b=b||r.host&&T.length)&&!I&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},225:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},154:t=>{"use strict";t.exports=JSON.parse('[{"id":"castle","spriteId":"buildings/inn","maxHp":1000,"action":{"speed":100,"effect":[{"type":"spawn-unit"}],"cooldown":0},"size":100}]')},280:t=>{"use strict";t.exports=JSON.parse('[{"id":"skeleton","spriteId":"sprites/skeleton/skeleton","moveSpeed":2,"maxHp":100,"action":{"animation":"attack","seekTargetCondition":["alive","enemy-team"],"distance":40,"cooldown":120,"speed":30,"hitEffect":[{"type":"dmg","dmgType":"physical","power":20}]},"size":32,"effects":[{"type":"armor","dmgType":"physical","power":10}]},{"id":"archer","spriteId":"sprites/archer/archer","moveSpeed":2,"maxHp":100,"action":{"animation":"attack","seekTargetCondition":["alive","enemy-team"],"projectileId":"sprites/projectiles/projectile","distance":400,"cooldown":120,"speed":30,"projectileSpeed":5,"hitEffect":[{"type":"dmg","dmgType":"physical","power":20}]},"size":32},{"id":"necromancer","spriteId":"sprites/inquisitor/inquisitor","moveSpeed":2,"maxHp":100,"action":{"animation":"attack","seekTargetCondition":["dead","same-team"],"distance":100,"cooldown":500,"speed":60,"hitEffect":[{"type":"revive"}]},"size":32},{"id":"priest","spriteId":"sprites/inquisitor/inquisitor","moveSpeed":2,"maxHp":100,"action":{"animation":"attack","seekTargetCondition":["alive","same-team","damaged"],"distance":100,"cooldown":150,"speed":60,"hitEffect":[{"type":"heal","power":20}]},"size":32},{"id":"steam_dragon","spriteId":"sprites/steam_dragon/Steam Dragon spritesheet","moveSpeed":2,"maxHp":100,"action":{"animation":"attack","seekTargetCondition":["alive","enemy-team"],"distance":100,"cooldown":150,"speed":60,"hitEffect":[{"type":"dmg","dmgType":"fire","power":7},{"type":"dot","dmgType":"fire","power":5,"interval":50,"period":5}]},"size":32}]')}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.nc=void 0,(()=>{"use strict";var t={};r.r(t),r.d(t,{BaseTextureCache:()=>Hs,CanvasRenderTarget:()=>Ws,DATA_URI:()=>Ys,EventEmitter:()=>as,ProgramCache:()=>zs,TextureCache:()=>Gs,clearTextureCache:()=>Xs,correctBlendMode:()=>Ts,createIndicesForQuads:()=>Cs,decomposeDataUri:()=>$s,deprecation:()=>Us,destroyTextureCache:()=>js,determineCrossOrigin:()=>Ks,earcut:()=>os,getBufferType:()=>Rs,getResolutionOfUrl:()=>Qs,hex2rgb:()=>vs,hex2string:()=>ys,interleaveTypedArrays:()=>Is,isMobile:()=>Ci,isPow2:()=>ks,isWebGLSupported:()=>gs,log2:()=>Ds,nextPow2:()=>Ms,path:()=>ds,premultiplyBlendMode:()=>ws,premultiplyRgba:()=>Es,premultiplyTint:()=>Ss,premultiplyTintToRgba:()=>As,removeItems:()=>Os,rgb2hex:()=>bs,sayHello:()=>ps,sign:()=>Ns,skipHello:()=>fs,string2hex:()=>xs,trimCanvas:()=>Vs,uid:()=>Bs,url:()=>hs});var e={};r.r(e),r.d(e,{ALPHA_MODES:()=>ri,AbstractMultiResource:()=>sa,AccessibilityManager:()=>eh,AnimatedSprite:()=>kc,Application:()=>nh,ArrayResource:()=>aa,Assets:()=>ph,AssetsClass:()=>fh,Attribute:()=>Aa,BLEND_MODES:()=>Yn,BUFFER_BITS:()=>Vn,BUFFER_TYPE:()=>hi,BackgroundSystem:()=>sl,BaseImageResource:()=>oa,BasePrepare:()=>bc,BaseRenderTexture:()=>ya,BaseTexture:()=>ia,BatchDrawCall:()=>_l,BatchGeometry:()=>bl,BatchRenderer:()=>Tl,BatchShaderGenerator:()=>xl,BatchSystem:()=>ja,BatchTextureArray:()=>vl,BitmapFont:()=>$c,BitmapFontData:()=>Lc,BitmapText:()=>Jc,BlobResource:()=>jh,Bounds:()=>Ol,BrowserAdapter:()=>ui,Buffer:()=>Ra,BufferResource:()=>ea,BufferSystem:()=>Al,CLEAR_MODES:()=>ni,COLOR_MASK_BITS:()=>oi,Cache:()=>oh,CanvasResource:()=>la,Circle:()=>Ui,CompressedTextureResource:()=>Xh,Container:()=>Ll,ContextSystem:()=>Wa,CountLimiter:()=>fc,CubeResource:()=>ua,DEG_TO_RAD:()=>Oi,DRAW_MODES:()=>$n,DisplayObject:()=>Nl,ENV:()=>Xn,Ellipse:()=>zi,EventBoundary:()=>Ql,EventSystem:()=>Jl,ExtensionType:()=>Pi,Extract:()=>hu,FORMATS:()=>qn,FORMATS_TO_COMPONENTS:()=>tu,FederatedDisplayObject:()=>th,FederatedEvent:()=>Wl,FederatedMouseEvent:()=>Vl,FederatedPointerEvent:()=>Yl,FederatedWheelEvent:()=>$l,FillStyle:()=>fu,Filter:()=>xo,FilterState:()=>La,FilterSystem:()=>Ga,Framebuffer:()=>va,FramebufferSystem:()=>$a,GC_MODES:()=>ii,GLFramebuffer:()=>Va,GLProgram:()=>Ho,GLTexture:()=>el,GRAPHICS_CURVES:()=>du,GenerateTextureSystem:()=>il,Geometry:()=>Da,GeometrySystem:()=>Ka,Graphics:()=>Bu,GraphicsData:()=>Ru,GraphicsGeometry:()=>ku,IGLUniformData:()=>Go,INSTALLED:()=>Zs,INTERNAL_FORMATS:()=>Gh,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>Hh,ImageBitmapResource:()=>ga,ImageResource:()=>ca,LINE_CAP:()=>cu,LINE_JOIN:()=>uu,LineStyle:()=>Du,LoaderParserPriority:()=>_h,MASK_TYPES:()=>ai,MIPMAP_MODES:()=>ei,MSAA_QUALITY:()=>li,MaskData:()=>Qa,MaskSystem:()=>Eo,Matrix:()=>Xi,Mesh:()=>ju,MeshBatchUvs:()=>Uu,MeshGeometry:()=>Wu,MeshMaterial:()=>Xu,MultisampleSystem:()=>Cl,NineSlicePlane:()=>Qu,ObjectRenderer:()=>Ha,ObjectRendererSystem:()=>Rl,ObservablePoint:()=>ji,PI_2:()=>ki,PRECISION:()=>si,ParticleContainer:()=>Zu,ParticleRenderer:()=>tc,PlaneGeometry:()=>Vu,PluginSystem:()=>ol,Point:()=>Fi,Polygon:()=>Gi,Prepare:()=>Sc,Program:()=>_o,ProjectionSystem:()=>Mo,Quad:()=>Oa,QuadUv:()=>Na,RAD_TO_DEG:()=>Di,RENDERER_TYPE:()=>Wn,Rectangle:()=>Li,RenderTexture:()=>Ea,RenderTexturePool:()=>Sa,RenderTextureSystem:()=>Oo,Renderer:()=>gl,ResizePlugin:()=>ih,Resource:()=>ta,RopeGeometry:()=>Yu,RoundedRectangle:()=>Hi,Runner:()=>es,SAMPLER_TYPES:()=>Zn,SCALE_MODES:()=>Jn,SHAPES:()=>Ni,SVGResource:()=>fa,ScissorSystem:()=>Po,Shader:()=>vo,ShaderSystem:()=>Qo,SimpleMesh:()=>Ku,SimplePlane:()=>qu,SimpleRope:()=>$u,Sprite:()=>Gl,SpriteMaskFilter:()=>To,Spritesheet:()=>Rc,StartupSystem:()=>hl,State:()=>yo,StateSystem:()=>Jo,StencilSystem:()=>Io,SystemManager:()=>ll,TARGETS:()=>Kn,TEXT_GRADIENT:()=>ec,TYPES:()=>Qn,TYPES_TO_BYTES_PER_COMPONENT:()=>Jh,TYPES_TO_BYTES_PER_PIXEL:()=>eu,TemporaryDisplayObject:()=>Fl,Text:()=>dc,TextFormat:()=>Uc,TextMetrics:()=>hc,TextStyle:()=>ic,Texture:()=>Ta,TextureGCSystem:()=>tl,TextureMatrix:()=>wo,TextureSystem:()=>rl,TextureUvs:()=>xa,Ticker:()=>is,TickerPlugin:()=>ss,TilingSprite:()=>Oc,TilingSpriteRenderer:()=>Bc,TimeLimiter:()=>Ac,Transform:()=>ts,TransformFeedback:()=>El,TransformFeedbackSystem:()=>ul,UPDATE_PRIORITY:()=>rs,UniformGroup:()=>Ba,VERSION:()=>Pl,VideoResource:()=>ma,ViewSystem:()=>al,ViewableBuffer:()=>yl,WRAP_MODES:()=>ti,XMLFormat:()=>zc,XMLStringFormat:()=>Gc,accessibleTarget:()=>Xl,autoDetectFormat:()=>jc,autoDetectRenderer:()=>dl,autoDetectResource:()=>Js,cacheTextureArray:()=>gh,checkExtension:()=>Ih,checkMaxIfStatementsInShader:()=>po,convertToList:()=>ah,createStringVariations:()=>ch,createTexture:()=>Mh,createUBOElements:()=>Lo,defaultFilterVertex:()=>pl,defaultVertex:()=>fl,detectAvif:()=>Bh,detectCompressedTextures:()=>$h,detectDefaults:()=>zh,detectWebp:()=>Lh,extensions:()=>Mi,filters:()=>rd,generateProgram:()=>Yo,generateUniformBufferSync:()=>zo,getFontFamilyName:()=>wh,getTestContext:()=>eo,getUBOData:()=>Uo,graphicsUtils:()=>Lu,groupD8:()=>Zi,isMobile:()=>Ci,isSingleItem:()=>lh,loadBitmapFont:()=>ed,loadDDS:()=>iu,loadImageBitmap:()=>Dh,loadJson:()=>vh,loadKTX:()=>su,loadSVG:()=>Nh,loadTextures:()=>Oh,loadTxt:()=>yh,loadWebFont:()=>Th,parseDDS:()=>Qh,parseKTX:()=>ru,resolveCompressedTextureUrl:()=>au,resolveTextureUrl:()=>Fh,settings:()=>Ri,spritesheetAsset:()=>Mc,uniformParsers:()=>lo,utils:()=>t});var n=r(94),i=r(29),s=r(784);const a=(0,s.createContext)(null),o=({id:t})=>{const e=(0,s.useContext)(a),[r,i]=(0,s.useState)(void 0);return(0,s.useEffect)((()=>{e.assetManager.getAsset(t).then((t=>i(t)))}),[t]),r?(0,n.jsx)("img",{src:r}):null};var l=r(62),h=r.n(l),u=r(36),c=r.n(u),d=r(793),f=r.n(d),p=r(892),m=r.n(p),g=r(173),_=r.n(g),v=r(464),y=r.n(v),x=r(490),b={};b.styleTagTransform=y(),b.setAttributes=m(),b.insert=f().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=_(),h()(x.Z,b),x.Z&&x.Z.locals&&x.Z.locals;class w{loop;constructor(t){this.loop=t}isRunning=!0;hookGlobalKeys(){window.addEventListener("keypress",(t=>this.nextFrameEvent(t))),window.addEventListener("keydown",(t=>this.gamePauseEvent(t)))}gamePauseEvent(t){" "===t.key&&(this.isRunning?this.loop.stop():this.loop.start(),this.isRunning=!this.isRunning)}nextFrameEvent(t){"n"===t.key&&(this.isRunning||this.loop.tick())}}const T=function(t){return t},E=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)};var S=Math.max;const A="object"==typeof global&&global&&global.Object===Object&&global;var C="object"==typeof self&&self&&self.Object===Object&&self;const R=A||C||Function("return this")(),P=R.Symbol;var I=Object.prototype,M=I.hasOwnProperty,k=I.toString,D=P?P.toStringTag:void 0;var O=Object.prototype.toString;var N=P?P.toStringTag:void 0;const F=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":N&&N in Object(t)?function(t){var e=M.call(t,D),r=t[D];try{t[D]=void 0;var n=!0}catch(t){}var i=k.call(t);return n&&(e?t[D]=r:delete t[D]),i}(t):function(t){return O.call(t)}(t)},B=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},L=function(t){if(!B(t))return!1;var e=F(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},U=R["__core-js_shared__"];var z=function(){var t=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var G=Function.prototype.toString;const H=function(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var j=/^\[object .+?Constructor\]$/,X=Function.prototype,W=Object.prototype,V=X.toString,Y=W.hasOwnProperty,$=RegExp("^"+V.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const q=function(t){return!(!B(t)||(e=t,z&&z in e))&&(L(t)?$:j).test(H(t));var e},K=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return q(r)?r:void 0},Q=function(){try{var t=K(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Z=Q?function(t,e){return Q(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:T;var J=Date.now;const tt=(et=Z,rt=0,nt=0,function(){var t=J(),e=16-(t-nt);if(nt=t,e>0){if(++rt>=800)return arguments[0]}else rt=0;return et.apply(void 0,arguments)});var et,rt,nt;const it=function(t,e){return tt(function(t,e,r){return e=S(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=S(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(a),E(t,this,o)}}(t,e,T),t+"")},st=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},at=function(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1},ot=function(t){return t!=t},lt=function(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):at(t,ot,r)},ht=function(t,e,r,n){for(var i=r-1,s=t.length;++i<s;)if(n(t[i],e))return i;return-1},ut=function(t){return function(e){return t(e)}},ct=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var dt=Array.prototype.splice;const ft=it((function(t,e){return t&&t.length&&e&&e.length?function(t,e,r,n){var i=n?ht:lt,s=-1,a=e.length,o=t;for(t===e&&(e=ct(e)),r&&(o=st(t,ut(r)));++s<a;)for(var l=0,h=e[s],u=r?r(h):h;(l=i(o,u,l,n))>-1;)o!==t&&dt.call(o,l,1),dt.call(t,l,1);return t}(t,e):t})),pt=function(t,e){return t===e||t!=t&&e!=e},mt=function(t,e){for(var r=t.length;r--;)if(pt(t[r][0],e))return r;return-1};var gt=Array.prototype.splice;function _t(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_t.prototype.clear=function(){this.__data__=[],this.size=0},_t.prototype.delete=function(t){var e=this.__data__,r=mt(e,t);return!(r<0||(r==e.length-1?e.pop():gt.call(e,r,1),--this.size,0))},_t.prototype.get=function(t){var e=this.__data__,r=mt(e,t);return r<0?void 0:e[r][1]},_t.prototype.has=function(t){return mt(this.__data__,t)>-1},_t.prototype.set=function(t,e){var r=this.__data__,n=mt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const vt=_t,yt=K(R,"Map"),xt=K(Object,"create");var bt=Object.prototype.hasOwnProperty;var wt=Object.prototype.hasOwnProperty;function Tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Tt.prototype.clear=function(){this.__data__=xt?xt(null):{},this.size=0},Tt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Tt.prototype.get=function(t){var e=this.__data__;if(xt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return bt.call(e,t)?e[t]:void 0},Tt.prototype.has=function(t){var e=this.__data__;return xt?void 0!==e[t]:wt.call(e,t)},Tt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xt&&void 0===e?"__lodash_hash_undefined__":e,this};const Et=Tt,St=function(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map};function At(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}At.prototype.clear=function(){this.size=0,this.__data__={hash:new Et,map:new(yt||vt),string:new Et}},At.prototype.delete=function(t){var e=St(this,t).delete(t);return this.size-=e?1:0,e},At.prototype.get=function(t){return St(this,t).get(t)},At.prototype.has=function(t){return St(this,t).has(t)},At.prototype.set=function(t,e){var r=St(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Ct=At;function Rt(t){var e=this.__data__=new vt(t);this.size=e.size}Rt.prototype.clear=function(){this.__data__=new vt,this.size=0},Rt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Rt.prototype.get=function(t){return this.__data__.get(t)},Rt.prototype.has=function(t){return this.__data__.has(t)},Rt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof vt){var n=r.__data__;if(!yt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ct(n)}return r.set(t,e),this.size=r.size,this};const Pt=Rt;function It(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ct;++e<r;)this.add(t[e])}It.prototype.add=It.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},It.prototype.has=function(t){return this.__data__.has(t)};const Mt=It,kt=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},Dt=function(t,e){return t.has(e)},Ot=function(t,e,r,n,i,s){var a=1&r,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(t),u=s.get(e);if(h&&u)return h==e&&u==t;var c=-1,d=!0,f=2&r?new Mt:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var p=t[c],m=e[c];if(n)var g=a?n(m,p,c,e,t,s):n(p,m,c,t,e,s);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!kt(e,(function(t,e){if(!Dt(f,e)&&(p===t||i(p,t,r,n,s)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,r,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d},Nt=R.Uint8Array,Ft=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},Bt=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r};var Lt=P?P.prototype:void 0,Ut=Lt?Lt.valueOf:void 0;const zt=Array.isArray;var Gt=Object.prototype.propertyIsEnumerable,Ht=Object.getOwnPropertySymbols;const jt=Ht?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}(Ht(t),(function(e){return Gt.call(t,e)})))}:function(){return[]},Xt=function(t){return null!=t&&"object"==typeof t},Wt=function(t){return Xt(t)&&"[object Arguments]"==F(t)};var Vt=Object.prototype,Yt=Vt.hasOwnProperty,$t=Vt.propertyIsEnumerable;const qt=Wt(function(){return arguments}())?Wt:function(t){return Xt(t)&&Yt.call(t,"callee")&&!$t.call(t,"callee")};var Kt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qt=Kt&&"object"==typeof module&&module&&!module.nodeType&&module,Zt=Qt&&Qt.exports===Kt?R.Buffer:void 0;const Jt=(Zt?Zt.isBuffer:void 0)||function(){return!1};var te=/^(?:0|[1-9]\d*)$/;const ee=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&te.test(t))&&t>-1&&t%1==0&&t<e},re=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var ie="object"==typeof exports&&exports&&!exports.nodeType&&exports,se=ie&&"object"==typeof module&&module&&!module.nodeType&&module,ae=se&&se.exports===ie&&A.process,oe=function(){try{return se&&se.require&&se.require("util").types||ae&&ae.binding&&ae.binding("util")}catch(t){}}(),le=oe&&oe.isTypedArray;const he=le?ut(le):function(t){return Xt(t)&&re(t.length)&&!!ne[F(t)]};var ue=Object.prototype.hasOwnProperty;const ce=function(t,e){var r=zt(t),n=!r&&qt(t),i=!r&&!n&&Jt(t),s=!r&&!n&&!i&&he(t),a=r||n||i||s,o=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],l=o.length;for(var h in t)!e&&!ue.call(t,h)||a&&("length"==h||i&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||ee(h,l))||o.push(h);return o};var de=Object.prototype;const fe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||de)},pe=function(t,e){return function(r){return t(e(r))}},me=pe(Object.keys,Object);var ge=Object.prototype.hasOwnProperty;const _e=function(t){return null!=t&&re(t.length)&&!L(t)},ve=function(t){return _e(t)?ce(t):function(t){if(!fe(t))return me(t);var e=[];for(var r in Object(t))ge.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)},ye=function(t){return function(t,e,r){var n=e(t);return zt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,ve,jt)};var xe=Object.prototype.hasOwnProperty;const be=K(R,"DataView"),we=K(R,"Promise"),Te=K(R,"Set"),Ee=K(R,"WeakMap");var Se="[object Map]",Ae="[object Promise]",Ce="[object Set]",Re="[object WeakMap]",Pe="[object DataView]",Ie=H(be),Me=H(yt),ke=H(we),De=H(Te),Oe=H(Ee),Ne=F;(be&&Ne(new be(new ArrayBuffer(1)))!=Pe||yt&&Ne(new yt)!=Se||we&&Ne(we.resolve())!=Ae||Te&&Ne(new Te)!=Ce||Ee&&Ne(new Ee)!=Re)&&(Ne=function(t){var e=F(t),r="[object Object]"==e?t.constructor:void 0,n=r?H(r):"";if(n)switch(n){case Ie:return Pe;case Me:return Se;case ke:return Ae;case De:return Ce;case Oe:return Re}return e});const Fe=Ne;var Be="[object Arguments]",Le="[object Array]",Ue="[object Object]",ze=Object.prototype.hasOwnProperty;const Ge=function(t,e,r,n,i,s){var a=zt(t),o=zt(e),l=a?Le:Fe(t),h=o?Le:Fe(e),u=(l=l==Be?Ue:l)==Ue,c=(h=h==Be?Ue:h)==Ue,d=l==h;if(d&&Jt(t)){if(!Jt(e))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new Pt),a||he(t)?Ot(t,e,r,n,i,s):function(t,e,r,n,i,s,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new Nt(t),new Nt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return pt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=Ft;case"[object Set]":var l=1&n;if(o||(o=Bt),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;n|=2,a.set(t,e);var u=Ot(o(t),o(e),n,i,s,a);return a.delete(t),u;case"[object Symbol]":if(Ut)return Ut.call(t)==Ut.call(e)}return!1}(t,e,l,r,n,i,s);if(!(1&r)){var f=u&&ze.call(t,"__wrapped__"),p=c&&ze.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new Pt),i(m,g,r,n,s)}}return!!d&&(s||(s=new Pt),function(t,e,r,n,i,s){var a=1&r,o=ye(t),l=o.length;if(l!=ye(e).length&&!a)return!1;for(var h=l;h--;){var u=o[h];if(!(a?u in e:xe.call(e,u)))return!1}var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var f=!0;s.set(t,e),s.set(e,t);for(var p=a;++h<l;){var m=t[u=o[h]],g=e[u];if(n)var _=a?n(g,m,u,e,t,s):n(m,g,u,t,e,s);if(!(void 0===_?m===g||i(m,g,r,n,s):_)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return s.delete(t),s.delete(e),f}(t,e,r,n,i,s))},He=function t(e,r,n,i,s){return e===r||(null==e||null==r||!Xt(e)&&!Xt(r)?e!=e&&r!=r:Ge(e,r,n,i,t,s))},je=function(t){return t==t&&!B(t)},Xe=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}},We=function(t){var e=function(t){for(var e=ve(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,je(i)]}return e}(t);return 1==e.length&&e[0][2]?Xe(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var i=r.length,s=i,a=!n;if(null==t)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){var l=(o=r[i])[0],h=t[l],u=o[1];if(a&&o[2]){if(void 0===h&&!(l in t))return!1}else{var c=new Pt;if(n)var d=n(h,u,l,t,e,c);if(!(void 0===d?He(u,h,3,n,c):d))return!1}}return!0}(r,t,e)}},Ve=function(t){return"symbol"==typeof t||Xt(t)&&"[object Symbol]"==F(t)};var Ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$e=/^\w*$/;const qe=function(t,e){if(zt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ve(t))||$e.test(t)||!Ye.test(t)||null!=e&&t in Object(e)};function Ke(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(Ke.Cache||Ct),r}Ke.Cache=Ct;var Qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/\\(\\)?/g;const Je=(tr=Ke((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Qe,(function(t,r,n,i){e.push(n?i.replace(Ze,"$1"):r||t)})),e}),(function(t){return 500===er.size&&er.clear(),t})),er=tr.cache,tr);var tr,er,rr=P?P.prototype:void 0,nr=rr?rr.toString:void 0;const ir=function t(e){if("string"==typeof e)return e;if(zt(e))return st(e,t)+"";if(Ve(e))return nr?nr.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r},sr=function(t){return null==t?"":ir(t)},ar=function(t,e){return zt(t)?t:qe(t,e)?[t]:Je(sr(t))},or=function(t){if("string"==typeof t||Ve(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},lr=function(t,e){for(var r=0,n=(e=ar(e,t)).length;null!=t&&r<n;)t=t[or(e[r++])];return r&&r==n?t:void 0},hr=function(t,e){return null!=t&&e in Object(t)},ur=function(t,e){return null!=t&&function(t,e,r){for(var n=-1,i=(e=ar(e,t)).length,s=!1;++n<i;){var a=or(e[n]);if(!(s=null!=t&&r(t,a)))break;t=t[a]}return s||++n!=i?s:!!(i=null==t?0:t.length)&&re(i)&&ee(a,i)&&(zt(t)||qt(t))}(t,e,hr)},cr=function(t,e){return qe(t)&&je(e)?Xe(or(t),e):function(r){var n=function(t,e,r){var n=null==t?void 0:lr(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?ur(r,t):He(e,n,3)}},dr=function(t){return qe(t)?(e=or(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return lr(e,t)}}(t);var e},fr=function(t){return"function"==typeof t?t:null==t?T:"object"==typeof t?zt(t)?cr(t[0],t[1]):We(t):dr(t)};var pr=/\s/;var mr=/^\s+/;const gr=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&pr.test(t.charAt(e)););return e}(t)+1).replace(mr,""):t};var _r=/^[-+]0x[0-9a-f]+$/i,vr=/^0b[01]+$/i,yr=/^0o[0-7]+$/i,xr=parseInt;const br=function(t){return t?Infinity===(t=function(t){if("number"==typeof t)return t;if(Ve(t))return NaN;if(B(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=B(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=gr(t);var r=vr.test(t);return r||yr.test(t)?xr(t.slice(2),r?2:8):_r.test(t)?NaN:+t}(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var wr=Math.max;const Tr=(Er=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:function(t){var e=br(t),r=e%1;return e==e?r?e-r:e:0}(r);return i<0&&(i=wr(n+i,0)),at(t,fr(e),i)},function(t,e,r){var n=Object(t);if(!_e(t)){var i=fr(e);t=ve(t),e=function(t){return i(n[t],t,n)}}var s=Er(t,e,r);return s>-1?n[i?t[s]:s]:void 0});var Er;const Sr=function(t,e,r){"__proto__"==e&&Q?Q(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Ar=function(t,e,r){(void 0!==r&&!pt(t[e],r)||void 0===r&&!(e in t))&&Sr(t,e,r)},Cr=function(t,e,r){for(var n=-1,i=Object(t),s=r(t),a=s.length;a--;){var o=s[++n];if(!1===e(i[o],o,i))break}return t};var Rr="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pr=Rr&&"object"==typeof module&&module&&!module.nodeType&&module,Ir=Pr&&Pr.exports===Rr?R.Buffer:void 0,Mr=Ir?Ir.allocUnsafe:void 0;const kr=function(t,e){var r=e?function(t){var e=new t.constructor(t.byteLength);return new Nt(e).set(new Nt(t)),e}(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Dr=Object.create;const Or=function(){function t(){}return function(e){if(!B(e))return{};if(Dr)return Dr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Nr=pe(Object.getPrototypeOf,Object),Fr=function(t){return Xt(t)&&_e(t)};var Br=Function.prototype,Lr=Object.prototype,Ur=Br.toString,zr=Lr.hasOwnProperty,Gr=Ur.call(Object);const Hr=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var jr=Object.prototype.hasOwnProperty;const Xr=function(t,e,r){var n=t[e];jr.call(t,e)&&pt(n,r)&&(void 0!==r||e in t)||Sr(t,e,r)};var Wr=Object.prototype.hasOwnProperty;const Vr=function(t){if(!B(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=fe(t),r=[];for(var n in t)("constructor"!=n||!e&&Wr.call(t,n))&&r.push(n);return r},Yr=function(t){return _e(t)?ce(t,!0):Vr(t)},$r=function(t){return function(t,e,r,n){var i=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(r[o],t[o],o,r,t):void 0;void 0===l&&(l=t[o]),i?Sr(r,o,l):Xr(r,o,l)}return r}(t,Yr(t))},qr=function(t,e,r,n,i,s,a){var o=Hr(t,r),l=Hr(e,r),h=a.get(l);if(h)Ar(t,r,h);else{var u=s?s(o,l,r+"",t,e,a):void 0,c=void 0===u;if(c){var d=zt(l),f=!d&&Jt(l),p=!d&&!f&&he(l);u=l,d||f||p?zt(o)?u=o:Fr(o)?u=ct(o):f?(c=!1,u=function(t,e){if(e)return t.slice();var r=t.length,n=Mr?Mr(r):new t.constructor(r);return t.copy(n),n}(l,!0)):p?(c=!1,u=kr(l,!0)):u=[]:function(t){if(!Xt(t)||"[object Object]"!=F(t))return!1;var e=Nr(t);if(null===e)return!0;var r=zr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ur.call(r)==Gr}(l)||qt(l)?(u=o,qt(o)?u=$r(o):B(o)&&!L(o)||(u=function(t){return"function"!=typeof t.constructor||fe(t)?{}:Or(Nr(t))}(l))):c=!1}c&&(a.set(l,u),i(u,l,n,s,a),a.delete(l)),Ar(t,r,u)}},Kr=function t(e,r,n,i,s){e!==r&&Cr(r,(function(a,o){if(s||(s=new Pt),B(a))qr(e,r,o,n,t,i,s);else{var l=i?i(Hr(e,o),a,o+"",e,r,s):void 0;void 0===l&&(l=a),Ar(e,o,l)}}),Yr)},Qr=function(t,e,r){if(!B(r))return!1;var n=typeof e;return!!("number"==n?_e(r)&&ee(e,r.length):"string"==n&&e in r)&&pt(r[e],t)},Zr=(Jr=function(t,e,r){Kr(t,e,r)},it((function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:void 0,s=n>2?e[2]:void 0;for(i=Jr.length>3&&"function"==typeof i?(n--,i):void 0,s&&Qr(e[0],e[1],s)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var a=e[r];a&&Jr(t,a,r)}return t})));var Jr,tn,en,rn;!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Right=2]="Right",t[t.Left=3]="Left"}(tn||(tn={})),function(t){t.Pure="pure",t.Phisical="physical",t.Magic="magic",t.Fire="fire"}(en||(en={})),function(t){t.Review="revive",t.Heal="heal",t.Dmg="dmg",t.SpawnUnit="spawn-unit",t.Armor="armor",t.Dot="dot"}(rn||(rn={}));class nn{context;constructor(t){this.context=t}applyEffect(t,e){const r=t.filter((t=>t.type===rn.Dmg));r.length&&this.context.unit.dmg(e,r),Tr(t,{type:rn.Review})&&(e.hp=e.maxHp),Tr(t,{type:rn.SpawnUnit})&&this.spawnUnit(e);const n=t.filter((t=>t.type===rn.Dot));e.effects.push(...n.map((t=>({...t,state:{intervalState:t.interval,remainingPeriod:t.period}}))));const i=Tr(t,{type:rn.Heal});i&&(e.hp=Math.min(e.hp+i.power,e.maxHp))}spawnUnit(t){const e=(()=>{const t=Math.random();return t<.1?"necromancer":t<.2?"priest":t<.3?"steam_dragon":t<.5?"archer":"skeleton"})(),r=this.context.resourceManager.getUnitConfig(e),n={location:{x:t.location.x+t.size/2,y:t.location.y+t.size+20},hp:r.maxHp,team:t.team,effects:r.effects||[],action:{state:{}}},i=Zr({},r,n);this.context.unit.addUnit(i)}}const sn=()=>{return t=Math.random()*Math.PI*2,{x:Math.cos(t),y:Math.sin(t)};var t},an=t=>0===t.x&&0===t.y,on=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),ln=t=>t.x**2+t.y**2,hn=t=>{const e=ln(t);return e>0?pn(t,Math.sqrt(e)):t},un=(t,e)=>((t,e)=>{const r=(t=>Math.sqrt(ln(t)))(t);return{x:Math.cos(e)*r,y:Math.sin(e)*r}})(t,((t,e)=>Math.atan2(t.y,t.x))(t)+e),cn=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),dn=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),fn=(t,e)=>({x:t.x*e,y:t.y*e}),pn=(t,e)=>({x:t.x/e,y:t.y/e});class mn{controlledUnit;setControlledUnit(t){this.controlledUnit=t,this.controlledUnit.moveDirection=void 0}setMoveDirection(t){this.controlledUnit.moveDirection=t?hn(t):void 0}}function gn(t){return cn(t.location,{x:t.size/2,y:t.size/2})}class _n{static conditions={"enemy-team":({unit:t,team:e})=>t.team!==e,"same-team":({unit:t,team:e})=>t.team===e,"in-distance":({unit:t,targetLocation:e},{distance:r})=>on(gn(t),e)<=t.size/2+r,alive:({unit:t})=>t.hp>0,dead:({unit:t})=>t.hp<=0,damaged:({unit:t})=>t.hp<t.maxHp};static filterBySeekConditions(t,e,r){return e.reduce(((t,e)=>{const n="string"==typeof e?this.conditions[e]:this.conditions[e[0]];return t.filter((t=>n({unit:t,...r},e[1])))}),t)}}class vn{context;constructor(t){this.context=t}projectiles=[];addProjectile(t){this.projectiles.push(t)}landProjectile(t){_n.filterBySeekConditions(this.context.unit.units,["enemy-team","alive",["in-distance",{distance:t.area}]],{team:t.source.team,targetLocation:t.targetLocation}).forEach((e=>this.context.effect.applyEffect(t.effect,e)))}}class yn{context;constructor(t){this.context=t}spells={heal:{seekConditions:["same-team","alive","damaged",["in-distance",{distance:200}]],effects:[{type:rn.Heal,power:100}]},fireball:{seekConditions:["enemy-team","alive",["in-distance",{distance:100}]],effects:[{type:rn.Dmg,dmgType:en.Pure,power:100}]}};getTargetUnits(t,e){const r=this.spells[t],n=this.getSpellContext();return _n.filterBySeekConditions(this.context.unit.units,r.seekConditions,{targetLocation:e,...n})}castSpell(t,e){const r=this.spells[t],n=this.getSpellContext();_n.filterBySeekConditions(this.context.unit.units,r.seekConditions,{targetLocation:e,...n}).forEach((t=>this.context.effect.applyEffect(r.effects,t)))}getSpellRange(t){return this.spells[t].seekConditions.find((t=>"in-distance"===t[0]))[1].distance}getSpellContext(){return{team:1}}}const xn=function(t,e){return!(null==t||!t.length)&&lt(t,e,0)>-1},bn=function(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1},wn=it((function(t,e){return Fr(t)?function(t,e,r,n){var i=-1,s=xn,a=!0,o=t.length,l=[],h=e.length;if(!o)return l;r&&(e=st(e,ut(r))),n?(s=bn,a=!1):e.length>=200&&(s=Dt,a=!1,e=new Mt(e));t:for(;++i<o;){var u=t[i],c=null==r?u:r(u);if(u=n||0!==u?u:0,a&&c==c){for(var d=h;d--;)if(e[d]===c)continue t;l.push(u)}else s(e,c,n)||l.push(u)}return l}(t,e):[]}));var Tn=Math.floor,En=Math.random;var Sn=parseFloat,An=Math.min,Cn=Math.random;const Rn=function(t,e,r){if(r&&"boolean"!=typeof r&&Qr(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=br(t),void 0===e?(e=t,t=0):e=br(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=Cn();return An(t+i*(e-t+Sn("1e-"+((i+"").length-1))),e)}return function(t,e){return t+Tn(En()*(e-t+1))}(t,e)},Pn=function(t,e,r,n){for(var i=-1,s=null==t?0:t.length;++i<s;){var a=t[i];e(n,a,r(a),t)}return n},In=function(t,e){if(null==t)return t;if(!_e(t))return function(t,e){return t&&Cr(t,e,ve)}(t,e);for(var r=t.length,n=-1,i=Object(t);++n<r&&!1!==e(i[n],n,i););return t},Mn=function(t,e,r,n){return In(t,(function(t,i,s){e(n,t,r(t),s)})),n};var kn=Object.prototype.hasOwnProperty;const Dn=(On=function(t,e,r){kn.call(t,r)?t[r].push(e):Sr(t,r,[e])},function(t,e){var r=zt(t)?Pn:Mn,n=Nn?Nn():{};return r(t,On,fr(e),n)});var On,Nn;const Fn=function(t,e){var r=-1,n=_e(t)?Array(t.length):[];return In(t,(function(t,i,s){n[++r]=e(t,i,s)})),n},Bn=function(t,e){return(zt(t)?st:Fn)(t,fr(e))},Ln=function(t,e){for(var r,n=-1,i=t.length;++n<i;){var s=e(t[n]);void 0!==s&&(r=void 0===r?s:r+s)}return r},Un=function(t,e){return t&&t.length?Ln(t,fr(e)):0},zn=function(t,e){return t<e},Gn=function(t,e){return t&&t.length?function(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],a=e(s);if(null!=a&&(void 0===o?a==a&&!Ve(a):r(a,o)))var o=a,l=s}return l}(t,fr(e),zn):void 0};class Hn{context;constructor(t){this.context=t}units=[];triggerDotEffects(t){const e=t.effects.filter((t=>t.type===rn.Dot));e.forEach((t=>t.state.intervalState--));const r=e.filter((t=>0===t.state.intervalState));this.dmg(t,r);const n=[];for(let t of r)1===t.state.remainingPeriod?n.push(t):(t.state.remainingPeriod--,t.state.intervalState=t.interval);n.length>0&&(t.effects=wn(t.effects,...n))}addUnit(t){this.units.push(t)}moveUnit(t){t.moveSpeed&&t.moveDirection&&(t.location=cn(t.location,fn(t.moveDirection,t.moveSpeed)))}wander(t){if(!t.moveSpeed)return;if(!t.moveDirection)return void(t.moveDirection=sn());const e=Rn(-10,10,!1)/40;t.moveDirection=un(t.moveDirection,e)}screenBoundaries(t){if(!t.moveSpeed)return;if(!t.moveDirection)return;const e=t.size,r=cn(fn(t.moveDirection,t.moveSpeed),t.location);var n;(r.x>this.context.config.mapSize[0]-e||r.x<0)&&(t.moveDirection={x:-(n=t.moveDirection).x,y:n.y}),(r.y>this.context.config.mapSize[1]-e||r.y<0)&&(t.moveDirection=(t=>({x:t.x,y:-t.y}))(t.moveDirection))}seekAndMoveToTarget(t,e){if(!t.moveSpeed)return;const r=this.seekTarget(t,e);r&&on(t.location,r.location)>=t.action.distance&&(t.moveDirection=hn(dn(r.location,t.location)))}lockTarget(t,e){if(!t.action.seekTargetCondition)return;const r=this.seekTarget(t,e);return r!==t.action.state.targetUnit?r?void(on(t.location,r.location)<=t.action.distance?(t.action.state.speed=t.action.speed,t.action.state.targetUnit=r,t.moveDirection=void 0):(t.action.state.speed=void 0,t.action.state.targetUnit=void 0)):(t.action.state.speed=void 0,void(t.action.state.targetUnit=void 0)):void 0}action(t){if(!t.action.hitEffect||t.action.state.targetUnit){if(t.action.state.cooldown>0)return--t.action.state.cooldown;if(0===t.action.state.cooldown&&delete t.action.state.cooldown,t.action.state.targetUnit){const e=t.action.state.targetUnit;if(on(t.location,e.location)>t.action.distance)return delete t.action.state.speed,void delete t.action.state.targetUnit}if(t.action.state.speed>0)return--t.action.state.speed;t.action.projectileId?this.shootProjectile(t,t.action.state.targetUnit):(t.action.hitEffect&&this.context.effect.applyEffect(t.action.hitEffect,t.action.state.targetUnit),t.action.effect&&this.context.effect.applyEffect(t.action.effect,t)),t.action.state.speed=t.action.speed,t.action.state.cooldown=t.action.cooldown,delete t.action.state.targetUnit}}separation(t,e){if(!t.moveSpeed)return;const r=this.inTouchWithOthers(t,e);let n=r.reduce(((e,r)=>cn(e,hn(dn(t.location,r.location)))),{x:0,y:0});if(r.length>0){const e=pn(n,r.length);t.moveDirection=an(e)?sn():e}}getUnitsInRange(t,e){return _n.filterBySeekConditions(this.units,["alive",["in-distance",{distance:e}]],{targetLocation:t})}dmg(t,e){const r=t.effects.filter((t=>t.type===rn.Armor)),n=Dn(e,(t=>t.dmgType)),i=Bn(n,((t,e)=>{const n=r.filter((t=>t.dmgType===e)),i=Un(n,"power"),s=Un(t,"power");return Math.max(0,s-i)})),s=(a=i)&&a.length?Ln(a,T):0;var a;s&&(t.hp=Math.max(0,t.hp-s))}seekTarget(t,e){let r=_n.filterBySeekConditions(e,t.action.seekTargetCondition,{team:t.team});return Gn(r,(e=>on(t.location,e.location)))}shootProjectile(t,e){const r=t.action,n=gn(e),i=gn(t),s=Math.ceil(on(i,n)/r.projectileSpeed),a={area:1,effect:r.hitEffect,projectileId:r.projectileId,source:t,sourceLocation:i,speed:r.projectileSpeed,targetLocation:n,time:s,timeState:s};this.context.map.addProjectile(a)}inTouchWithOthers(t,e){return e.filter((e=>e!==t&&on(gn(t),gn(e))<e.size/2+t.size/2))}}class jn{context;constructor(t,e){this.context={},Object.assign(this.context,{config:t,unit:new Hn(this.context),map:new vn(this.context),manuallyControlledUnit:new mn,effect:new nn(this.context),spells:new yn(this.context),resourceManager:e})}init(t){t.units.forEach((t=>this.context.unit.addUnit(t)))}tick(){const t=this.context.manuallyControlledUnit.controlledUnit;t&&this.context.unit.moveUnit(t);const e=this.context.unit.units.filter((t=>t.hp>0));for(let r of e)r!==t&&(r.moveDirection=void 0,this.context.unit.seekAndMoveToTarget(r,this.context.unit.units),this.context.unit.lockTarget(r,this.context.unit.units),this.context.unit.action(r),this.context.unit.separation(r,e),this.context.unit.screenBoundaries(r),this.context.unit.moveUnit(r),this.context.unit.triggerDotEffects(r));for(let t of this.context.map.projectiles)t.timeState-=1,t.timeState<0&&(this.context.map.landProjectile(t),ft(this.context.map.projectiles,t))}selectUnit(t){this.context.manuallyControlledUnit.setControlledUnit(t)}controlManuallyControlledUnit(t){this.context.manuallyControlledUnit.setMoveDirection(t)}getState(){return{units:this.context.unit.units,projectiles:this.context.map.projectiles}}get isFinished(){return this.context.unit.units.filter((t=>t.hp>0)).every(((t,e,r)=>t.team===r[0].team))}get spellsContext(){return this.context.spells}}var Xn=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Xn||{}),Wn=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(Wn||{}),Vn=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Vn||{}),Yn=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Yn||{}),$n=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))($n||{}),qn=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(qn||{}),Kn=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Kn||{}),Qn=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Qn||{}),Zn=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Zn||{}),Jn=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Jn||{}),ti=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(ti||{}),ei=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ei||{}),ri=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(ri||{}),ni=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(ni||{}),ii=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(ii||{}),si=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(si||{}),ai=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(ai||{}),oi=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(oi||{}),li=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(li||{}),hi=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(hi||{});const ui={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e)};var ci=/iPhone/i,di=/iPod/i,fi=/iPad/i,pi=/\biOS-universal(?:.+)Mac\b/i,mi=/\bAndroid(?:.+)Mobile\b/i,gi=/Android/i,_i=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,vi=/Silk/i,yi=/Windows Phone/i,xi=/\bWindows(?:.+)ARM\b/i,bi=/BlackBerry/i,wi=/BB10/i,Ti=/Opera Mini/i,Ei=/\b(CriOS|Chrome)(?:.+)Mobile/i,Si=/Mobile(?:.+)Firefox\b/i,Ai=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};const Ci=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(t){return function(e){return e.test(t)}}(r),s={apple:{phone:i(ci)&&!i(yi),ipod:i(di),tablet:!i(ci)&&(i(fi)||Ai(e))&&!i(yi),universal:i(pi),device:(i(ci)||i(di)||i(fi)||i(pi)||Ai(e))&&!i(yi)},amazon:{phone:i(_i),tablet:!i(_i)&&i(vi),device:i(_i)||i(vi)},android:{phone:!i(yi)&&i(_i)||!i(yi)&&i(mi),tablet:!i(yi)&&!i(_i)&&!i(mi)&&(i(vi)||i(gi)),device:!i(yi)&&(i(_i)||i(vi)||i(mi)||i(gi))||i(/\bokhttp\b/i)},windows:{phone:i(yi),tablet:i(xi),device:i(yi)||i(xi)},other:{blackberry:i(bi),blackberry10:i(wi),opera:i(Ti),firefox:i(Si),chrome:i(Ei),device:i(bi)||i(wi)||i(Ti)||i(Si)||i(Ei)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator),Ri={ADAPTER:ui,MIPMAP_TEXTURES:ei.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:li.NONE,SPRITE_MAX_TEXTURES:function(t){let e=!0;if(Ci.tablet||Ci.phone){if(Ci.apple.device){const t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);t&&parseInt(t[1],10)<11&&(e=!1)}if(Ci.android.device){const t=navigator.userAgent.match(/Android\s([0-9.]*)/);t&&parseInt(t[1],10)<7&&(e=!1)}}return e?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:ii.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:ti.CLAMP,SCALE_MODE:Jn.LINEAR,PRECISION_VERTEX:si.HIGH,PRECISION_FRAGMENT:Ci.apple.device?si.HIGH:si.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Ci.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};Ri.PREFER_ENV=Xn.WEBGL2,Ri.STRICT_TEXTURE_CACHE=!1;var Pi=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Pi||{});const Ii=t=>{if(("function"==typeof t||"object"==typeof t&&t.extension)&&(t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}),"object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},Mi={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Ii).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(...t){return t.map(Ii).forEach((t=>{t.type.forEach((e=>{const r=this._addHandlers,n=this._queue;r[e]?r[e](t):(n[e]=n[e]||[],n[e].push(t))}))})),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t].forEach((t=>e(t))),delete s[t]),this},handleByMap(t,e){return this.handle(t,(t=>{e[t.name]=t.ref}),(t=>{delete e[t.name]}))},handleByList(t,e){return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>(e.priority??-1)-(t.priority??-1))))}),(t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)}))}},ki=2*Math.PI,Di=180/Math.PI,Oi=Math.PI/180;var Ni=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Ni||{});class Fi{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Fi(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}const Bi=[new Fi,new Fi,new Fi,new Fi];class Li{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=Ni.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Li(0,0,0,0)}clone(){return new Li(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}const r=this.left,n=this.right,i=this.top,s=this.bottom;if(n<=r||s<=i)return!1;const a=Bi[0].set(t.left,t.top),o=Bi[1].set(t.left,t.bottom),l=Bi[2].set(t.right,t.top),h=Bi[3].set(t.right,t.bottom);if(l.x<=a.x||o.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(0===u)return!1;if(e.apply(a,a),e.apply(o,o),e.apply(l,l),e.apply(h,h),Math.max(a.x,o.x,l.x,h.x)<=r||Math.min(a.x,o.x,l.x,h.x)>=n||Math.max(a.y,o.y,l.y,h.y)<=i||Math.min(a.y,o.y,l.y,h.y)>=s)return!1;const c=u*(o.y-a.y),d=u*(a.x-o.x),f=c*r+d*i,p=c*n+d*i,m=c*r+d*s,g=c*n+d*s;if(Math.max(f,p,m,g)<=c*a.x+d*a.y||Math.min(f,p,m,g)>=c*h.x+d*h.y)return!1;const _=u*(a.y-l.y),v=u*(l.x-a.x),y=_*r+v*i,x=_*n+v*i,b=_*r+v*s,w=_*n+v*s;return!(Math.max(y,x,b,w)<=_*a.x+v*a.y||Math.min(y,x,b,w)>=_*h.x+v*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}}class Ui{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=Ni.CIRC}clone(){return new Ui(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}getBounds(){return new Li(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}class zi{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=Ni.ELIP}clone(){return new zi(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new Li(this.x-this.width,this.y-this.height,this.width,this.height)}}class Gi{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r].x,e[r].y);e=t}this.points=e,this.type=Ni.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Gi(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],a=this.points[2*i+1],o=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(o-n)+n&&(r=!r)}return r}}class Hi{constructor(t=0,e=0,r=0,n=0,i=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=Ni.RREC}clone(){return new Hi(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const s=r*r;if(n*n+i*i<=s)return!0;if(n=t-(this.x+this.width-r),n*n+i*i<=s)return!0;if(i=e-(this.y+this.height-r),n*n+i*i<=s)return!0;if(n=t-(this.x+r),n*n+i*i<=s)return!0}return!1}}class ji{constructor(t,e,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new ji(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}class Xi{constructor(t=1,e=0,r=0,n=1,i=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,s){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new Fi;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Fi;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,s=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}setTransform(t,e,r,n,i,s,a,o,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-o)*s,this.d=Math.cos(a-o)*s,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,i=this.d,s=t.pivot,a=-Math.atan2(-n,i),o=Math.atan2(r,e),l=Math.abs(a+o);return l<1e-5||Math.abs(ki-l)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(s.x*e+s.y*n),t.position.y=this.ty+(s.x*r+s.y*i),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,s=t*n-e*r;return this.a=n/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(t*this.ty-e*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Xi;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Xi}static get TEMP_MATRIX(){return new Xi}}const Wi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Vi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Yi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$i=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qi=[],Ki=[],Qi=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];qi.push(e);for(let r=0;r<16;r++){const n=Qi(Wi[t]*Wi[r]+Yi[t]*Vi[r]),i=Qi(Vi[t]*Wi[r]+$i[t]*Vi[r]),s=Qi(Wi[t]*Yi[r]+Yi[t]*$i[r]),a=Qi(Vi[t]*Yi[r]+$i[t]*$i[r]);for(let t=0;t<16;t++)if(Wi[t]===n&&Vi[t]===i&&Yi[t]===s&&$i[t]===a){e.push(t);break}}}for(let t=0;t<16;t++){const e=new Xi;e.set(Wi[t],Vi[t],Yi[t],$i[t],0,0),Ki.push(e)}}();const Zi={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Wi[t],uY:t=>Vi[t],vX:t=>Yi[t],vY:t=>$i[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>qi[t][e],sub:(t,e)=>qi[t][Zi.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?Zi.S:Zi.N:2*Math.abs(e)<=Math.abs(t)?t>0?Zi.E:Zi.W:e>0?t>0?Zi.SE:Zi.SW:t>0?Zi.NE:Zi.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=Ki[Zi.inv(e)];i.tx=r,i.ty=n,t.append(i)}},Ji=class{constructor(){this.worldTransform=new Xi,this.localTransform=new Xi,this.position=new ji(this.onChange,this,0,0),this.scale=new ji(this.onChange,this,1,1),this.pivot=new ji(this.onChange,this,0,0),this.skew=new ji(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let ts=Ji;ts.IDENTITY=new Ji;class es{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,n,i,s,a,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,c=h.length;u<c;u++)h[u][l](t,e,r,n,i,s,a,o);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(es.prototype,{dispatch:{value:es.prototype.emit},run:{value:es.prototype.emit}}),Ri.TARGET_FPMS=.06;var rs=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(rs||{});class ns{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}class is{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ns(null,null,1/0),this.deltaMS=1/Ri.TARGET_FPMS,this.elapsedMS=1/Ri.TARGET_FPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=rs.NORMAL){return this._addListener(new ns(t,e,r))}addOnce(t,e,r=rs.NORMAL){return this._addListener(new ns(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ri.TARGET_FPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Ri.TARGET_FPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!is._shared){const t=is._shared=new is;t.autoStart=!0,t._protected=!0}return is._shared}static get system(){if(!is._system){const t=is._system=new is;t.autoStart=!0,t._protected=!0}return is._system}}class ss{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,rs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?is.shared:new is,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}ss.extension=Pi.Application,Mi.add(ss);var as=r(161),os=r(502),ls=r(883);const hs={parse:ls.Qc,format:ls.WU,resolve:ls.DB};function us(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function cs(t){return t.split("?")[0].split("#")[0]}const ds={toPosix:t=>t.replace(new RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){us(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const n=cs(this.toPosix(e??Ri.ADAPTER.getBaseUrl())),i=cs(this.toPosix(r??this.rootname(n)));return us(t),(t=this.toPosix(t)).startsWith("/")?ds.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(us(t=this.toPosix(t)),0===t.length)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return(t=function(t,e){let r,n="",i=0,s=-1,a=0;for(let e=0;e<=t.length;++e){if(e<t.length)r=t.charCodeAt(e);else{if(47===r)break;r=47}if(47===r){if(s===e-1||1===a);else if(s!==e-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const t=n.lastIndexOf("/");if(t!==n.length-1){-1===t?(n="",i=0):(n=n.slice(0,t),i=n.length-1-n.lastIndexOf("/")),s=e,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,s=e,a=0;continue}}else n.length>0?n+=`/${t.slice(s+1,e)}`:n=t.slice(s+1,e),i=e-s-1;s=e,a=0}else 46===r&&-1!==a?++a:a=-1}return n}(t)).length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return us(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(us(n),n.length>0)if(void 0===e)e=n;else{const i=t[r-1]??"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return void 0===e?".":this.normalize(e)},dirname(t){if(us(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const r=47===e;let n=-1,i=!0;const s=this.getProtocol(t),a=t;for(let r=(t=t.slice(s.length)).length-1;r>=1;--r)if(e=t.charCodeAt(r),47===e){if(!i){n=r;break}}else i=!1;return-1===n?r?"/":this.isUrl(a)?s+t:s:r&&1===n?"//":s+t.slice(0,n)},rootname(t){us(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);e=-1!==r?t.slice(0,r):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){us(t),e&&us(e),t=this.toPosix(t);let r,n=0,i=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(r=t.length-1;r>=0;--r){const l=t.charCodeAt(r);if(47===l){if(!s){n=r+1;break}}else-1===o&&(s=!1,o=r+1),a>=0&&(l===e.charCodeAt(a)?-1==--a&&(i=r):(a=-1,i=o))}return n===i?i=o:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){n=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":t.slice(n,i)},extname(t){us(t);let e=-1,r=0,n=-1,i=!0,s=0;for(let a=(t=this.toPosix(t)).length-1;a>=0;--a){const o=t.charCodeAt(a);if(47!==o)-1===n&&(i=!1,n=a+1),46===o?-1===e?e=a:1!==s&&(s=1):-1!==e&&(s=-1);else if(!i){r=a+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){us(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let r=(t=this.toPosix(t)).charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),i=n||this.hasProtocol(t)?1:0;let s=-1,a=0,o=-1,l=!0,h=t.length-1,u=0;for(;h>=i;--h)if(r=t.charCodeAt(h),47!==r)-1===o&&(l=!1,o=h+1),46===r?-1===s?s=h:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=h+1;break}return-1===s||-1===o||0===u||1===u&&s===o-1&&s===a+1?-1!==o&&(e.base=e.name=0===a&&n?t.slice(1,o):t.slice(a,o)):(0===a&&n?(e.name=t.slice(1,s),e.base=t.slice(1,o)):(e.name=t.slice(a,s),e.base=t.slice(a,o)),e.ext=t.slice(s,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};function fs(){}function ps(){}let ms;function gs(){return void 0===ms&&(ms=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:Ri.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Ri.ADAPTER.getWebGLRenderingContext())return!1;const e=Ri.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const n=!(!r||!r.getContextAttributes().stencil);if(r){const t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,n}catch(t){return!1}}()),ms}Ri.RETINA_PREFIX=/@([0-9\.]+)x/,Ri.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var _s={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function vs(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function ys(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function xs(t){if("string"==typeof t&&("#"===(t=_s[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,r,n]=t;t=e+e+r+r+n+n}return parseInt(t,16)}function bs(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}const ws=function(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[Yn.NORMAL_NPM]=Yn.NORMAL,t[Yn.ADD_NPM]=Yn.ADD,t[Yn.SCREEN_NPM]=Yn.SCREEN,e[Yn.NORMAL]=Yn.NORMAL_NPM,e[Yn.ADD]=Yn.ADD_NPM,e[Yn.SCREEN]=Yn.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}();function Ts(t,e){return ws[e?1:0][t]}function Es(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Ss(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let r=t>>16&255,n=t>>8&255,i=255&t;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(255*e<<24)+(r<<16)+(n<<8)+i}function As(t,e,r,n){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Cs(t,e=null){const r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let t=0,n=0;t<r;t+=6,n+=4)e[t+0]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3;return e}function Rs(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}const Ps={Float32Array,Uint32Array,Int32Array,Uint8Array};function Is(t,e){let r=0,n=0;const i={};for(let i=0;i<t.length;i++)n+=e[i],r+=t[i].length;const s=new ArrayBuffer(4*r);let a=null,o=0;for(let r=0;r<t.length;r++){const l=e[r],h=t[r],u=Rs(h);i[u]||(i[u]=new Ps[u](s)),a=i[u];for(let t=0;t<h.length;t++)a[(t/l|0)*n+o+t%l]=h[t];o+=l}return new Float32Array(s)}function Ms(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function ks(t){return!(t&t-1||!t)}function Ds(t){let e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,r=((t>>>=r)>15?1:0)<<2,e|=r,r=((t>>>=r)>3?1:0)<<1,e|=r,e|(t>>>=r)>>1}function Os(t,e,r){const n=t.length;let i;if(e>=n||0===r)return;const s=n-(r=e+r>n?n-e:r);for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function Ns(t){return 0===t?0:t<0?-1:1}let Fs=0;function Bs(){return++Fs}const Ls={};function Us(t,e,r=3){if(Ls[e])return;let n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(n))),Ls[e]=!0}const zs={},Gs=Object.create(null),Hs=Object.create(null);function js(){let t;for(t in Gs)Gs[t].destroy();for(t in Hs)Hs[t].destroy()}function Xs(){let t;for(t in Gs)delete Gs[t];for(t in Hs)delete Hs[t]}class Ws{constructor(t,e,r){this.canvas=Ri.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||Ri.RESOLUTION,this.resize(t,e)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(t){this.canvas.width=Math.round(t)}get height(){return this.canvas.height}set height(t){this.canvas.height=Math.round(t)}}function Vs(t){let e=t.width,r=t.height;const n=t.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,e,r).data,s=i.length,a={top:null,left:null,right:null,bottom:null};let o,l,h,u=null;for(o=0;o<s;o+=4)0!==i[o+3]&&(l=o/4%e,h=~~(o/4/e),null===a.top&&(a.top=h),(null===a.left||l<a.left)&&(a.left=l),(null===a.right||a.right<l)&&(a.right=l+1),(null===a.bottom||a.bottom<h)&&(a.bottom=h));return null!==a.top&&(e=a.right-a.left,r=a.bottom-a.top+1,u=n.getImageData(a.left,a.top,e,r)),{height:r,width:e,data:u}}const Ys=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function $s(t){const e=Ys.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}let qs;function Ks(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,qs||(qs=document.createElement("a")),qs.href=t;const r=hs.parse(qs.href),n=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&n&&r.protocol===e.protocol?"":"anonymous"}function Qs(t,e=1){const r=Ri.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e}const Zs=[];function Js(t,e){if(!t)return null;let r="";if("string"==typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(r=e[1].toLowerCase())}for(let n=Zs.length-1;n>=0;--n){const i=Zs[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class ta{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new es("setRealSize"),this.onUpdate=new es("update"),this.onError=new es("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class ea extends ta{constructor(t,e){const{width:r,height:n}=e||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ri.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const ra={scaleMode:Jn.NEAREST,format:qn.RGBA,alphaMode:ri.NPM},na=class extends as{constructor(t=null,e=null){super(),e=e||{};const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:a,height:o,wrapMode:l,format:h,type:u,target:c,resolution:d,resourceOptions:f}=e;!t||t instanceof ta||((t=Js(t,f)).internal=!0),this.resolution=d||Ri.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((o||0)*this.resolution)/this.resolution,this._mipmap=n??Ri.MIPMAP_TEXTURES,this.anisotropicLevel=i??Ri.ANISOTROPIC_LEVEL,this._wrapMode=l||Ri.WRAP_MODE,this._scaleMode=s??Ri.SCALE_MODE,this.format=h||qn.RGBA,this.type=u||Qn.UNSIGNED_BYTE,this.target=c||Kn.TEXTURE_2D,this.alphaMode=r??ri.UNPACK,this.uid=Bs(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&o>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=ks(this.realWidth)&&ks(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Hs[this.cacheId],delete Gs[this.cacheId],this.cacheId=null),this.dispose(),na.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=Ri.STRICT_TEXTURE_CACHE){const n="string"==typeof t;let i=null;if(n)i=t;else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${Bs()}`}i=t._pixiId}let s=Hs[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new na(t,e),s.cacheId=i,na.addToCache(s,i)),s}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const i=new ea(t,{width:e,height:r}),s=t instanceof Float32Array?Qn.FLOAT:Qn.UNSIGNED_BYTE;return new na(i,Object.assign({},ra,n||{width:e,height:r,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Hs[e]&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Hs[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Hs[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Hs[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Hs[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let ia=na;ia._globalBatch=0;class sa extends ta{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let e=0;e<t;e++){const t=new ia;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof ta?this.addResourceAt(t[r],r):this.addResourceAt(Js(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map((t=>t.resource)).filter((t=>t)).map((t=>t.load()));return this._load=Promise.all(t).then((()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)})),this._load}}class aa extends sa{constructor(t,e){const{width:r,height:n}=e||{};let i,s;Array.isArray(t)?(i=t,s=t.length):s=t,super(s,{width:r,height:n}),i&&this.initFromArray(i,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=Kn.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:n,itemDirtyIds:i,items:s}=this,{gl:a}=t;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,e.format,r.type,null);for(let t=0;t<n;t++){const n=s[t];i[t]<n.dirtyId&&(i[t]=n.dirtyId,n.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,t,n.resource.width,n.resource.height,1,e.format,r.type,n.resource.source))}return!0}}class oa extends ta{constructor(t){const e=t;super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous"):t.crossOrigin=Ks(e)}upload(t,e,r,n){const i=t.gl,s=e.realWidth,a=e.realHeight;if(n=n||this.source,"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement&&n.readyState<=1&&0===n.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ri.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||r.width!==s||r.height!==a?(r.width=s,r.height=a,i.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,r.type,n),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}class la extends oa{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const ha=class extends sa{constructor(t,e){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==ha.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let t=0;t<ha.SIDES;t++)this.items[t].target=Kn.TEXTURE_CUBE_MAP_POSITIVE_X+t;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==i&&this.load()}bind(t){super.bind(t),t.target=Kn.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Kn.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let i=0;i<ha.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[i]=s.dirtyId):n[i]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ha.SIDES}};let ua=ha;ua.SIDES=6;class ca extends oa{constructor(t,e){if(e=e||{},"string"==typeof t){const r=new Image;oa.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Ri.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(((t,e)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=t=>{e(t),this.onError.emit(t)})}))),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((t=>t.blob())).then((r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===ri.UNPACK?"premultiply":"none"}))).then((t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let t=!0;const n=e._glTextures;for(const i in n){const s=n[i];if(s!==r&&s.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!=typeof HTMLImageElement&&("string"==typeof t||t instanceof HTMLImageElement)}}const da=class extends oa{constructor(t,e){e=e||{},super(Ri.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},da.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const t=new Image;oa.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,i=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Bs()}`,s.getContext("2d").drawImage(t,0,0,e,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const e=da.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&da.SVG_XML.test(t)}};let fa=da;fa.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,fa.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const pa=class extends oa{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]);const n=t[0].src||t[0];oa.crossOrigin(r,n,e.crossorigin);for(let e=0;e<t.length;++e){const n=document.createElement("source");let{src:i,mime:s}=t[e];i=i||t[e];const a=i.split("?").shift().toLowerCase(),o=a.slice(a.lastIndexOf(".")+1);s=s||pa.MIME_TYPES[o]||`video/${o}`,n.src=i,n.type=s,r.appendChild(n)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=is.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e=>{this.valid?e(this):(this._resolve=e,t.load())})),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(is.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(is.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(is.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(is.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(is.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||pa.TYPES.includes(e)}};let ma=pa;ma.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ma.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class ga extends oa{constructor(t,e){var r=(...t)=>{super(...t)};e=e||{},"string"==typeof t?(r(ga.EMPTY),this.url=t):(r(t),this.url=null),this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(t,e)=>{if(null!==this.url)try{const e=await Ri.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await e.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===ri.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(t){if(this.destroyed)return;e(t),this.onError.emit(t)}else t(this)}))),this._load}upload(t,e,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof t||t instanceof ImageBitmap)}static get EMPTY(){return ga._EMPTY=ga._EMPTY??Ri.ADAPTER.createCanvas(0,0),ga._EMPTY}}Zs.push(ga,ca,la,ma,fa,ea,ua,aa);class _a extends ea{upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ri.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}}class va{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new es("disposeFramebuffer"),this.multisample=li.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new ia(null,{scaleMode:Jn.NEAREST,resolution:1,mipmap:ei.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new ia(new _a(null,{width:this.width,height:this.height}),{scaleMode:Jn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ei.OFF,format:qn.DEPTH_COMPONENT,type:Qn.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class ya extends ia{constructor(t={}){"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=li.NONE),super(null,t),this.mipmap=ei.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new va(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class xa{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,i=e.height;if(r){const e=t.width/2/n,s=t.height/2/i,a=t.x/n+e,o=t.y/i+s;r=Zi.add(r,Zi.NW),this.x0=a+e*Zi.uX(r),this.y0=o+s*Zi.uY(r),r=Zi.add(r,2),this.x1=a+e*Zi.uX(r),this.y1=o+s*Zi.uY(r),r=Zi.add(r,2),this.x2=a+e*Zi.uX(r),this.y2=o+s*Zi.uY(r),r=Zi.add(r,2),this.x3=a+e*Zi.uX(r),this.y3=o+s*Zi.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}const ba=new xa;function wa(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class Ta extends as{constructor(t,e,r,n,i,s){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Li(0,0,1,1)),t instanceof Ta&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=ba,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new Fi(s.x,s.y):new Fi(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&Gs[t.url]&&Ta.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Ta.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new Ta(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===ba&&(this._uvs=new xa),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=Ri.STRICT_TEXTURE_CACHE){const n="string"==typeof t;let i=null;if(n)i=t;else if(t instanceof ia){if(!t.cacheId){const r=e?.pixiIdPrefix||"pixiid";t.cacheId=`${r}-${Bs()}`,ia.addToCache(t,t.cacheId)}i=t.cacheId}else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${Bs()}`}i=t._pixiId}let s=Gs[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return s||t instanceof ia?!s&&t instanceof ia&&(s=new Ta(t),Ta.addToCache(s,i)):(e.resolution||(e.resolution=Qs(t)),s=new Ta(new ia(t,e)),s.baseTexture.cacheId=i,ia.addToCache(s.baseTexture,i),Ta.addToCache(s,i)),s}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e?.resourceOptions),n=Ta.from(t,Object.assign({resourceOptions:r},e),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then((()=>Promise.resolve(n)))}static fromBuffer(t,e,r,n){return new Ta(ia.fromBuffer(t,e,r,n))}static fromLoader(t,e,r,n){const i=new ia(t,Object.assign({scaleMode:Ri.SCALE_MODE,resolution:Qs(e)},n)),{resource:s}=i;s instanceof ca&&(s.url=e);const a=new Ta(i);return r||(r=e),ia.addToCache(a.baseTexture,r),Ta.addToCache(a,r),r!==e&&(ia.addToCache(a.baseTexture,e),Ta.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise((t=>{a.baseTexture.once("loaded",(()=>t(a)))}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Gs[e]&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Gs[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Gs[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Gs[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Gs[t.textureCacheIds[e]]===t&&delete Gs[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:n,height:i}=t,s=e+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(s||a){const t=s&&a?"and":"or",o=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${t} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Ta._EMPTY||(Ta._EMPTY=new Ta(new ia),wa(Ta._EMPTY),wa(Ta._EMPTY.baseTexture)),Ta._EMPTY}static get WHITE(){if(!Ta._WHITE){const t=Ri.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Ta._WHITE=new Ta(ia.from(t)),wa(Ta._WHITE),wa(Ta._WHITE.baseTexture)}return Ta._WHITE}}class Ea extends Ta{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const n=this.baseTexture.resolution,i=Math.round(t*n)/n,s=Math.round(e*n)/n;this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(i,s),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ea(new ya(t))}}class Sa{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=li.NONE){const n=new ya(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new Ea(n)}getOptimalTexture(t,e,r=1,n=li.NONE){let i;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(t=Ms(t)))<<16|65535&(e=Ms(e)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let s=this.texturePool[i].pop();return s||(s=this.createTexture(t,e,n)),s.filterPoolKey=i,s.setResolution(r),s}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||li.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Sa.SCREEN_KEY=-1;class Aa{constructor(t,e=0,r=!1,n=Qn.FLOAT,i,s,a){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=s,this.instance=a}destroy(){this.buffer=null}static from(t,e,r,n,i){return new Aa(t,e,r,n,i)}}let Ca=0;class Ra{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Ca++,this.disposeRunner=new es("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?hi.ELEMENT_ARRAY_BUFFER:hi.ARRAY_BUFFER}get index(){return this.type===hi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Ra(t)}}const Pa={Float32Array,Uint32Array,Int32Array,Uint8Array},Ia={5126:4,5123:2,5121:1};let Ma=0;const ka={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Da{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ma++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new es("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,n=!1,i,s,a,o=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ra||(e instanceof Array&&(e=new Float32Array(e)),e=new Ra(e));const l=t.split("|");if(l.length>1){for(let t=0;t<l.length;t++)this.addAttribute(l[t],e,r,n,i);return this}let h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Aa(h,r,n,i,s,a,o),this.instanced=this.instanced||o,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Ra||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ra(t)),t.type=hi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],r=new Ra;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];t.push(i.data),e.push(r.size*Ia[r.type]/4),r.buffer=0}for(r.data=function(t,e){let r=0,n=0;const i={};for(let i=0;i<t.length;i++)n+=e[i],r+=t[i].length;const s=new ArrayBuffer(4*r);let a=null,o=0;for(let r=0;r<t.length;r++){const l=e[r],h=t[r],u=Rs(h);i[u]||(i[u]=new Pa[u](s)),a=i[u];for(let t=0;t<h.length;t++)a[(t/l|0)*n+o+t%l]=h[t];o+=l}return new Float32Array(s)}(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Da;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Ra(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new Aa(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=hi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Da,r=[],n=[],i=[];let s;for(let e=0;e<t.length;e++){s=t[e];for(let t=0;t<s.buffers.length;t++)n[t]=n[t]||0,n[t]+=s.buffers[t].data.length,i[t]=0}for(let t=0;t<s.buffers.length;t++)r[t]=new(ka[Rs(s.buffers[t].data)])(n[t]),e.buffers[t]=new Ra(r[t]);for(let e=0;e<t.length;e++){s=t[e];for(let t=0;t<s.buffers.length;t++)r[t].set(s.buffers[t].data,i[t]),i[t]+=s.buffers[t].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.type=hi.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,a=0;for(let t=0;t<s.buffers.length;t++)if(s.buffers[t]!==s.indexBuffer){a=t;break}for(const t in s.attributes){const e=s.attributes[t];(0|e.buffer)===a&&(n+=e.size*Ia[e.type]/4)}for(let s=0;s<t.length;s++){const o=t[s].indexBuffer.data;for(let t=0;t<o.length;t++)e.indexBuffer.data[t+i]+=r;r+=t[s].buffers[a].data.length/n,i+=o.length}}return e}}class Oa extends Da{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Na extends Da{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ra(this.vertices),this.uvBuffer=new Ra(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let Fa=0;class Ba{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Fa++,this.static=!!e,this.ubo=!!r,t instanceof Ra?(this.buffer=t,this.buffer.type=hi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ra(new Float32Array(1)),this.buffer.type=hi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new Ba(e,r)}static from(t,e,r){return new Ba(t,e,r)}static uboFrom(t,e){return new Ba(t,e??!0,!0)}}class La{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=li.NONE,this.sourceFrame=new Li,this.destinationFrame=new Li,this.bindingSourceFrame=new Li,this.bindingDestinationFrame=new Li,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ua=[new Fi,new Fi,new Fi,new Fi],za=new Xi;class Ga{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Sa,this.statePool=[],this.quad=new Oa,this.quadUv=new Na,this.tempRect=new Li,this.activeState={},this.globalUniforms=new Ba({outputFrame:new Li,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new La,s=this.renderer.renderTexture;let a=e[0].resolution,o=e[0].multisample,l=e[0].padding,h=e[0].autoFit,u=e[0].legacy??!0;for(let t=1;t<e.length;t++){const r=e[t];a=Math.min(a,r.resolution),o=Math.min(o,r.multisample),l=this.useMaxPadding?Math.max(l,r.padding):l+r.padding,h=h&&r.autoFit,u=u||(r.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(i),i.resolution=a,i.multisample=o,i.legacy=u,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(l);const c=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(za.copyFrom(r.projection.transform).invert(),c),h?(i.sourceFrame.fit(c),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(c)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,a,o),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(s.sourceFrame),i.bindingDestinationFrame.copyFrom(s.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,s.bind(i.renderTexture,i.sourceFrame,d),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const i=n.inputSize,s=n.inputPixel,a=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],s[0]=Math.round(i[0]*e.resolution),s[1]=Math.round(i[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=e.sourceFrame.width*i[2]-.5*s[2],a[3]=e.sourceFrame.height*i[3]-.5*s[3],e.legacy){const t=n.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const o=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,o.renderTexture,ni.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,n=this.getOptimalFilterTexture(t.width,t.height,e.resolution);n.filterFrame=t.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&e.multisample>1&&(n=this.getOptimalFilterTexture(t.width,t.height,e.resolution),n.filterFrame=t.filterFrame),r[i].apply(this,t,n,ni.CLEAR,e);const s=t;t=n,n=s}r[i].apply(this,t,o.renderTexture,ni.BLEND,e),i>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(n)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=ni.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,r.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(e===ni.CLEAR||e===ni.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const i=this.renderer;i.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw($n.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw($n.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=e._texture,s=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(Xi.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/i.width,1/i.height),s.translate(e.anchor.x,e.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=li.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if("number"==typeof t){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||li.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=Ua[0],n=Ua[1],i=Ua[2],s=Ua[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(s,s);const a=Math.min(r.x,n.x,i.x,s.x),o=Math.min(r.y,n.y,i.y,s.y),l=Math.max(r.x,n.x,i.x,s.x),h=Math.max(r.y,n.y,i.y,s.y);e.x=a,e.y=o,e.width=l-a,e.height=h-o}roundFrame(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){const{a:t,b:e,c:r,d:n}=i;if((Math.abs(e)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4))return}(i=i?za.copyFrom(i):za.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}}}Ga.extension={type:Pi.RendererSystem,name:"filter"},Mi.add(Ga);class Ha{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}class ja{constructor(t){this.renderer=t,this.emptyRenderer=new Ha(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,r,n){const{elements:i,ids:s,count:a}=t;let o=0;for(let t=0;t<a;t++){const a=i[t],l=a._batchLocation;if(l>=0&&l<n&&e[l]===a)s[t]=l;else for(;o<n;){const n=e[o];if(!n||n._batchEnabled!==r||n._batchLocation!==o){s[t]=o,a._batchLocation=o,e[o]=a;break}o++}}}destroy(){this.renderer=null}}ja.extension={type:Pi.RendererSystem,name:"batch"},Mi.add(ja);let Xa=0;class Wa{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Xa++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha??!0;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Xa++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(Ri.PREFER_ENV>=Xn.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault()}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Wa.extension={type:Pi.RendererSystem,name:"context"},Mi.add(Wa);class Va{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=li.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Ya=new Li;class $a{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new va(10,10),this.msaaSamples=null}contextChange(){const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Li,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Ri.PREFER_ENV===Xn.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:n}=this;if(t){const i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const r=t.colorTextures[e];this.renderer.texture.unbind(r.parentTextureArray||r)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>r,n=e.height>>r,i=t/e.width;this.setViewport(e.x*i,e.y*i,t,n)}else{const e=t.width>>r,n=t.height>>r;this.setViewport(0,0,e,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,n){const i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,i=Vn.COLOR|Vn.DEPTH){const{gl:s}=this;s.clearColor(t,e,r,n),s.clear(i)}initFramebuffer(t){const{gl:e}=this,r=new Va(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let i=n.length;e.drawBuffers||(i=Math.min(i,1));for(let s=0;s<i;s++){const i=n[s],a=i.parentTextureArray||i;this.renderer.texture.bind(a,0),0===s&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let o=0;o<s;o++){const s=i[o],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===o&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,s.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(r.COLOR_ATTACHMENT0+o))}if(a.length>1&&r.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const n=t.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=li.NONE;if(t<=1||null===e)return r;for(let n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return 1===r&&(r=li.NONE),r}blit(t,e,r){const{current:n,renderer:i,gl:s,CONTEXT_UID:a}=this;if(2!==i.context.webGLVersion)return;if(!n)return;const o=n.glFramebuffers[a];if(!o)return;if(!t){if(!o.msaaBuffer)return;const e=n.colorTextures[0];if(!e)return;o.blitFramebuffer||(o.blitFramebuffer=new va(n.width,n.height),o.blitFramebuffer.addColorTexture(0,e)),(t=o.blitFramebuffer).colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||((e=Ya).width=n.width,e.height=n.height),r||(r=e);const l=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const r=t.width,n=t.height,i=this.gl,s=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,s),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=s,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Li}destroy(){this.renderer=null}}$a.extension={type:Pi.RendererSystem,name:"framebuffer"},Mi.add($a);const qa={5126:4,5123:2,5121:1};class Ka{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;Ri.PREFER_ENV===Xn.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,n,i,s)=>e.drawElementsInstancedANGLE(t,r,n,i,s),t.drawArraysInstanced=(t,r,n,i)=>e.drawArraysInstancedANGLE(t,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const s=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.update(n)}}checkCompatibility(t,e){const r=t.attributes,n=e.attributeData;for(const t in n)if(!r[t])throw new Error(`shader and geometry incompatible, geometry missing the "${t}" attribute`)}getSignature(t,e){const r=t.attributes,n=e.attributeData,i=["g",t.id];for(const t in r)n[t]&&i.push(t,n[t].location);return i.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const o=this.getSignature(t,a),l=t.glVertexArrayObjects[this.CONTEXT_UID];let h=l[o];if(h)return l[a.id]=h,h;const u=t.buffers,c=t.attributes,d={},f={};for(const t in u)d[t]=0,f[t]=0;for(const t in c)!c[t].size&&a.attributeData[t]?c[t].size=a.attributeData[t].size:c[t].size||console.warn(`PIXI Geometry attribute '${t}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[t].buffer]+=c[t].size*qa[c[t].type];for(const t in c){const e=c[t],r=e.size;void 0===e.stride&&(d[e.buffer]===r*qa[e.type]?e.stride=0:e.stride=d[e.buffer]),void 0===e.start&&(e.start=f[e.buffer],f[e.buffer]+=r*qa[e.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let t=0;t<u.length;t++){const e=u[t];s.bind(e),r&&e._glBuffers[i].refCount++}return this.activateVao(t,a),l[a.id]=h,l[o]=h,n.bindVertexArray(null),s.unbind(hi.ARRAY_BUFFER),h}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers,s=this.renderer?.buffer;if(t.disposeRunner.remove(this),r){if(s)for(let t=0;t<i.length;t++){const r=i[t]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(i[t],e))}if(!e)for(const t in r)if("g"===t[0]){const e=r[t];this._activeVao===e&&this.unbind(),n.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,s=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);let o=null;for(const t in a){const l=a[t],h=s[l.buffer],u=h._glBuffers[n];if(e.attributeData[t]){o!==u&&(i.bind(h),o=u);const n=e.attributeData[t].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,l.size,l.type||r.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,1)}}}}draw(t,e,r,n){const{gl:i}=this,s=this._activeGeometry;if(s.indexBuffer){const a=s.indexBuffer.data.BYTES_PER_ELEMENT,o=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?s.instanced?i.drawElementsInstanced(t,e||s.indexBuffer.data.length,o,(r||0)*a,n||1):i.drawElements(t,e||s.indexBuffer.data.length,o,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?i.drawArraysInstanced(t,r,e||s.getSize(),n||1):i.drawArrays(t,r,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Ka.extension={type:Pi.RendererSystem,name:"geometry"},Mi.add(Ka);class Qa{constructor(t=null){this.type=ai.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ri.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ai.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}const Za={};let Ja,to=Za;function eo(){if(to===Za||to?.isContextLost()){const t=Ri.ADAPTER.createCanvas();let e;Ri.PREFER_ENV>=Xn.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),to=e}return to}function ro(t,e,r){if("precision"!==t.substring(0,9)){let n=e;return e===si.HIGH&&r!==si.HIGH&&(n=si.MEDIUM),`precision ${n} float;\n${t}`}return r!==si.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}const no={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function io(t){return no[t]}let so=null;const ao={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function oo(t,e){if(!so){const e=Object.keys(ao);so={};for(let r=0;r<e.length;++r){const n=e[r];so[t[n]]=ao[n]}}return so[e]}const lo=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],ho={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},uo={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},co=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function fo(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function po(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=co.replace(/%forloop%/gi,fo(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}let mo=0;const go={};class _o{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=mo++,this.vertexSrc=t||_o.defaultVertexSrc,this.fragmentSrc=e||_o.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),go[r]?(go[r]++,r+=`-${go[r]}`):go[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=ro(this.vertexSrc,Ri.PRECISION_VERTEX,si.HIGH),this.fragmentSrc=ro(this.fragmentSrc,Ri.PRECISION_FRAGMENT,function(){if(!Ja){Ja=si.MEDIUM;const t=eo();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Ja=e.precision?si.HIGH:si.MEDIUM}}return Ja}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,e,r){const n=t+e;let i=zs[n];return i||(zs[n]=i=new _o(t,e,r)),i}}class vo{constructor(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Ba?e:new Ba(e):new Ba({}),this.disposeRunner=new es("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const n=_o.from(t,e);return new vo(n,r)}}class yo{constructor(){this.data=0,this.blendMode=Yn.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Yn.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new yo;return t.depthTest=!1,t.blend=!0,t}}class xo extends vo{constructor(t,e,r){super(_o.from(t||xo.defaultVertexSrc,e||xo.defaultFragmentSrc),r),this.padding=0,this.resolution=Ri.FILTER_RESOLUTION,this.multisample=Ri.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new yo}apply(t,e,r,n,i){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}const bo=new Xi;class wo{constructor(t,e){this._texture=t,this.mapCoord=new Xi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],s=t[n+1];e[n]=i*r.a+s*r.c+r.tx,e[n+1]=i*r.b+s*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,i=e.trim;i&&(bo.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(bo));const s=e.baseTexture,a=this.uClampFrame,o=this.clampMargin/s.resolution,l=this.clampOffset;return a[0]=(e._frame.x+o+l)/s.width,a[1]=(e._frame.y+o+l)/s.height,a[2]=(e._frame.x+e._frame.width-o+l)/s.width,a[3]=(e._frame.y+e._frame.height-o+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0}}class To extends xo{constructor(t,e,r){let n=null;"string"!=typeof t&&void 0===e&&void 0===r&&(n=t,t=void 0,e=void 0,r=void 0),super(t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",e||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=n,this.maskMatrix=new Xi}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,n){const i=this._maskSprite,s=i._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new wo(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))}}class Eo{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const t=this.maskDataPool.pop()||new Qa;t.pooled=!0,t.maskObject=e,r=t}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==ai.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case ai.SCISSOR:this.renderer.scissor.push(r);break;case ai.STENCIL:this.renderer.stencil.push(r);break;case ai.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case ai.COLOR:this.pushColorMask(r)}r.type===ai.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case ai.SCISSOR:this.renderer.scissor.pop(e);break;case ai.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ai.SPRITE:this.popSpriteMask(e);break;case ai.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===ai.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=ai.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=ai.SCISSOR:t.type=ai.STENCIL:t.type=ai.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new To]));const i=this.renderer,s=i.renderTexture;let a,o;if(s.current){const e=s.current;a=t.resolution||e.resolution,o=t.multisample??e.multisample}else a=t.resolution||i.resolution,o=t.multisample??i.multisample;n[0].resolution=a,n[0].multisample=o,n[0].maskSprite=e;const l=r.filterArea;r.filterArea=e.getBounds(!0),i.filter.push(r,n),r.filterArea=l,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}Eo.extension={type:Pi.RendererSystem,name:"mask"},Mi.add(Eo);class So{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Ao=new Xi,Co=[],Ro=class extends So{constructor(t){super(t),this.glConst=Ri.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,Co.pop()??new Li);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:i}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(Ro.isMatrixRotated(e.worldTransform))return!1;if(Ro.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,i){Ro.isMatrixRotated(i)||((i=i?Ao.copyFrom(i):Ao.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&Co.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let Po=Ro;Po.extension={type:Pi.RendererSystem,name:"scissor"},Mi.add(Po);class Io extends So{constructor(t){super(t),this.glConst=Ri.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const i=t._colorMask;0!==i&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,r.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(r._colorMask=n,e.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Io.extension={type:Pi.RendererSystem,name:"stencil"},Mi.add(Io);class Mo{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Xi,this.transform=null}update(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(t,e,r,n){const i=this.projectionMatrix,s=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=s*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-s-e.y*i.d}setTransform(t){}destroy(){this.renderer=null}}Mo.extension={type:Pi.RendererSystem,name:"projection"},Mi.add(Mo);const ko=new Li,Do=new Li;class Oo{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Li,this.destinationFrame=new Li,this.viewportFrame=new Li}bind(t=null,e,r){const n=this.renderer;let i,s,a;this.current=t,t?(i=t.baseTexture,a=i.resolution,e||(ko.width=t.frame.width,ko.height=t.frame.height,e=ko),r||(Do.x=t.frame.x,Do.y=t.frame.y,Do.width=e.width,Do.height=e.height,r=Do),s=i.framebuffer):(a=n.resolution,e||(ko.width=n._view.screen.width,ko.height=n._view.screen.height,e=ko),r||((r=ko).width=e.width,r.height=e.height));const o=this.viewportFrame;o.x=r.x*a,o.y=r.y*a,o.width=r.width*a,o.height=r.height*a,t||(o.y=n.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(s,o),this.renderer.projection.update(r,e,a,!s),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,i=r.width!==n.width||r.height!==n.height;if(i){let{x:t,y:e,width:r,height:n}=this.viewportFrame;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,r,n)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}function No(t,e,r,n,i){r.buffer.update(i)}Oo.extension={type:Pi.RendererSystem,name:"renderTexture"},Mi.add(Oo);const Fo={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Bo={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Lo(t){const e=t.map((t=>({data:t,offset:0,dataLen:0,dirty:0})));let r=0,n=0,i=0;for(let t=0;t<e.length;t++){const s=e[t];if(r=Bo[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!=0&&n<16){const t=n%r%16;n+=t,i+=t}n+r>16?(i=16*Math.ceil(i/16),s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:e,size:i}}function Uo(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort(((t,e)=>t.index-e.index)),r}function zo(t,e){if(!t.autoManage)return{size:0,syncFunc:No};const r=Uo(t.uniforms,e),{uboElements:n,size:i}=Lo(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let e=0;e<n.length;e++){const r=n[e],i=t.uniforms[r.data.name],a=r.data.name;let o=!1;for(let t=0;t<lo.length;t++){const e=lo[t];if(e.codeUbo&&e.test(r.data,i)){s.push(`offset = ${r.offset/4};`,lo[t].codeUbo(r.data.name,i)),o=!0;break}}if(!o)if(r.data.size>1){const t=io(r.data.type),e=Math.max(Bo[r.data.type]/16,1),n=t/e,i=(4-n%4)%4;s.push(`\n                cv = ud.${a}.value;\n                v = uv.${a};\n                offset = ${r.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${r.data.size*e}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${i};\n                }\n\n                `)}else{const t=Fo[r.data.type];s.push(`\n                cv = ud.${a}.value;\n                v = uv.${a};\n                offset = ${r.offset/4};\n                ${t};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}class Go{}class Ho{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function jo(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Xo(t){const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Wo(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Xo(2*e);case"bvec3":return Xo(3*e);case"bvec4":return Xo(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Vo(t,e){const r=t.getShaderSource(e).split("\n").map(((t,e)=>`${e}: ${t}`)),n=t.getShaderInfoLog(e),i=n.split("\n"),s={},a=i.map((t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((t=>!(!t||s[t]||(s[t]=!0,0)))),o=[""];a.forEach((t=>{r[t-1]=`%c${r[t-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function Yo(t,e){const r=jo(t,t.VERTEX_SHADER,e.vertexSrc),n=jo(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof t.transformFeedbackVaryings||t.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Vo(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Vo(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,r,n),e.attributeData=function(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=e.getActiveAttrib(t,i);if(n.name.startsWith("gl_"))continue;const s=oo(e,n.type),a={type:s,name:n.name,size:io(s),location:e.getAttribLocation(t,n.name)};r[n.name]=a}return r}(i,t),e.uniformData=function(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=e.getActiveUniform(t,i),s=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),o=oo(e,n.type);r[s]={name:s,index:i,type:o,size:n.size,isArray:a,value:Wo(o,n.size)}}return r}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const r=Object.keys(e.attributeData);r.sort(((t,e)=>t>e?1:-1));for(let n=0;n<r.length;n++)e.attributeData[r[n]].location=n,t.bindAttribLocation(i,n,r[n]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const a={};for(const r in e.uniformData){const n=e.uniformData[r];a[r]={location:t.getUniformLocation(i,r),value:Wo(n.type,n.size)}}return new Ho(i,a)}let $o,qo=0;const Ko={textureCount:0,uboCount:0};class Qo{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=qo++}systemCheck(){if(!function(){if("boolean"==typeof $o)return $o;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");$o=!0===t({a:"b"},"a","b")}catch(t){$o=!1}return $o}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Ko.textureCount=0,Ko.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ko)),n}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in t.uniforms){const i=e[n];if(!i){t.uniforms[n]?.group&&(t.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const s=t.uniforms[n];let a=!1;for(let t=0;t<lo.length;t++)if(lo[t].test(i,s)){r.push(lo[t].code(n,s)),a=!0;break}if(!a){const t=(1!==i.size||i.isArray?uo:ho)[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Ko,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[s];if(a||(a=this._uboCache[s]=zo(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(a.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const n=t.uniforms,i=[`${r}-`];for(const t in n)i.push(t),e[t]&&i.push(e[t].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,n=Yo(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Qo.extension={type:Pi.RendererSystem,name:"shader"},Mi.add(Qo);const Zo=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Yn.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new yo,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function(t,e=[]){return e[Yn.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.ADD]=[t.ONE,t.ONE],e[Yn.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.NONE]=[0,0],e[Yn.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Yn.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Yn.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Yn.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Yn.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Yn.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Yn.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Yn.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Yn.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Yn.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Yn.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Zo.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Zo.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Jo=Zo;Jo.extension={type:Pi.RendererSystem,name:"state"},Mi.add(Jo);class tl{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Ri.GC_MAX_IDLE,this.checkCountMax=Ri.GC_MAX_CHECK_COUNT,this.mode=Ri.GC_MODE}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ii.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&(e[t++]=e[r]);e.length=t}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let e=t.children.length-1;e>=0;e--)this.unload(t.children[e])}destroy(){this.renderer=null}}tl.extension={type:Pi.RendererSystem,name:"textureGC"},Mi.add(tl);class el{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Qn.UNSIGNED_BYTE,this.internalFormat=qn.RGBA,this.samplerType=0}}class rl{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ia,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[Qn.UNSIGNED_BYTE]:{[qn.RGBA]:t.RGBA8,[qn.RGB]:t.RGB8,[qn.RG]:t.RG8,[qn.RED]:t.R8,[qn.RGBA_INTEGER]:t.RGBA8UI,[qn.RGB_INTEGER]:t.RGB8UI,[qn.RG_INTEGER]:t.RG8UI,[qn.RED_INTEGER]:t.R8UI,[qn.ALPHA]:t.ALPHA,[qn.LUMINANCE]:t.LUMINANCE,[qn.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Qn.BYTE]:{[qn.RGBA]:t.RGBA8_SNORM,[qn.RGB]:t.RGB8_SNORM,[qn.RG]:t.RG8_SNORM,[qn.RED]:t.R8_SNORM,[qn.RGBA_INTEGER]:t.RGBA8I,[qn.RGB_INTEGER]:t.RGB8I,[qn.RG_INTEGER]:t.RG8I,[qn.RED_INTEGER]:t.R8I},[Qn.UNSIGNED_SHORT]:{[qn.RGBA_INTEGER]:t.RGBA16UI,[qn.RGB_INTEGER]:t.RGB16UI,[qn.RG_INTEGER]:t.RG16UI,[qn.RED_INTEGER]:t.R16UI,[qn.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[Qn.SHORT]:{[qn.RGBA_INTEGER]:t.RGBA16I,[qn.RGB_INTEGER]:t.RGB16I,[qn.RG_INTEGER]:t.RG16I,[qn.RED_INTEGER]:t.R16I},[Qn.UNSIGNED_INT]:{[qn.RGBA_INTEGER]:t.RGBA32UI,[qn.RGB_INTEGER]:t.RGB32UI,[qn.RG_INTEGER]:t.RG32UI,[qn.RED_INTEGER]:t.R32UI,[qn.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[Qn.INT]:{[qn.RGBA_INTEGER]:t.RGBA32I,[qn.RGB_INTEGER]:t.RGB32I,[qn.RG_INTEGER]:t.RG32I,[qn.RED_INTEGER]:t.R32I},[Qn.FLOAT]:{[qn.RGBA]:t.RGBA32F,[qn.RGB]:t.RGB32F,[qn.RG]:t.RG32F,[qn.RED]:t.R32F,[qn.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[Qn.HALF_FLOAT]:{[qn.RGBA]:t.RGBA16F,[qn.RGB]:t.RGB16F,[qn.RG]:t.RG16F,[qn.RED]:t.R16F},[Qn.UNSIGNED_SHORT_5_6_5]:{[qn.RGB]:t.RGB565},[Qn.UNSIGNED_SHORT_4_4_4_4]:{[qn.RGBA]:t.RGBA4},[Qn.UNSIGNED_SHORT_5_5_5_1]:{[qn.RGBA]:t.RGB5_A1},[Qn.UNSIGNED_INT_2_10_10_10_REV]:{[qn.RGBA]:t.RGB10_A2,[qn.RGBA_INTEGER]:t.RGB10_A2UI},[Qn.UNSIGNED_INT_10F_11F_11F_REV]:{[qn.RGB]:t.R11F_G11F_B10F},[Qn.UNSIGNED_INT_5_9_9_9_REV]:{[qn.RGB]:t.RGB9_E5},[Qn.UNSIGNED_INT_24_8]:{[qn.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[Qn.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[qn.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[Qn.UNSIGNED_BYTE]:{[qn.RGBA]:t.RGBA,[qn.RGB]:t.RGB,[qn.ALPHA]:t.ALPHA,[qn.LUMINANCE]:t.LUMINANCE,[qn.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[Qn.UNSIGNED_SHORT_5_6_5]:{[qn.RGB]:t.RGB},[Qn.UNSIGNED_SHORT_4_4_4_4]:{[qn.RGBA]:t.RGBA},[Qn.UNSIGNED_SHORT_5_5_5_1]:{[qn.RGBA]:t.RGBA}},e}(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let t=0;t<e;t++)this.boundTextures[t]=null;this.emptyTextures={};const r=new el(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new el(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let e=0;e<6;e++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let t=0;t<this.boundTextures.length;t++)this.bind(null,t)}bind(t,e=0){const{gl:r}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<r.length;t++)r[t]===this.unknownTexture&&this.bind(null,t)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let r=t-1;r>=0;--r){const t=e[r];t&&t._glTextures[n].samplerType!==Zn.FLOAT&&this.renderer.texture.unbind(t)}}initTexture(t){const e=new el(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===Qn.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(r,t,e))e.samplerType!==Zn.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,i=t.realHeight,s=r.gl;(e.width!==n||e.height!==i||e.dirtyId<0)&&(e.width=n,e.height=i,s.texImage2D(t.target,0,e.internalFormat,n,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&Os(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==ei.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=ti.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==ei.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Jn.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===Jn.LINEAR){const n=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Jn.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===Jn.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}rl.extension={type:Pi.RendererSystem,name:"texture"},Mi.add(rl);const nl=new ts;class il{constructor(t){this.renderer=t,this._tempMatrix=new Xi}generateTexture(t,e){const{region:r,...n}=e||{},i=r||t.getLocalBounds(null,!0);0===i.width&&(i.width=1),0===i.height&&(i.height=1);const s=Ea.create({width:i.width,height:i.height,...n});this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=t.transform;return t.transform=nl,this.renderer.render(t,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,s}destroy(){}}il.extension={type:[Pi.RendererSystem,Pi.CanvasRendererSystem],name:"textureGenerator"},Mi.add(il);class sl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"==typeof t.color?xs(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=ys(t),vs(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}sl.extension={type:[Pi.RendererSystem,Pi.CanvasRendererSystem],name:"background"},Mi.add(sl);class al{constructor(t){this.renderer=t}init(t){this.screen=new Li(0,0,t.width,t.height),this.element=t.view||Ri.ADAPTER.createCanvas(),this.resolution=t.resolution||Ri.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}al.extension={type:[Pi.RendererSystem,Pi.CanvasRendererSystem],name:"_view"},Mi.add(al);class ol{constructor(t){this.renderer=t,this.plugins={}}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ol.extension={type:[Pi.RendererSystem,Pi.CanvasRendererSystem],name:"_plugin"},Mi.add(ol);class ll extends as{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter((e=>t.systems[e])),r=[...e,...Object.keys(t.systems).filter((t=>!e.includes(t)))];for(const e of r)this.addSystem(t.systems[e],e)}addRunners(...t){t.forEach((t=>{this.runners[t]=new es(t)}))}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const t in this.runners)this.runners[t].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach((n=>{const i=r.find((t=>this._systemsHash[t]===n));n[t.name](e[i])}))}destroy(){Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash={}}}class hl{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.0.4 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}hl.extension={type:[Pi.RendererSystem,Pi.CanvasRendererSystem],name:"startup"},Mi.add(hl);class ul{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:n}=this;e&&n.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:n}=this,i=e.createTransformFeedback();t._glTransformFeedbacks[n]=i,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i);for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];s&&(r.buffer.update(s),s._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,s._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),i}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];if(!n)continue;const s=n._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||e||i.dispose(n,e))}r&&(e||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ul.extension={type:Pi.RendererSystem,name:"transformFeedback"},Mi.add(ul);const cl=[];function dl(t){for(const e of cl)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}Mi.handleByList(Pi.Renderer,cl);const fl="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",pl="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ml=class extends ll{constructor(t){super(),t=Object.assign({},Ri.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ba({projectionMatrix:new Xi},!0);const e={runners:["init","destroy","contextChange","reset","update","postrender","prerender","resize"],systems:ml.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e);const r={hello:t.hello,_plugin:ml.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha??(t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha),preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r)}static test(t){return!t?.forceCanvas&&gs()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return this.background.clearBeforeRender}get useContextAlpha(){return this.context.useContextAlpha}get preserveDrawingBuffer(){return this.context.preserveDrawingBuffer}get backgroundColor(){return this.background.color}set backgroundColor(t){this.background.color=t}get backgroundAlpha(){return this.background.color}set backgroundAlpha(t){this.background.alpha=t}get powerPreference(){return this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let gl=ml;gl.extension={type:Pi.Renderer,priority:1},gl.__plugins={},gl.__systems={},Mi.handleByMap(Pi.RendererPlugin,gl.__plugins),Mi.handleByMap(Pi.RendererSystem,gl.__systems),Mi.add(gl);class _l{constructor(){this.texArray=null,this.blend=0,this.type=$n.TRIANGLES,this.start=0,this.size=0,this.data=null}}class vl{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}class yl{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}class xl{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Ba.from({uSamplers:e},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new _o(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xi,default:this.defaultGroupCache[t]};return new vo(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}class bl extends Da{constructor(t=!1){super(),this._buffer=new Ra(null,t,!1),this._indexBuffer=new Ra(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Qn.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Qn.FLOAT).addAttribute("aColor",this._buffer,4,!0,Qn.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Qn.FLOAT).addIndex(this._indexBuffer)}}const wl=class extends Ha{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=bl,this.vertexSize=6,this.state=yo.for2d(),this.size=4*Ri.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=wl.defaultVertexSrc,fragment:e=wl.defaultFragmentTemplate}={}){this.shaderGenerator=new xl(t,e)}contextChange(){const t=this.renderer.gl;Ri.PREFER_ENV===Xn.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Ri.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=po(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=wl,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;for(;t.length<r;)t.push(new _l);for(;e.length<n;)e.push(new vl);for(let t=0;t<this.MAX_TEXTURES;t++)this._tempBoundTextures[t]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,MAX_TEXTURES:e}=this,r=wl._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let a=++ia._globalBatch,o=0,l=r[0],h=0;n.copyBoundTextures(i,e);for(let u=0;u<this._bufferSize;++u){const c=t[u];t[u]=null,c._batchEnabled!==a&&(l.count>=e&&(n.boundArray(l,i,a,e),this.buildDrawCalls(l,h,u),h=u,l=r[++o],++a),c._batchEnabled=a,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(n.boundArray(l,i,a,e),this.buildDrawCalls(l,h,this._bufferSize),++o,++a);for(let t=0;t<i.length;t++)i[t]=null;ia._globalBatch=a}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:a}=this,o=wl._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=o[l];c.start=this._iIndex,c.texArray=t;for(let d=e;d<r;++d){const r=n[d],f=r._texture.baseTexture,p=ws[f.alphaMode?1:0][r.blendMode];n[d]=null,e<d&&c.blend!==p&&(c.size=u-c.start,e=d,c=o[++l],c.texArray=t,c.start=u),this.packInterleavedGeometry(r,i,s,h,u),h+=r.vertexData.length/2*a,u+=r.indices.length,c.blend=p}e<r&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Ri.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=wl._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:t,type:a,size:o,start:l,blend:h}=n[s];i!==t&&(i=t,this.bindAndClearTexArray(t)),this.state.blendMode=h,r.set(this.state),e.drawElements(a,o,e.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ri.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Ms(Math.ceil(t/8)),r=Ds(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new yl(n*this.vertexSize*4)),i}getIndexBuffer(t){const e=Ms(Math.ceil(t/12)),r=Ds(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(t,e,r,n,i){const{uint32View:s,float32View:a}=e,o=n/this.vertexSize,l=t.uvs,h=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?Ss(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let t=0;t<u.length;t+=2)a[n++]=u[t],a[n++]=u[t+1],a[n++]=l[t],a[n++]=l[t+1],s[n++]=f,a[n++]=c;for(let t=0;t<h.length;t++)r[i++]=o+h[t]}};let Tl=wl;Tl.extension={name:"batch",type:Pi.RendererPlugin},Tl._drawCallPool=[],Tl._textureArrayPool=[],Mi.add(Tl);class El{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new es("disposeTransformFeedback")}bindBuffer(t,e){this.buffers[t]=e}destroy(){this.disposeRunner.emit(this,!1)}}class Sl{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Al{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}}bindBufferRange(t,e,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const s=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,s.buffer,256*r,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new Sl(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Al.extension={type:Pi.RendererSystem,name:"buffer"},Mi.add(Al);class Cl{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=li.HIGH?this.multisample=li.HIGH:e>=li.MEDIUM?this.multisample=li.MEDIUM:e>=li.LOW?this.multisample=li.LOW:this.multisample=li.NONE}destroy(){}}Cl.extension={type:Pi.RendererSystem,name:"_multisample"},Mi.add(Cl);class Rl{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let n,i,s,a;if(e&&(n=e.renderTexture,i=e.clear,s=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(n||(this.lastObjectRendered=t),!a){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(e.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Rl.extension={type:Pi.RendererSystem,name:"objectRenderer"},Mi.add(Rl);const Pl="7.0.4",Il={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ml=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class kl extends xo{constructor(t,e=8,r=4,n=Ri.FILTER_RESOLUTION,i=5){const s=function(t,e){const r=Math.ceil(t/2);let n,i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let e=0;e<t;e++){let t=n.replace("%index%",e.toString());t=t.replace("%sampleIndex%",e-(r-1)+".0"),s+=t,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}(i,t),a=function(t){const e=Il[t],r=e.length;let n,i=Ml,s="";for(let i=0;i<t;i++){let a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",i.toString());n=i,i>=r&&(n=t-i-1),a=a.replace("%value%",e[n].toString()),s+=a,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}(i);super(s,a),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=r,this.blur=e}apply(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{const i=t.getFilterTexture(),s=t.renderer;let a=e,o=i;this.state.blend=!1,t.applyFilter(this,a,o,ni.CLEAR);for(let e=1;e<this.passes-1;e++){t.bindAndClear(a,ni.BLIT),this.uniforms.uSampler=o;const e=o;o=a,a=e,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,o,r,n),t.returnFilterTexture(i)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class Dl extends xo{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(pl,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",t),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const r=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(r,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}blackAndWhite(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),i=1/3,s=(0,Math.sqrt)(i),a=[r+(1-r)*i,i*(1-r)-s*n,i*(1-r)+s*n,0,0,i*(1-r)+s*n,r+i*(1-r),i*(1-r)-s*n,0,0,i*(1-r)-s*n,i*(1-r)+s*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(a,e)}contrast(t,e){const r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)}saturate(t=0,e){const r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)}desaturate(){this.saturate(-1)}negative(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)}sepia(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)}technicolor(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)}polaroid(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)}toBGR(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)}kodachrome(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)}browni(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)}vintage(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)}colorTone(t,e,r,n,i){const s=((r=r||16770432)>>16&255)/255,a=(r>>8&255)/255,o=(255&r)/255,l=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,a,o,t=t||.2,0,l,h,u,e=e||.15,0,s-l,a-h,o-u,0,0];this._loadMatrix(c,i)}night(t,e){const r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Dl.prototype.grayscale=Dl.prototype.greyscale,Ri.SORTABLE_CHILDREN=!1;class Ol{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Li.EMPTY:((t=t||new Li(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:n,c:i,d:s,tx:a,ty:o}=t,l=r*e.x+i*e.y+a,h=n*e.x+s*e.y+o;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,s=t[0],a=t[1];e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=t[2],a=t[3],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=t[4],a=t[5],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=t[6],a=t[7],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}addFrame(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)}addFrameMatrix(t,e,r,n,i){const s=t.a,a=t.b,o=t.c,l=t.d,h=t.tx,u=t.ty;let c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=s*e+o*r+h,g=a*e+l*r+u;c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+o*r+h,g=a*n+l*r+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*e+o*i+h,g=a*e+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+o*i+h,g=a*n+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p}addVertexData(t,e,r){let n=this.minX,i=this.minY,s=this.maxX,a=this.maxY;for(let o=e;o<r;o+=2){const e=t[o],r=t[o+1];n=e<n?e:n,i=r<i?r:i,s=e>s?e:s,a=r>a?r:a}this.minX=n,this.minY=i,this.maxX=s,this.maxY=a}addVertices(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)}addVerticesMatrix(t,e,r,n,i=0,s=i){const a=t.a,o=t.b,l=t.c,h=t.d,u=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let t=r;t<n;t+=2){const r=e[t],n=e[t+1],g=a*r+l*n+u,_=h*n+o*r+c;d=Math.min(d,g-i),p=Math.max(p,g+i),f=Math.min(f,_-s),m=Math.max(m,_+s)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addBounds(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=s){const t=this.minX,e=this.minY,a=this.maxX,o=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>a?i:a,this.maxY=s>o?s:o}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=s){const t=this.minX,e=this.minY,a=this.maxX,o=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>a?i:a,this.maxY=s>o?s:o}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,n,i,s){t-=i,e-=s,r+=i,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class Nl extends as{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new ts,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ol,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const n=e[r];Object.defineProperty(Nl.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Li),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Li),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ol);const e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-i,s}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,r=1,n=1,i=0,s=0,a=0,o=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=s,this.skew.y=a,this.pivot.x=o,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Fl),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Di}set angle(t){this.transform.rotation=t*Oi}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class Fl extends Nl{constructor(){super(...arguments),this.sortDirty=null}}function Bl(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Nl.prototype.displayObjectUpdateTransform=Nl.prototype.updateTransform;class Ll extends Nl{constructor(){super(),this.children=[],this.sortableChildren=Ri.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);Os(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,Os(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Os(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e-r;let i;if(n>0&&n<=e){i=this.children.splice(r,n);for(let t=0;t<i.length;++t)i[t].parent=null,i[t].transform&&(i[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<i.length;++t)i[t].emit("removed",this),this.emit("childRemoved",i[t],this,t);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Bl),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;if(this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==Ll.prototype._render&&(r=this.getBounds(!0)),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e],n=r.cullable;r.cullable=n||!this.cullArea,r.render(t),r.cullable=n}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const n=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==ai.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof t?t:t?.children,r=this.removeChildren(0,this.children.length);if(e)for(let e=0;e<r.length;++e)r[e].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}Ll.prototype.containerUpdateTransform=Ll.prototype.updateTransform;const Ul=new Fi,zl=new Uint16Array([0,1,2,0,2,3]);class Gl extends Ll{constructor(t){super(),this._anchor=new ji(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=Yn.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||Ta.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=zl,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Ri.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ns(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ns(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,a=e.tx,o=e.ty,l=this.vertexData,h=t.trim,u=t.orig,c=this._anchor;let d=0,f=0,p=0,m=0;if(h?(f=h.x-c._x*u.width,d=f+h.width,m=h.y-c._y*u.height,p=m+h.height):(f=-c._x*u.width,d=f+u.width,m=-c._y*u.height,p=m+u.height),l[0]=r*f+i*m+a,l[1]=s*m+n*f+o,l[2]=r*d+i*m+a,l[3]=s*m+n*d+o,l[4]=r*d+i*p+a,l[5]=s*p+n*d+o,l[6]=r*f+i*p+a,l[7]=s*p+n*f+o,this._roundPixels){const t=Ri.RESOLUTION;for(let e=0;e<l.length;++e)l[e]=Math.round(l[e]*t)/t}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,s=i.a,a=i.b,o=i.c,l=i.d,h=i.tx,u=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=s*c+o*f+h,e[1]=l*f+a*c+u,e[2]=s*d+o*f+h,e[3]=l*f+a*d+u,e[4]=s*d+o*p+h,e[5]=l*p+a*d+u,e[6]=s*c+o*p+h,e[7]=l*p+a*c+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new Ol),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Li),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ul);const e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x;let i=0;return Ul.x>=n&&Ul.x<n+e&&(i=-r*this.anchor.y,Ul.y>=i&&Ul.y<i+r)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof Ta?t:Ta.from(t,e);return new Gl(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Ns(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Ns(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ta.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Hl=new Xi;Nl.prototype._cacheAsBitmap=!1,Nl.prototype._cacheData=null,Nl.prototype._cacheAsBitmapResolution=null,Nl.prototype._cacheAsBitmapMultisample=null;class jl{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nl.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new jl),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),Nl.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Nl.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const t=this.filters[0].padding;r.pad(t)}r.ceil(Ri.RESOLUTION);const n=t.renderTexture.current,i=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,o=Ea.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),l=`cacheAsBitmap_${Bs()}`;this._cacheData.textureCacheId=l,ia.addToCache(o.baseTexture,l),Ta.addToCache(o,l);const h=this.transform.localTransform.copyTo(Hl).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(n,i,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Gl(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-r.x/r.width,u.anchor.y=-r.y/r.height,u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)},Nl.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Nl.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform;e.ceil(Ri.RESOLUTION);const s=Ea.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${Bs()}`;this._cacheData.textureCacheId=a,ia.addToCache(s.baseTexture,a),Ta.addToCache(s,a);const o=Hl;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:o,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const l=new Gl(s);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)},Nl.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Nl.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Nl.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ia.removeFromCache(this._cacheData.textureCacheId),Ta.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Nl.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},Nl.prototype.name=null,Ll.prototype.getChildByName=function(t,e){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].name===t)return this.children[e];if(e)for(let e=0,r=this.children.length;e<r;e++){const r=this.children[e];if(!r.getChildByName)continue;const n=r.getChildByName(t,!0);if(n)return n}return null},Nl.prototype.getGlobalPosition=function(t=new Fi,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};const Xl={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};class Wl{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Wl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Fi,this.page=new Fi,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Vl extends Wl{constructor(){super(...arguments),this.client=new Fi,this.movement=new Fi,this.offset=new Fi,this.global=new Fi,this.screen=new Fi}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,n,i,s,a,o,l,h,u,c,d,f,p){throw new Error("Method not implemented.")}}class Yl extends Vl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class $l extends Vl{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const ql=new Fi,Kl=new Fi;class Ql{constructor(t){this.dispatch=new as,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(((t,e)=>t.priority-e.priority))}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,n=e.length;r<n;r++)e[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const r=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,ql.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const n=r.children;if(n)for(let r=0;r<n.length;r++)this.all(t,e,n[r]);t.currentTarget=r,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let r=0;r<2048&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,r,n,i){if(!t||!t.visible)return null;if(i(t,r))return null;if(t.interactiveChildren&&t.children){const s=t.children;for(let a=s.length-1;a>=0;a--){const o=s[a],l=this.hitTestRecursive(o,e||o.interactive,r,n,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;return(l.length>0||t.interactive)&&l.push(t),l}}}return e&&n(t,r)?t.interactive?[t]:[]:null}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,Kl),!t.hitArea.contains(Kl.x,Kl.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!r.containsPoint?.(e))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t.containsPoint&&t.containsPoint(e)}notifyTarget(t,e){e=e??t.type;const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t),r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets&&i!==e.target){const n="mousemove"===t.type?"mouseout":"pointerout",s=this.createPointerEvent(t,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(i)){const n=this.createPointerEvent(t,"pointerleave",i);for(n.eventPhase=n.AT_TARGET;n.target&&!e.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==e.target){const n="mousemove"===t.type?"mouseover":"pointerover",s=this.clonePointerEvent(e,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let a=i?.parent;for(;a&&a!==this.rootTarget.parent&&a!==e.target;)a=a.parent;if(!a||a===this.rootTarget.parent){const t=this.clonePointerEvent(e,"pointerenter");for(t.eventPhase=t.AT_TARGET;t.target&&t.target!==i&&t.target!==this.rootTarget.parent;)t.currentTarget=t.target,this.notifyTarget(t),r&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(s)}const s=this.moveOnAll?"all":"dispatchEvent";this[s](e,"pointermove"),"touch"===e.pointerType&&this[s](e,"touchmove"),r&&(this[s](e,"mousemove"),this.cursor=e.target?.cursor),n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.findMountedTarget(e.overTargets),i=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(t,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[t.button]);let s=i;if(i&&!r.composedPath().includes(i)){let e=i;for(;e&&!r.composedPath().includes(e);){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],s=e}if(s){const i=this.clonePointerEvent(r,"click");i.target=s,i.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:i.target,timeStamp:e});const a=n.clicksByButton[t.button];a.target===i.target&&e-a.timeStamp<200?++a.clickCount:a.clickCount=1,a.target=i.target,a.timeStamp=e,i.detail=a.clickCount,"mouse"===i.pointerType?this.dispatchEvent(i,"click"):"touch"===i.pointerType&&this.dispatchEvent(i,"tap"),this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof Yl))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let i=r;for(;i;)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof $l))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length&&t[r].parent===e;r++)e=t[r];return e}createPointerEvent(t,e,r){const n=this.allocateEvent(Yl);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y),"string"==typeof e&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent($l);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent(Yl);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Yl&&e instanceof Yl&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Vl&&e instanceof Vl&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const r=t.currentTarget._events[e];if(r)if("fn"in r)r.fn.call(r.context,t);else for(let e=0,n=r.length;e<n&&!t.propagationImmediatelyStopped;e++)r[e].fn.call(r[e].context,t)}}const Zl={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Jl{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Ql(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Yl(null),this.rootWheelEvent=new $l(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let t=0,r=e.length;t<r;t++){const r=e[t],n=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let t=0,e=n.length;t<e;t++){const e=this.bootstrapEvent(this.rootPointerEvent,n[t]);e.type+=r,this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let n;n=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*i,t.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const n=t.changedTouches[r];void 0===n.button&&(n.button=0),void 0===n.buttons&&(n.buttons=1),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){const r=t;void 0===r.isPrimary&&(r.isPrimary=!0),void 0===r.width&&(r.width=1),void 0===r.height&&(r.height=1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="mouse"),void 0===r.pointerId&&(r.pointerId=1),void 0===r.pressure&&(r.pressure=.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Zl[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}Jl.extension={name:"events",type:[Pi.RendererSystem,Pi.CanvasRendererSystem]},Mi.add(Jl);const th={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n="function"==typeof e?void 0:e;t="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.on(t,e,n)},removeEventListener(t,e,r){const n="function"==typeof e?void 0:e;t="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.off(t,e,n)},dispatchEvent(t){if(!(t instanceof Wl))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Nl.mixin(th),Nl.mixin(Xl);class eh{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ci.tablet||Ci.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let t=0;t<e.length;t++)this.updateAccessibleObjects(e[t])}update(){const t=performance.now();if(Ci.android.device&&t<this.androidUpdateCount)return;if(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:r,width:n,height:i}=this.renderer.view.getBoundingClientRect(),{width:s,height:a,resolution:o}=this.renderer,l=n/s*o,h=i/a*o;let u=this.div;u.style.left=`${e}px`,u.style.top=`${r}px`,u.style.width=`${s}px`,u.style.height=`${a}px`;for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.renderId!==this.renderId)e._accessibleActive=!1,Os(this.children,t,1),this.div.removeChild(e._accessibleDiv),this.pool.push(e._accessibleDiv),e._accessibleDiv=null,t--;else{u=e._accessibleDiv;let t=e.hitArea;const r=e.worldTransform;e.hitArea?(u.style.left=(r.tx+t.x*r.a)*l+"px",u.style.top=(r.ty+t.y*r.d)*h+"px",u.style.width=t.width*r.a*l+"px",u.style.height=t.height*r.d*h+"px"):(t=e.getBounds(),this.capHitArea(t),u.style.left=t.x*l+"px",u.style.top=t.y*h+"px",u.style.width=t.width*l+"px",u.style.height=t.height*h+"px",u.title!==e.accessibleTitle&&null!==e.accessibleTitle&&(u.title=e.accessibleTitle),u.getAttribute("aria-label")!==e.accessibleHint&&null!==e.accessibleHint&&u.setAttribute("aria-label",e.accessibleHint)),e.accessibleTitle===u.title&&e.tabIndex===u.tabIndex||(u.title=e.accessibleTitle,u.tabIndex=e.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:r}=t.target,n=this.renderer.events.rootBoundary,i=Object.assign(new Wl(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,e.forEach((t=>n.dispatchEvent(i,t)))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){9===t.keyCode&&this.activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}eh.extension={name:"accessibility",type:[Pi.RendererPlugin,Pi.CanvasRendererPlugin]},Mi.add(eh);const rh=class{constructor(t){this.stage=new Ll,t=Object.assign({forceCanvas:!1},t),this.renderer=dl(t),rh._plugins.forEach((e=>{e.init.call(this,t)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=rh._plugins.slice(0);r.reverse(),r.forEach((t=>{t.destroy.call(this)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let nh=rh;nh._plugins=[],Mi.handleByList(Pi.Application,nh._plugins);class ih{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;t=r,e=n}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ih.extension=Pi.Application,Mi.add(ih);class sh{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach((t=>{this._assetList.push(t)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const ah=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map((t=>"string"==typeof t?e(t):t)):t),oh=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){return this._cache.get(t)}set(t,e){const r=ah(t);let n;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];if(i.test(e)){n=i.getCacheableAssets(r,e);break}}n||(n={},r.forEach((t=>{n[t]=e})));const i=Object.keys(n),s={cacheKeys:i,keys:r};if(r.forEach((t=>{this._cacheMap.set(t,s)})),i.forEach((t=>{this._cache.has(t)&&this._cache.get(t),this._cache.set(t,n[t])})),e instanceof Ta){const t=e;r.forEach((e=>{t.baseTexture!==Ta.EMPTY.baseTexture&&ia.addToCache(t.baseTexture,e),Ta.addToCache(t,e)}))}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t))return;const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}},lh=t=>!Array.isArray(t);class hh{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null;for(let i=0;i<this.parsers.length;i++){const s=this.parsers[i];if(s.load&&s.test?.(t,e,this)){n=await s.load(t,e,this),r.parser=s;break}}if(!r.parser)return null;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];i.parse&&i.parse&&await(i.testParse?.(n,e,this))&&(n=await i.parse(n,e,this)||n,r.parser=i)}return n})(),r}async load(t,e){let r=0;const n={},i=lh(t),s=ah(t,(t=>({src:t}))),a=s.length,o=s.map((async t=>{const i=ds.toAbsolute(t.src);if(!n[t.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,t)),n[t.src]=await this.promiseCache[i].promise,e&&e(++r/a)}catch(e){throw delete this.promiseCache[i],delete n[t.src],new Error(`[Loader.load] Failed to load ${i}.\n${e}`)}}));return await Promise.all(o),i?n[s[0].src]:n}async unload(t){const e=ah(t,(t=>({src:t}))).map((async t=>{const e=ds.toAbsolute(t.src),r=this.promiseCache[e];if(r){const n=await r.promise;r.parser?.unload?.(n,t,this),delete this.promiseCache[e]}}));await Promise.all(e)}get parsers(){return this._parsers}}function uh(t,e,r,n,i){const s=e[r];for(let a=0;a<s.length;a++){const o=s[a];r<e.length-1?uh(t.replace(n[r],o),e,r+1,n,i):i.push(t.replace(n[r],o))}}function ch(t){const e=t.match(/\{(.*?)\}/g),r=[];if(e){const n=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");n.push(e)})),uh(t,n,0,e,r)}else r.push(t);return r}class dh{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...t){t.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(t){this._manifest,this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach((t=>{"string"==typeof t.name?r.push(t.name):r.push(...t.name),this.add(t.name,t.srcs)})):Object.keys(e).forEach((t=>{r.push(t),this.add(t,e[t])})),this._bundles[t]=r}add(t,e,r){const n=ah(t);n.forEach((t=>{this._assetMap[t]})),Array.isArray(e)||(e="string"==typeof e?ch(e):[e]);const i=e.map((t=>{let e=t;if("string"==typeof t){let r=!1;for(let n=0;n<this._parsers.length;n++){const i=this._parsers[n];if(i.test(t)){e=i.parse(t),r=!0;break}}r||(e={src:t})}return e.format||(e.format=e.src.split(".").pop()),e.alias||(e.alias=n),(this._basePath||this._rootPath)&&(e.src=ds.toAbsolute(e.src,this._basePath,this._rootPath)),e.data=e.data??r,e}));n.forEach((t=>{this._assetMap[t]=i}))}resolveBundle(t){const e=lh(t);t=ah(t);const r={};return t.forEach((t=>{const e=this._bundles[t];e&&(r[t]=this.resolve(e))})),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if("string"!=typeof t){const t={};for(const r in e)t[r]=e[r].src;return t}return e.src}resolve(t){const e=lh(t);t=ah(t);const r={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const r=this._getPreferredOrder(e),n=e[0];r?.priority.forEach((t=>{r.params[t].forEach((r=>{const n=e.filter((e=>!!e[t]&&e[t]===r));n.length&&(e=n)}))})),this._resolverHash[t]=e[0]??n}else{let e=t;(this._basePath||this._rootPath)&&(e=ds.toAbsolute(e,this._basePath,this._rootPath)),this._resolverHash[t]={src:e}}r[t]=this._resolverHash[t]})),e?r[t[0]]:r}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],r=this._preferredOrder.find((t=>t.params.format.includes(e.format)));if(r)return r}return this._preferredOrder[0]}}class fh{constructor(){this._detections=[],this._initialized=!1,this.resolver=new dh,this.loader=new hh,this.cache=oh,this._backgroundLoader=new sh(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return;if(this._initialized=!0,t.basePath&&(this.resolver.basePath=t.basePath),t.manifest){let e=t.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,r="number"==typeof e?[e]:e;let n=[];if(t.texturePreference?.format){const e=t.texturePreference?.format;n="string"==typeof e?[e]:e;for(const t of this._detections)await t.test()||(n=await t.remove(n))}else for(const t of this._detections)await t.test()&&(n=await t.add(n));this.resolver.prefer({params:{format:n,resolution:r}})}add(t,e,r){this.resolver.add(t,e,r)}async load(t,e){this._initialized||await this.init();const r=lh(t),n=ah(t).map((t=>"string"!=typeof t?(this.resolver.add(t.src,t),t.src):t)),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,e);return r?s[n[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;"string"==typeof t&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},s=Object.keys(n);let a=0,o=0;const l=()=>{e?.(++a/o)},h=s.map((t=>{const e=n[t];return o+=Object.keys(e).length,this._mapLoadToResolve(e,l).then((e=>{i[t]=e}))}));return await Promise.all(h),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach((t=>{this._backgroundLoader.add(Object.values(t))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"==typeof t)return oh.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=oh.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const i=await this.loader.load(r,e);this._backgroundLoader.active=!0;const s={};return r.forEach(((t,e)=>{const r=i[t.src],a=[t.src];t.alias&&a.push(...t.alias),s[n[e]]=r,oh.set(a,r)})),s}async unload(t){this._initialized||await this.init();const e=ah(t).map((t=>"string"!=typeof t?t.src:t)),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=ah(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map((t=>this._unloadFromResolved(e[t])));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach((t=>{oh.remove(t.src)})),await this.loader.unload(e)}get detections(){return this._detections}}const ph=new fh;Mi.handleByList(Pi.LoadParser,ph.loader.parsers).handleByList(Pi.ResolveParser,ph.resolver.parsers).handleByList(Pi.CacheParser,ph.cache.parsers).handleByList(Pi.DetectionParser,ph.detections);const mh={loader:Pi.LoadParser,resolver:Pi.ResolveParser,cache:Pi.CacheParser,detection:Pi.DetectionParser};Mi.handle(Pi.Asset,(t=>{const e=t.ref;Object.entries(mh).filter((([t])=>!!e[t])).forEach((([t,r])=>Mi.add(Object.assign(e[t],{extension:e[t].extension??r}))))}),(t=>{const e=t.ref;Object.keys(mh).filter((t=>!!e[t])).forEach((t=>Mi.remove(e[t])))}));const gh={extension:Pi.CacheParser,test:t=>Array.isArray(t)&&t.every((t=>t instanceof Ta)),getCacheableAssets:(t,e)=>{const r={};return t.forEach((t=>{e.forEach(((e,n)=>{r[t+(0===n?"":n+1)]=e}))})),r}};Mi.add(gh);var _h=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(_h||{});const vh={extension:{type:Pi.LoadParser,priority:_h.Low},test:t=>ds.extname(t).includes(".json"),async load(t){const e=await Ri.ADAPTER.fetch(t);return await e.json()}};Mi.add(vh);const yh={extension:{type:Pi.LoadParser,priority:_h.Low},test:t=>ds.extname(t).includes(".txt"),async load(t){const e=await Ri.ADAPTER.fetch(t);return await e.text()}};Mi.add(yh);const xh=["normal","bold","100","200","300","400","500","600","700","800","900"],bh=["woff","woff2","ttf","otf"];function wh(t){const e=ds.extname(t);return ds.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}const Th={extension:{type:Pi.LoadParser,priority:_h.Low},test(t){const e=t.split("?")[0].split(".").pop();return bh.includes(e)},async load(t,e){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=Ri.ADAPTER.getFontFaceSet();if(r){const n=[],i=e.data?.family??wh(t),s=e.data?.weights?.filter((t=>xh.includes(t)))??["normal"],a=e.data??{};for(let e=0;e<s.length;e++){const o=s[e],l=new FontFace(i,`url(${t})`,{...a,weight:o});await l.load(),r.add(l),n.push(l)}return 1===n.length?n[0]:n}return null},unload(t){(Array.isArray(t)?t:[t]).forEach((t=>Ri.ADAPTER.getFontFaceSet().delete(t)))}};Mi.add(Th);let Eh,Sh=0;const Ah="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",Ch="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let Rh;const Ph=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((t=>{const e=URL.createObjectURL(new Blob([Ah],{type:"application/javascript"})),r=new Worker(e);r.addEventListener("message",(n=>{r.terminate(),URL.revokeObjectURL(e),t(n.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===Eh&&(Eh=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Eh&&(Rh||(Rh=URL.createObjectURL(new Blob([Ch],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Rh),t.addEventListener("message",(t=>{this.complete(t.data),this.returnWorker(t.target),this.next()}))),t}returnWorker(t){this.workerPool.push(t)}complete(t){void 0!==t.error?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise(((r,n)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:n})}));return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[Sh]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Sh++,id:r})}};function Ih(t,e){const r=t.split("?")[0],n=ds.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n.toLowerCase()):n.toLowerCase()===e}function Mh(t,e,r){const n=new Ta(t);return n.baseTexture.on("dispose",(()=>{delete e.promiseCache[r]})),n}const kh=[".jpg",".png",".jpeg",".avif",".webp"];async function Dh(t){const e=await Ri.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const Oh={extension:{type:Pi.LoadParser,priority:_h.High},config:{preferWorkers:!0},test(t){let e=!1;for(let r=0;r<kh.length;r++)if(t.startsWith(`data:image/${kh[r].slice(1)}`)){e=!0;break}return e||Ih(t,kh)},async load(t,e,r){let n=null;n=globalThis.createImageBitmap?this.config.preferWorkers&&await Ph.isImageBitmapSupported()?await Ph.loadImageBitmap(t):await Dh(t):await new Promise((e=>{n=new Image,n.crossOrigin="anonymous",n.src=t,n.complete?e(n):n.onload=()=>{e(n)}}));const i=new ia(n,{resolution:Qs(t),...e.data});return i.resource.src=t,Mh(i,r,t)},unload(t){t.destroy(!0)}};Mi.add(Oh);const Nh={extension:{type:Pi.LoadParser,priority:_h.High},test:t=>ds.extname(t).includes(".svg"),testParse:async t=>fa.test(t),async parse(t,e,r){const n=new fa(t,e?.data?.resourceOptions),i=new ia(n,{resolution:Qs(t),...e?.data});i.resource.src=t;const s=Mh(i,r,t);return e?.data?.resourceOptions?.autoLoad||await n.load(),s},load:async(t,e)=>(await Ri.ADAPTER.fetch(t)).text(),unload:Oh.unload},Fh={extension:Pi.ResolveParser,test:Oh.test,parse:t=>({resolution:parseFloat(Ri.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};Mi.add(Fh);const Bh={extension:{type:Pi.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await Ri.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"avif"],remove:async t=>t.filter((t=>"avif"!==t))};Mi.add(Bh);const Lh={extension:{type:Pi.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await Ri.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"webp"],remove:async t=>t.filter((t=>"webp"!==t))};Mi.add(Lh);const Uh=["png","jpg","jpeg"],zh={extension:{type:Pi.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Uh],remove:async t=>t.filter((t=>!Uh.includes(t)))};Mi.add(zh);var Gh=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Gh||{});const Hh={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};class jh extends ea{constructor(t,e={width:1,height:1,autoLoad:!0}){let r,n;"string"==typeof t?(r=t,n=new Uint8Array):(r=null,n=t),super(n,e),this.origin=r,this.buffer=n?new yl(n):null,this.origin&&!1!==e.autoLoad&&this.load(),n?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const t=await fetch(this.origin),e=await t.blob(),r=await e.arrayBuffer();return this.data=new Uint32Array(r),this.buffer=new yl(r),this.loaded=!0,this.onBlobLoaded(r),this.update(),this}}class Xh extends jh{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Xh._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Xh._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,r){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let t=0,e=this.levels;t<e;t++){const{levelID:e,levelWidth:r,levelHeight:i,levelBuffer:s}=this._levelBuffers[t];n.compressedTexImage2D(n.TEXTURE_2D,e,this.format,r,i,0,s)}return!0}onBlobLoaded(){this._levelBuffers=Xh._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,r,n,i,s,a){const o=new Array(r);let l=t.byteOffset,h=s,u=a,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*Hh[e];for(let s=0;s<r;s++)o[s]={levelID:s,levelWidth:r>1?h:c,levelHeight:r>1?u:d,levelBuffer:new Uint8Array(t.buffer,l,f)},l+=f,h=h>>1||1,u=u>>1||1,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*Hh[e];return o}}let Wh,Vh;function Yh(){Vh={s3tc:Wh.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Wh.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Wh.getExtension("WEBGL_compressed_texture_etc"),etc1:Wh.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Wh.getExtension("WEBGL_compressed_texture_pvrtc")||Wh.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Wh.getExtension("WEBGL_compressed_texture_atc"),astc:Wh.getExtension("WEBGL_compressed_texture_astc")}}const $h={extension:{type:Pi.DetectionParser,priority:2},test:async()=>{const t=Ri.ADAPTER.createCanvas().getContext("webgl");return!!t&&(Wh=t,!0)},add:async t=>{Vh||Yh();const e=[];for(const t in Vh)Vh[t]&&e.push(t);return[...e,...t]},remove:async t=>(Vh||Yh(),t.filter((t=>!(t in Vh))))};Mi.add($h);const qh={827611204:Gh.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Gh.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Gh.COMPRESSED_RGBA_S3TC_DXT5_EXT},Kh={70:Gh.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Gh.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Gh.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Gh.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Gh.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Gh.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Gh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Gh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Gh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Qh(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),n=r[3],i=r[4],s=r[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),o=a[1];if(4&o){const r=a[2];if(808540228!==r){const e=qh[r],a=new Uint8Array(t,128);return[new Xh(a,{format:e,width:i,height:n,levels:s})]}const o=128,l=new Uint32Array(e.buffer,o,20/Uint32Array.BYTES_PER_ELEMENT),h=l[0],u=l[1],c=l[2],d=l[3],f=Kh[h];if(void 0===f)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(4===c)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=148;if(1===d)p.push(new Uint8Array(t,m));else{const e=Hh[f];let r=0,a=i,o=n;for(let t=0;t<s;t++)r+=Math.max(1,a+3&-4)*Math.max(1,o+3&-4)*e,a>>>=1,o>>>=1;let l=m;for(let e=0;e<d;e++)p.push(new Uint8Array(t,l,r)),l+=r}return p.map((t=>new Xh(t,{format:f,width:i,height:n,levels:s})))}if(64&o)throw new Error("DDSParser does not support uncompressed texture data.");if(512&o)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&o)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&o)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Zh=[171,75,84,88,32,49,49,187,13,10,26,10],Jh={[Qn.UNSIGNED_BYTE]:1,[Qn.UNSIGNED_SHORT]:2,[Qn.INT]:4,[Qn.UNSIGNED_INT]:4,[Qn.FLOAT]:4,[Qn.HALF_FLOAT]:8},tu={[qn.RGBA]:4,[qn.RGB]:3,[qn.RG]:2,[qn.RED]:1,[qn.LUMINANCE]:1,[qn.LUMINANCE_ALPHA]:2,[qn.ALPHA]:1},eu={[Qn.UNSIGNED_SHORT_4_4_4_4]:2,[Qn.UNSIGNED_SHORT_5_5_5_1]:2,[Qn.UNSIGNED_SHORT_5_6_5]:2};function ru(t,e,r=!1){const n=new DataView(e);if(!function(t,e){for(let t=0;t<Zh.length;t++)if(e.getUint8(t)!==Zh[t])return!1;return!0}(0,n))return null;const i=67305985===n.getUint32(12,!0),s=n.getUint32(16,i),a=n.getUint32(24,i),o=n.getUint32(28,i),l=n.getUint32(36,i),h=n.getUint32(40,i)||1,u=n.getUint32(44,i)||1,c=n.getUint32(48,i)||1,d=n.getUint32(52,i),f=n.getUint32(56,i),p=n.getUint32(60,i);if(0===h||1!==u)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");const m=l+3&-4,g=h+3&-4,_=new Array(c);let v,y=l*h;if(0===s&&(y=m*g),v=0!==s?Jh[s]?Jh[s]*tu[a]:eu[s]:Hh[o],void 0===v)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const x=r?function(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(64+i,r),a=64+i+4,o=3-(s+3)%4;if(0===s||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==t.getUint8(a+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=(new TextDecoder).decode(new Uint8Array(t.buffer,a,l)),u=new DataView(t.buffer,a+l+1,s-l-1);n.set(h,u),i+=4+s+o}return n}(n,p,i):null;let b=y*v,w=l,T=h,E=m,S=g,A=64+p;for(let t=0;t<f;t++){const r=n.getUint32(A,i);let a=A+4;for(let r=0;r<c;r++){let n=_[r];n||(n=_[r]=new Array(f)),n[t]={levelID:t,levelWidth:f>1||0!==s?w:E,levelHeight:f>1||0!==s?T:S,levelBuffer:new Uint8Array(e,a,b)},a+=b}A+=r+4,A=A%4!=0?A+4-A%4:A,w=w>>1||1,T=T>>1||1,E=w+4-1&-4,S=T+4-1&-4,b=E*S*v}return 0!==s?{uncompressed:_.map((t=>{let e=t[0].levelBuffer,r=!1;return s===Qn.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):s===Qn.UNSIGNED_INT?(r=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):s===Qn.INT&&(r=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new ea(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:s,format:r?nu(a):a}})),kvData:x}:{compressed:_.map((t=>new Xh(null,{format:o,width:l,height:h,levels:f,levelBuffers:t}))),kvData:x}}function nu(t){switch(t){case qn.RGBA:return qn.RGBA_INTEGER;case qn.RGB:return qn.RGB_INTEGER;case qn.RG:return qn.RG_INTEGER;case qn.RED:return qn.RED_INTEGER;default:return t}}const iu={extension:{type:Pi.LoadParser,priority:_h.High},test:t=>Ih(t,".dds"),async load(t,e,r){const n=await Ri.ADAPTER.fetch(t),i=Qh(await n.arrayBuffer()).map((n=>Mh(new ia(n,{mipmap:ei.OFF,alphaMode:ri.NO_PREMULTIPLIED_ALPHA,resolution:Qs(t),...e.data}),r,t)));return 1===i.length?i[0]:i},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};Mi.add(iu);const su={extension:{type:Pi.LoadParser,priority:_h.High},test:t=>Ih(t,".ktx"),async load(t,e,r){const n=await Ri.ADAPTER.fetch(t),i=await n.arrayBuffer(),{compressed:s,uncompressed:a,kvData:o}=ru(0,i),l=s??a,h={mipmap:ei.OFF,alphaMode:ri.NO_PREMULTIPLIED_ALPHA,resolution:Qs(t),...e.data},u=l.map((e=>{l===a&&Object.assign(h,{type:e.type,format:e.format});const n=new ia(e,h);return n.ktxKeyValueData=o,Mh(n,r,t)}));return 1===u.length?u[0]:u},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};Mi.add(su);const au={extension:Pi.ResolveParser,test:t=>{const e=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some((e=>t.endsWith(e))))return{resolution:parseFloat(Ri.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e.find((e=>t.endsWith(e))),src:t}}return{resolution:parseFloat(Ri.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};Mi.add(au);const ou=new Li,lu=class{constructor(t){this.renderer=t}async image(t,e,r){const n=new Image;return n.src=await this.base64(t,e,r),n}async base64(t,e,r){const n=this.canvas(t);if(void 0!==n.toDataURL)return n.toDataURL(e,r);if(void 0!==n.convertToBlob){const t=await n.convertToBlob({type:e,quality:r});return await new Promise((e=>{const r=new FileReader;r.onload=()=>e(r.result),r.readAsDataURL(t)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const r=this.renderer;let n,i,s=!1,a=!1;t&&(t instanceof Ea?i=t:(i=this.renderer.generateTexture(t),a=!0)),i?(n=i.baseTexture.resolution,e=e??i.frame,s=!1,r.renderTexture.bind(i)):(n=r.resolution,e||((e=ou).width=r.width,e.height=r.height),s=!0,r.renderTexture.bind(null));const o=Math.round(e.width*n),l=Math.round(e.height*n);let h=new Ws(o,l,1);const u=new Uint8Array(4*o*l),c=r.gl;c.readPixels(Math.round(e.x*n),Math.round(e.y*n),o,l,c.RGBA,c.UNSIGNED_BYTE,u);const d=h.context.getImageData(0,0,o,l);if(lu.arrayPostDivide(u,d.data),h.context.putImageData(d,0,0),s){const t=new Ws(h.width,h.height,1);t.context.scale(1,-1),t.context.drawImage(h.canvas,0,-l),h.destroy(),h=t}return a&&i.destroy(!0),h.canvas}pixels(t,e){const r=this.renderer;let n,i,s=!1;t&&(t instanceof Ea?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,e=e??i.frame,r.renderTexture.bind(i)):(n=r.resolution,e||((e=ou).width=r.width,e.height=r.height),r.renderTexture.bind(null));const a=Math.round(e.width*n),o=Math.round(e.height*n),l=new Uint8Array(4*a*o),h=r.gl;return h.readPixels(Math.round(e.x*n),Math.round(e.y*n),a,o,h.RGBA,h.UNSIGNED_BYTE,l),s&&i.destroy(!0),lu.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let r=0;r<t.length;r+=4){const n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}}};let hu=lu;hu.extension={name:"extract",type:Pi.RendererSystem},Mi.add(hu);var uu=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(uu||{}),cu=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(cu||{});const du={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class fu{constructor(){this.color=16777215,this.alpha=1,this.texture=Ta.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new fu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=Ta.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function pu(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let e=0,i=t[r-2],s=t[r-1];e<r;e+=2){const r=t[e],a=t[e+1];n+=(r-i)*(a+s),i=r,s=a}if(!e&&n>0||e&&n<=0){const e=r/2;for(let n=e+e%2;n<r;n+=2){const e=r-n-2,i=r-n-1,s=n,a=n+1;[t[e],t[s]]=[t[s],t[e]],[t[i],t[a]]=[t[a],t[i]]}}}const mu={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){pu(r,!1);const t=[];for(let e=0;e<n.length;e++){const i=n[e];pu(i.points,!0),t.push(r.length/2),r=r.concat(i.points)}const e=os(r,t,2);if(!e)return;const a=i.length/2;for(let t=0;t<e.length;t+=3)s.push(e[t]+a),s.push(e[t+1]+a),s.push(e[t+2]+a);for(let t=0;t<r.length;t++)i.push(r[t])}}},gu={build(t){const e=t.points;let r,n,i,s,a,o;if(t.type===Ni.CIRC){const e=t.shape;r=e.x,n=e.y,a=o=e.radius,i=s=0}else if(t.type===Ni.ELIP){const e=t.shape;r=e.x,n=e.y,a=e.width,o=e.height,i=s=0}else{const e=t.shape,l=e.width/2,h=e.height/2;r=e.x+l,n=e.y+h,a=o=Math.max(0,Math.min(e.radius,Math.min(l,h))),i=l-a,s=h-o}if(!(a>=0&&o>=0&&i>=0&&s>=0))return void(e.length=0);const l=Math.ceil(2.3*Math.sqrt(a+o)),h=8*l+(i?4:0)+(s?4:0);if(e.length=h,0===h)return;if(0===l)return e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,void(e[5]=e[7]=n-s);let u=0,c=4*l+(i?2:0)+2,d=c,f=h;{const t=i+a,o=s,l=r+t,h=r-t,p=n+o;if(e[u++]=l,e[u++]=p,e[--c]=p,e[--c]=h,s){const t=n-o;e[d++]=h,e[d++]=t,e[--f]=t,e[--f]=l}}for(let t=1;t<l;t++){const h=Math.PI/2*(t/l),p=i+Math.cos(h)*a,m=s+Math.sin(h)*o,g=r+p,_=r-p,v=n+m,y=n-m;e[u++]=g,e[u++]=v,e[--c]=v,e[--c]=_,e[d++]=_,e[d++]=y,e[--f]=y,e[--f]=g}{const t=s+o,a=r+i,l=r-i,h=n+t,c=n-t;e[u++]=a,e[u++]=h,e[--f]=c,e[--f]=a,i&&(e[u++]=l,e[u++]=h,e[--f]=c,e[--f]=l)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(0===r.length)return;let s=n.length/2;const a=s;let o,l;if(t.type!==Ni.RREC){const e=t.shape;o=e.x,l=e.y}else{const e=t.shape;o=e.x+e.width/2,l=e.y+e.height/2}const h=t.matrix;n.push(t.matrix?h.a*o+h.c*l+h.tx:o,t.matrix?h.b*o+h.d*l+h.ty:l),s++,n.push(r[0],r[1]);for(let t=2;t<r.length;t+=2)n.push(r[t],r[t+1]),i.push(s++,a,s);i.push(a+1,a,s)}},_u={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,a=t.points;a.length=0,i>=0&&s>=0&&a.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(0===r.length)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},vu={build(t){gu.build(t)},triangulate(t,e){gu.triangulate(t,e)}};function yu(t,e,r,n,i,s,a,o){let l,h;a?(l=n,h=-r):(l=-n,h=r);const u=t-r*i+l,c=e-n*i+h,d=t+r*s+l,f=e+n*s+h;return o.push(u,c),o.push(d,f),2}function xu(t,e,r,n,i,s,a,o){const l=r-t,h=n-e;let u=Math.atan2(l,h),c=Math.atan2(i-t,s-e);o&&u<c?u+=2*Math.PI:!o&&u>c&&(c+=2*Math.PI);let d=u;const f=c-u,p=Math.abs(f),m=Math.sqrt(l*l+h*h),g=1+(15*p*Math.sqrt(m)/Math.PI>>0),_=f/g;if(d+=_,o){a.push(t,e),a.push(r,n);for(let r=1,n=d;r<g;r++,n+=_)a.push(t,e),a.push(t+Math.sin(n)*m,e+Math.cos(n)*m);a.push(t,e),a.push(i,s)}else{a.push(r,n),a.push(t,e);for(let r=1,n=d;r<g;r++,n+=_)a.push(t+Math.sin(n)*m,e+Math.cos(n)*m),a.push(t,e);a.push(i,s),a.push(t,e)}return 2*g}function bu(t,e){t.lineStyle.native?function(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==Ni.POLY||n.closeStroke;if(0===i.length)return;const a=e.points,o=e.indices,l=i.length/2,h=a.length/2;let u=h;for(a.push(i[0],i[1]),r=1;r<l;r++)a.push(i[2*r],i[2*r+1]),o.push(u,u+1),u++;s&&o.push(u,h)}(t,e):function(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(0===n.length)return;const s=t.lineStyle,a=new Fi(n[0],n[1]),o=new Fi(n[n.length-2],n[n.length-1]),l=r.type!==Ni.POLY||r.closeStroke,h=Math.abs(a.x-o.x)<i&&Math.abs(a.y-o.y)<i;if(l){n=n.slice(),h&&(n.pop(),n.pop(),o.set(n[n.length-2],n[n.length-1]));const t=.5*(a.x+o.x),e=.5*(o.y+a.y);n.unshift(t,e),n.push(t,e)}const u=e.points,c=n.length/2;let d=n.length;const f=u.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit;let _=n[0],v=n[1],y=n[2],x=n[3],b=0,w=0,T=-(v-x),E=_-y,S=0,A=0,C=Math.sqrt(T*T+E*E);T/=C,E/=C,T*=p,E*=p;const R=s.alignment,P=2*(1-R),I=2*R;l||(s.cap===cu.ROUND?d+=xu(_-T*(P-I)*.5,v-E*(P-I)*.5,_-T*P,v-E*P,_+T*I,v+E*I,u,!0)+2:s.cap===cu.SQUARE&&(d+=yu(_,v,T,E,P,I,!0,u))),u.push(_-T*P,v-E*P),u.push(_+T*I,v+E*I);for(let t=1;t<c-1;++t){_=n[2*(t-1)],v=n[2*(t-1)+1],y=n[2*t],x=n[2*t+1],b=n[2*(t+1)],w=n[2*(t+1)+1],T=-(v-x),E=_-y,C=Math.sqrt(T*T+E*E),T/=C,E/=C,T*=p,E*=p,S=-(x-w),A=y-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p;const e=y-_,r=v-x,i=y-b,a=w-x,o=e*i+r*a,l=r*i-a*e,h=l<0;if(Math.abs(l)<.001*Math.abs(o)){u.push(y-T*P,x-E*P),u.push(y+T*I,x+E*I),o>=0&&(s.join===uu.ROUND?d+=xu(y,x,y-T*P,x-E*P,y-S*P,x-A*P,u,!1)+4:d+=2,u.push(y-S*I,x-A*I),u.push(y+S*P,x+A*P));continue}const c=(-T+_)*(-E+x)-(-T+y)*(-E+v),f=(-S+b)*(-A+x)-(-S+y)*(-A+w),R=(e*f-i*c)/l,M=(a*c-r*f)/l,k=(R-y)*(R-y)+(M-x)*(M-x),D=y+(R-y)*P,O=x+(M-x)*P,N=y-(R-y)*I,F=x-(M-x)*I,B=h?P:I;k<=Math.min(e*e+r*r,i*i+a*a)+B*B*m?s.join===uu.BEVEL||k/m>g?(h?(u.push(D,O),u.push(y+T*I,x+E*I),u.push(D,O),u.push(y+S*I,x+A*I)):(u.push(y-T*P,x-E*P),u.push(N,F),u.push(y-S*P,x-A*P),u.push(N,F)),d+=2):s.join===uu.ROUND?h?(u.push(D,O),u.push(y+T*I,x+E*I),d+=xu(y,x,y+T*I,x+E*I,y+S*I,x+A*I,u,!0)+4,u.push(D,O),u.push(y+S*I,x+A*I)):(u.push(y-T*P,x-E*P),u.push(N,F),d+=xu(y,x,y-T*P,x-E*P,y-S*P,x-A*P,u,!1)+4,u.push(y-S*P,x-A*P),u.push(N,F)):(u.push(D,O),u.push(N,F)):(u.push(y-T*P,x-E*P),u.push(y+T*I,x+E*I),s.join===uu.ROUND?d+=h?xu(y,x,y+T*I,x+E*I,y+S*I,x+A*I,u,!0)+2:xu(y,x,y-T*P,x-E*P,y-S*P,x-A*P,u,!1)+2:s.join===uu.MITER&&k/m<=g&&(h?(u.push(N,F),u.push(N,F)):(u.push(D,O),u.push(D,O)),d+=2),u.push(y-S*P,x-A*P),u.push(y+S*I,x+A*I),d+=2)}_=n[2*(c-2)],v=n[2*(c-2)+1],y=n[2*(c-1)],x=n[2*(c-1)+1],T=-(v-x),E=_-y,C=Math.sqrt(T*T+E*E),T/=C,E/=C,T*=p,E*=p,u.push(y-T*P,x-E*P),u.push(y+T*I,x+E*I),l||(s.cap===cu.ROUND?d+=xu(y-T*(P-I)*.5,x-E*(P-I)*.5,y-T*P,x-E*P,y+T*I,x+E*I,u,!1)+2:s.cap===cu.SQUARE&&(d+=yu(y,x,T,E,P,I,!1,u)));const M=e.indices,k=du.epsilon*du.epsilon;for(let t=f;t<d+f-2;++t)_=u[2*t],v=u[2*t+1],y=u[2*(t+1)],x=u[2*(t+1)+1],b=u[2*(t+2)],w=u[2*(t+2)+1],Math.abs(_*(x-w)+y*(w-v)+b*(v-x))<k||M.push(t,t+1,t+2)}(t,e)}class wu{static curveTo(t,e,r,n,i,s){const a=s[s.length-2],o=s[s.length-1]-e,l=a-t,h=n-e,u=r-t,c=Math.abs(o*u-l*h);if(c<1e-8||0===i)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;const d=o*o+l*l,f=h*h+u*u,p=o*h+l*u,m=i*Math.sqrt(d)/c,g=i*Math.sqrt(f)/c,_=m*p/d,v=g*p/f,y=m*u+g*l,x=m*h+g*o,b=l*(g+_),w=o*(g+_),T=u*(m+v),E=h*(m+v);return{cx:y+t,cy:x+e,radius:i,startAngle:Math.atan2(w-x,b-y),endAngle:Math.atan2(E-x,T-y),anticlockwise:l*h>u*o}}static arc(t,e,r,n,i,s,a,o,l){const h=a-s,u=du._segmentsCount(Math.abs(h)*i,40*Math.ceil(Math.abs(h)/ki)),c=h/(2*u),d=2*c,f=Math.cos(c),p=Math.sin(c),m=u-1,g=m%1/m;for(let t=0;t<=m;++t){const e=c+s+d*(t+g*t),a=Math.cos(e),o=-Math.sin(e);l.push((f*a+p*o)*i+r,(f*-o+p*a)*i+n)}}}class Tu{static curveLength(t,e,r,n,i,s,a,o){let l=0,h=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,_=0,v=0,y=t,x=e;for(let b=1;b<=10;++b)h=b/10,u=h*h,c=u*h,d=1-h,f=d*d,p=f*d,m=p*t+3*f*h*r+3*d*u*i+c*a,g=p*e+3*f*h*n+3*d*u*s+c*o,_=y-m,v=x-g,y=m,x=g,l+=Math.sqrt(_*_+v*v);return l}static curveTo(t,e,r,n,i,s,a){const o=a[a.length-2],l=a[a.length-1];a.length-=2;const h=du._segmentsCount(Tu.curveLength(o,l,t,e,r,n,i,s));let u=0,c=0,d=0,f=0,p=0;a.push(o,l);for(let m=1,g=0;m<=h;++m)g=m/h,u=1-g,c=u*u,d=c*u,f=g*g,p=f*g,a.push(d*o+3*c*g*t+3*u*f*r+p*i,d*l+3*c*g*e+3*u*f*n+p*s)}}class Eu{static curveLength(t,e,r,n,i,s){const a=t-2*r+i,o=e-2*n+s,l=2*r-2*t,h=2*n-2*e,u=4*(a*a+o*o),c=4*(a*l+o*h),d=l*l+h*h,f=2*Math.sqrt(u+c+d),p=Math.sqrt(u),m=2*u*p,g=2*Math.sqrt(d),_=c/p;return(m*f+p*c*(f-g)+(4*d*u-c*c)*Math.log((2*p+_+f)/(_+g)))/(4*m)}static curveTo(t,e,r,n,i){const s=i[i.length-2],a=i[i.length-1],o=du._segmentsCount(Eu.curveLength(s,a,t,e,r,n));let l=0,h=0;for(let u=1;u<=o;++u){const c=u/o;l=s+(t-s)*c,h=a+(e-a)*c,i.push(l+(t+(r-t)*c-l)*c,h+(e+(n-e)*c-h)*c)}}}const Su={[Ni.POLY]:mu,[Ni.CIRC]:gu,[Ni.ELIP]:gu,[Ni.RECT]:_u,[Ni.RREC]:vu},Au=[],Cu=[];class Ru{constructor(t,e=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new Ru(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class Pu{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Iu=new Fi,Mu=class extends bl{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ol,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Cu.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Au.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const i=new Ru(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new Ru(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,Iu):Iu.copyFrom(t),n.shape.contains(Iu.x,Iu.y))){let t=!1;if(n.holes)for(let e=0;e<n.holes.length;e++)if(n.holes[e].shape.contains(Iu.x,Iu.y)){t=!0;break}if(!t)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let i=this.shapeIndex;i<e.length;i++){this.shapeIndex++;const s=e[i],a=s.fillStyle,o=s.lineStyle;Su[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(a.visible||o.visible)&&this.processHoles(s.holes);for(let e=0;e<2;e++){const i=0===e?a:o;if(!i.visible)continue;const l=i.texture.baseTexture,h=this.indices.length,u=this.points.length/2;l.wrapMode=ti.REPEAT,0===e?this.processFill(s):this.processLine(s);const c=this.points.length/2-u;0!==c&&(r&&!this._compareStyles(n,i)&&(r.end(h,u),r=null),r||(r=Au.pop()||new Pu,r.begin(i,h,u),this.batches.push(r),n=i),this.addUvs(this.points,t,i.texture,u,c,i.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),0===this.batches.length)return void(this.batchable=!0);const a=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const e=this.graphicsData[t],r=e.fillStyle,n=e.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const r=t[e];for(let t=0;t<r.size;t++){const e=r.start+t;this.indicesUint16[e]=this.indicesUint16[e]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*Mu.BATCHABLE_SIZE}buildDrawCalls(){let t=++ia._globalBatch;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Cu.push(this.drawCalls[t]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=Cu.pop();n||(n=new _l,n.texArray=new vl),n.texArray.count=0,n.start=0,n.size=0,n.type=$n.TRIANGLES;let i=0,s=null,a=0,o=!1,l=$n.TRIANGLES,h=0;this.drawCalls.push(n);for(let u=0;u<this.batches.length;u++){const c=this.batches[u],d=8,f=c.style,p=f.texture.baseTexture;o!==!!f.native&&(o=!!f.native,l=o?$n.LINES:$n.TRIANGLES,s=null,i=d,t++),s!==p&&(s=p,p._batchEnabled!==t&&(i===d&&(t++,i=0,n.size>0&&(n=Cu.pop(),n||(n=new _l,n.texArray=new vl),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=ti.REPEAT,n.texArray.elements[n.texArray.count++]=p,i++)),n.size+=c.size,h+=c.size,a=p._batchLocation,this.addColors(e,f.color,f.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,a,c.attribSize,c.attribStart)}ia._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*t.length*4),s=new Float32Array(i),a=new Uint32Array(i);let o=0;for(let i=0;i<t.length/2;i++)s[o++]=t[2*i],s[o++]=t[2*i+1],s[o++]=e[2*i],s[o++]=e[2*i+1],a[o++]=r[i],s[o++]=n[i];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?mu.triangulate(t,this):Su[t.type].triangulate(t,this)}processLine(t){bu(t,this);for(let e=0;e<t.holes.length;e++)bu(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];Su[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}}addColors(t,e,r,n,i=0){const s=Ss((e>>16)+(65280&e)+((255&e)<<16),r);t.length=Math.max(t.length,i+n);for(let e=0;e<n;e++)t[i+e]=s}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let i=0;i<r;i++)t[n+i]=e}addUvs(t,e,r,n,i,s=null){let a=0;const o=e.length,l=r.frame;for(;a<i;){let r=t[2*(n+a)],i=t[2*(n+a)+1];if(s){const t=s.a*r+s.c*i+s.tx;i=s.b*r+s.d*i+s.ty,r=t}a++,e.push(r/l.width,i/l.height)}const h=r.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(e,r,o,i)}adjustUvs(t,e,r,n){const i=e.baseTexture,s=1e-6,a=r+2*n,o=e.frame,l=o.width/i.width,h=o.height/i.height;let u=o.x/o.width,c=o.y/o.height,d=Math.floor(t[r]+s),f=Math.floor(t[r+1]+s);for(let e=r+2;e<a;e+=2)d=Math.min(d,Math.floor(t[e]+s)),f=Math.min(f,Math.floor(t[e+1]+s));u-=d,c-=f;for(let e=r;e<a;e+=2)t[e]=(t[e]+u)*l,t[e+1]=(t[e+1]+c)*h}};let ku=Mu;ku.BATCHABLE_SIZE=100;class Du extends fu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=cu.BUTT,this.join=uu.MITER,this.miterLimit=10}clone(){const t=new Du;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Ou=new Float32Array(3),Nu={},Fu=class extends Ll{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new fu,this._lineStyle=new Du,this._matrix=null,this._holeMode=!1,this.state=yo.for2d(),this._geometry=t||new ku,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=Yn.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Fu(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r=1,n=.5,i=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:Ta.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:cu.BUTT,join:uu.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Gi,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Gi,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Eu.curveTo(t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,s){return this._initCurve(),Tu.curveTo(t,e,r,n,i,s,this.currentPath.points),this}arcTo(t,e,r,n,i){this._initCurve(t,e);const s=this.currentPath.points,a=wu.curveTo(t,e,r,n,i,s);if(a){const{cx:t,cy:e,radius:r,startAngle:n,endAngle:i,anticlockwise:s}=a;this.arc(t,e,r,n,i,s)}return this}arc(t,e,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=ki:s&&n<=i&&(n+=ki),0==i-n)return this;const a=t+Math.cos(n)*r,o=e+Math.sin(n)*r,l=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const t=Math.abs(h[h.length-2]-a),e=Math.abs(h[h.length-1]-o);t<l&&e<l||h.push(a,o)}else this.moveTo(a,o),h=this.currentPath.points;return wu.arc(a,o,t,e,r,n,i,s,h),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:Ta.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:Ta.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new Li(t,e,r,n))}drawRoundedRect(t,e,r,n,i){return this.drawShape(new Hi(t,e,r,n,i))}drawCircle(t,e,r){return this.drawShape(new Ui(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new zi(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):e=Array.isArray(t[0])?t[0]:t;const i=new Gi(e);return i.closeStroke=r,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Ni.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const r=t.batches[n],i=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),o={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:vs(i),_tintRGB:i,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=o}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.tint,i=this.worldAlpha,s=e.uniforms,a=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*i,s.tint[1]=(n>>8&255)/255*i,s.tint[2]=(255&n)/255*i,s.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let e=0,n=a.length;e<n;e++)this._renderDrawCallDirect(t,r.drawCalls[e])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:i,start:s}=e,a=r.count;for(let e=0;e<a;e++)t.texture.bind(r.elements[e],e);t.geometry.draw(n,i,s)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!Nu[r]){const{MAX_TEXTURES:e}=t.plugins[r],n=new Int32Array(e);for(let t=0;t<e;t++)n[t]=t;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xi,default:Ba.from({uSamplers:n},!0)},s=t.plugins[r]._shader.program;Nu[r]=new vo(s,i)}e=Nu[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,Fu._TEMP_POINT),this._geometry.containsPoint(Fu._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=vs(this.tint,Ou);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],n=r._batchRGB,i=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,a=e.tx,o=e.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let t=0;t<l.length;t+=2){const e=l[t],c=l[t+1];h[u++]=r*e+i*c+a,h[u++]=s*c+n*e+o}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Bu=Fu;Bu._TEMP_POINT=new Fi;const Lu={buildPoly:mu,buildCircle:gu,buildRectangle:_u,buildRoundedRectangle:vu,buildLine:bu,ArcUtils:wu,BezierUtils:Tu,QuadraticUtils:Eu,BatchPart:Pu,FILL_COMMANDS:Su,BATCH_POOL:Au,DRAW_CALL_POOL:Cu};class Uu{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const zu=new Fi,Gu=new Gi,Hu=class extends Ll{constructor(t,e,r,n=$n.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||yo.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Ri.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===$n.TRIANGLES&&e.length<2*Hu.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,l=n.tx,h=n.ty,u=this.vertexData;for(let t=0;t<u.length/2;t++){const r=e[2*t],n=e[2*t+1];u[2*t]=i*r+a*n+l,u[2*t+1]=s*r+o*n+h}if(this._roundPixels){const t=Ri.RESOLUTION;for(let e=0;e<u.length;++e)u[e]=Math.round(u[e]*t)/t}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Uu(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,zu);const e=this.geometry.getBuffer("aVertexPosition").data,r=Gu.points,n=this.geometry.getIndex().data,i=n.length,s=4===this.drawMode?3:1;for(let t=0;t+2<i;t+=s){const i=2*n[t],s=2*n[t+1],a=2*n[t+2];if(r[0]=e[i],r[1]=e[i+1],r[2]=e[s],r[3]=e[s+1],r[4]=e[a],r[5]=e[a+1],Gu.contains(zu.x,zu.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ju=Hu;ju.BATCHABLE_SIZE=100;class Xu extends vo{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:Xi.IDENTITY,uColor:new Float32Array([1,1,1,1])};(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(r,e.uniforms),super(e.program||_o.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new wo(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;As(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Wu extends Da{constructor(t,e,r){super();const n=new Ra(t),i=new Ra(e,!0),s=new Ra(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,Qn.FLOAT).addAttribute("aTextureCoord",i,2,!1,Qn.FLOAT).addIndex(s),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class Vu extends Wu{constructor(t=100,e=100,r=10,n=10){super(),this.segWidth=r,this.segHeight=n,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],r=[],n=[],i=this.segWidth-1,s=this.segHeight-1,a=this.width/i,o=this.height/s;for(let n=0;n<t;n++){const t=n%this.segWidth,l=n/this.segWidth|0;e.push(t*a,l*o),r.push(t/i,l/s)}const l=i*s;for(let t=0;t<l;t++){const e=t%i,r=t/i|0,s=r*this.segWidth+e,a=r*this.segWidth+e+1,o=(r+1)*this.segWidth+e,l=(r+1)*this.segWidth+e+1;n.push(s,a,o,a,l,o)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class Yu extends Wu{constructor(t=200,e,r=0){super(new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1))),this.points=e,this._width=t,this.textureScale=r,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));const i=r.data,s=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;let a=0,o=t[0];const l=this._width*this.textureScale,h=t.length;for(let e=0;e<h;e++){const r=4*e;if(this.textureScale>0){const r=o.x-t[e].x,n=o.y-t[e].y,i=Math.sqrt(r*r+n*n);o=t[e],a+=i/l}else a=e/(h-1);i[r]=a,i[r+1]=0,i[r+2]=a,i[r+3]=1}let u=0;for(let t=0;t<h-1;t++){const e=2*t;s[u++]=e,s[u++]=e+1,s[u++]=e+2,s[u++]=e+2,s[u++]=e+1,s[u++]=e+3}r.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e,r=t[0],n=0,i=0;const s=this.buffers[0].data,a=t.length;for(let o=0;o<a;o++){const l=t[o],h=4*o;e=o<t.length-1?t[o+1]:l,i=-(e.x-r.x),n=e.y-r.y;let u=10*(1-o/(a-1));u>1&&(u=1);const c=Math.sqrt(n*n+i*i),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=c,i/=c,n*=d,i*=d,s[h]=l.x+n,s[h+1]=l.y+i,s[h+2]=l.x-n,s[h+3]=l.y-i,r=l}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class $u extends ju{constructor(t,e,r=0){const n=new Yu(t.height,e,r),i=new Xu(t);r>0&&(t.baseTexture.wrapMode=ti.REPEAT),super(n,i),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class qu extends ju{constructor(t,e,r){super(new Vu(t.width,t.height,e,r),new Xu(Ta.WHITE)),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:r}=this.shader.texture;!this.autoResize||t.width===e&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}class Ku extends ju{constructor(t=Ta.EMPTY,e,r,n,i){const s=new Wu(e,r,n);s.getBuffer("aVertexPosition").static=!1,super(s,new Xu(t),null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class Qu extends qu{constructor(t,e=10,r=10,n=10,i=10){super(Ta.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e,this._rightWidth=n,this._topHeight=r,this._bottomHeight=i,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(e,n)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class Zu extends Ll{constructor(t=1500,e,r=16384,n=!1){super(),r>16384&&(r=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Yn.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tint}set tint(t){this._tint=t,vs(t,this.tintRgb)}render(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(()=>this.onChildrenChange(0)))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Ju{constructor(t,e,r){this.geometry=new Da,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||Qn.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Ra(Cs(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let t=0;t<this.dynamicProperties.length;++t){const r=this.dynamicProperties[t];r.offset=e,e+=r.size,this.dynamicStride+=r.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Ra(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let t=0;t<this.staticProperties.length;++t){const e=this.staticProperties[t];e.offset=n,n+=e.size,this.staticStride+=e.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new Ra(this.staticData,!0,!1);for(let e=0;e<this.dynamicProperties.length;++e){const r=this.dynamicProperties[e];t.addAttribute(r.attributeName,this.dynamicBuffer,0,r.type===Qn.UNSIGNED_BYTE,r.type,4*this.dynamicStride,4*r.offset)}for(let e=0;e<this.staticProperties.length;++e){const r=this.staticProperties[e];t.addAttribute(r.attributeName,this.staticBuffer,0,r.type===Qn.UNSIGNED_BYTE,r.type,4*this.staticStride,4*r.offset)}}uploadDynamic(t,e,r){for(let n=0;n<this.dynamicProperties.length;n++){const i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.type===Qn.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,r){for(let n=0;n<this.staticProperties.length;n++){const i=this.staticProperties[n];i.uploadFunction(t,e,r,i.type===Qn.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class tc extends Ha{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Xi,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Qn.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=vo.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=yo.for2d()}render(t){const e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer;let s=e.length;if(0===s)return;s>r&&!t.autoResize&&(s=r);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const o=e[0]._texture.baseTexture,l=o.alphaMode>0;this.state.blendMode=Ts(t.blendMode,l),i.state.set(this.state);const h=i.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Es(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);let c=!1;for(let r=0,o=0;r<s;r+=n,o+=1){let l=s-r;l>n&&(l=n),o>=a.length&&a.push(this._generateOneMoreBuffer(t));const u=a[o];u.uploadDynamic(e,r,l);const d=t._bufferUpdateIDs[o]||0;c=c||u._updateID<d,c&&(u._updateID=t._updateID,u.uploadStatic(e,r,l)),i.geometry.bind(u.geometry),h.drawElements(h.TRIANGLES,6*l,h.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],r=t._maxSize,n=t._batchSize,i=t._properties;for(let t=0;t<r;t+=n)e.push(new Ju(this.properties,i,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,r=t._properties;return new Ju(this.properties,r,e)}uploadVertices(t,e,r,n,i,s){let a=0,o=0,l=0,h=0;for(let u=0;u<r;++u){const r=t[e+u],c=r._texture,d=r.scale.x,f=r.scale.y,p=c.trim,m=c.orig;p?(o=p.x-r.anchor.x*m.width,a=o+p.width,h=p.y-r.anchor.y*m.height,l=h+p.height):(a=m.width*(1-r.anchor.x),o=m.width*-r.anchor.x,l=m.height*(1-r.anchor.y),h=m.height*-r.anchor.y),n[s]=o*d,n[s+1]=h*f,n[s+i]=a*d,n[s+i+1]=h*f,n[s+2*i]=a*d,n[s+2*i+1]=l*f,n[s+3*i]=o*d,n[s+3*i+1]=l*f,s+=4*i}}uploadPosition(t,e,r,n,i,s){for(let a=0;a<r;a++){const r=t[e+a].position;n[s]=r.x,n[s+1]=r.y,n[s+i]=r.x,n[s+i+1]=r.y,n[s+2*i]=r.x,n[s+2*i+1]=r.y,n[s+3*i]=r.x,n[s+3*i+1]=r.y,s+=4*i}}uploadRotation(t,e,r,n,i,s){for(let a=0;a<r;a++){const r=t[e+a].rotation;n[s]=r,n[s+i]=r,n[s+2*i]=r,n[s+3*i]=r,s+=4*i}}uploadUvs(t,e,r,n,i,s){for(let a=0;a<r;++a){const r=t[e+a]._texture._uvs;r?(n[s]=r.x0,n[s+1]=r.y0,n[s+i]=r.x1,n[s+i+1]=r.y1,n[s+2*i]=r.x2,n[s+2*i+1]=r.y2,n[s+3*i]=r.x3,n[s+3*i+1]=r.y3,s+=4*i):(n[s]=0,n[s+1]=0,n[s+i]=0,n[s+i+1]=0,n[s+2*i]=0,n[s+2*i+1]=0,n[s+3*i]=0,n[s+3*i+1]=0,s+=4*i)}}uploadTint(t,e,r,n,i,s){for(let a=0;a<r;++a){const r=t[e+a],o=r._texture.baseTexture.alphaMode>0,l=r.alpha,h=l<1&&o?Ss(r._tintRGB,l):r._tintRGB+(255*l<<24);n[s]=h,n[s+i]=h,n[s+2*i]=h,n[s+3*i]=h,s+=4*i}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}tc.extension={name:"particle",type:Pi.RendererPlugin},Mi.add(tc),Ri.UPLOADS_PER_FRAME=4;var ec=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(ec||{});const rc={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ec.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},nc=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class ic{constructor(t){this.styleID=0,this.reset(),oc(this,t,t)}clone(){const t={};return oc(t,this,rc),new ic(t)}reset(){oc(this,rc,rc)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=ac(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=ac(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=ac(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let t=e.length-1;t>=0;t--){let r=e[t].trim();/([\"\'])[^\'\"]+\1/.test(r)||nc.includes(r)||(r=`"${r}"`),e[t]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}}function sc(t){return"number"==typeof t?ys(t):("string"==typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function ac(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=sc(t[e]);return t}return sc(t)}function oc(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const lc={willReadFrequently:!0};class hc{constructor(t,e,r,n,i,s,a,o,l){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=l}static measureText(t,e,r,n=hc._canvas){r=null==r?e.wordWrap:r;const i=e.toFontString(),s=hc.measureFont(i);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const a=n.getContext("2d",lc);a.font=i;const o=(r?hc.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),l=new Array(o.length);let h=0;for(let t=0;t<o.length;t++){const r=a.measureText(o[t]).width+(o[t].length-1)*e.letterSpacing;l[t]=r,h=Math.max(h,r)}let u=h+e.strokeThickness;e.dropShadow&&(u+=e.dropShadowDistance);const c=e.lineHeight||s.fontSize+e.strokeThickness;let d=Math.max(c,s.fontSize+e.strokeThickness)+(o.length-1)*(c+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new hc(t,e,u,d,o,l,c+e.leading,h,s)}static wordWrap(t,e,r=hc._canvas){const n=r.getContext("2d",lc);let i=0,s="",a="";const o=Object.create(null),{letterSpacing:l,whiteSpace:h}=e,u=hc.collapseSpaces(h),c=hc.collapseNewlines(h);let d=!u;const f=e.wordWrapWidth+l,p=hc.tokenize(t);for(let t=0;t<p.length;t++){let r=p[t];if(hc.isNewline(r)){if(!c){a+=hc.addLine(s),d=!u,s="",i=0;continue}r=" "}if(u){const t=hc.isBreakingSpace(r),e=hc.isBreakingSpace(s[s.length-1]);if(t&&e)continue}const h=hc.getFromCache(r,l,o,n);if(h>f)if(""!==s&&(a+=hc.addLine(s),s="",i=0),hc.canBreakWords(r,e.breakWords)){const t=hc.wordWrapSplit(r);for(let h=0;h<t.length;h++){let u=t[h],c=1;for(;t[h+c];){const n=t[h+c],i=u[u.length-1];if(hc.canBreakChars(i,n,r,h,e.breakWords))break;u+=n,c++}h+=u.length-1;const p=hc.getFromCache(u,l,o,n);p+i>f&&(a+=hc.addLine(s),d=!1,s="",i=0),s+=u,i+=p}}else{s.length>0&&(a+=hc.addLine(s),s="",i=0);const e=t===p.length-1;a+=hc.addLine(r,!e),d=!1,s="",i=0}else h+i>f&&(d=!1,a+=hc.addLine(s),s="",i=0),(s.length>0||!hc.isBreakingSpace(r)||d)&&(s+=r,i+=h)}return a+=hc.addLine(s,!1),a}static addLine(t,e=!0){return t=hc.trimRight(t),e?`${t}\n`:t}static getFromCache(t,e,r,n){let i=r[t];if("number"!=typeof i){const s=t.length*e;i=n.measureText(t).width+s,r[t]=i}return i}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!=typeof t)return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!hc.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&hc._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"==typeof t&&hc._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if("string"!=typeof t)return e;for(let n=0;n<t.length;n++){const i=t[n],s=t[n+1];hc.isBreakingSpace(i,s)||hc.isNewline(i)?(""!==r&&(e.push(r),r=""),e.push(i)):r+=i}return""!==r&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(t){return t.split("")}static measureFont(t){if(hc._fonts[t])return hc._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=hc._canvas,n=hc._context;n.font=t;const i=hc.METRICS_STRING+hc.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let a=Math.ceil(n.measureText(hc.BASELINE_SYMBOL).width);const o=Math.ceil(hc.HEIGHT_MULTIPLIER*a);a=a*hc.BASELINE_MULTIPLIER|0,r.width=s,r.height=o,n.fillStyle="#f00",n.fillRect(0,0,s,o),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a);const l=n.getImageData(0,0,s,o).data,h=l.length,u=4*s;let c=0,d=0,f=!1;for(c=0;c<a;++c){for(let t=0;t<u;t+=4)if(255!==l[d+t]){f=!0;break}if(f)break;d+=u}for(e.ascent=a-c,d=h-u,f=!1,c=o;c>a;--c){for(let t=0;t<u;t+=4)if(255!==l[d+t]){f=!0;break}if(f)break;d-=u}return e.descent=c-a,e.fontSize=e.ascent+e.descent,hc._fonts[t]=e,e}static clearMetrics(t=""){t?delete hc._fonts[t]:hc._fonts={}}static get _canvas(){if(!hc.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",lc)?.measureText)return hc.__canvas=e,e;t=Ri.ADAPTER.createCanvas()}catch(e){t=Ri.ADAPTER.createCanvas()}t.width=t.height=10,hc.__canvas=t}return hc.__canvas}static get _context(){return hc.__context||(hc.__context=hc._canvas.getContext("2d",lc)),hc.__context}}hc._fonts={},hc.METRICS_STRING="|ÉqÅ",hc.BASELINE_SYMBOL="M",hc.BASELINE_MULTIPLIER=1.4,hc.HEIGHT_MULTIPLIER=2,hc._newlines=[10,13],hc._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const uc={texture:!0,children:!1,baseTexture:!0},cc=class extends Gl{constructor(t,e,r){let n=!1;r||(r=Ri.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=Ta.from(r);i.orig=new Li,i.trim=new Li,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=Ri.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=hc.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,a=n.lines,o=n.lineHeight,l=n.lineWidths,h=n.maxLineWidth,u=n.fontProperties;let c,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;const f=e.dropShadow?2:1;for(let t=0;t<f;++t){const i=e.dropShadow&&0===t,f=i?Math.ceil(Math.max(1,s)+2*e.padding):0,p=f*this._resolution;if(i){r.fillStyle="black",r.strokeStyle="black";const t=e.dropShadowColor,n=vs("number"==typeof t?t:xs(t)),i=e.dropShadowBlur*this._resolution,s=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${e.dropShadowAlpha})`,r.shadowBlur=i,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*s,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*s+p}else r.fillStyle=this._generateFillStyle(e,a,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let m=(o-u.fontSize)/2;o-u.fontSize<0&&(m=0);for(let t=0;t<a.length;t++)c=e.strokeThickness/2,d=e.strokeThickness/2+t*o+u.ascent+m,"right"===e.align?c+=h-l[t]:"center"===e.align&&(c+=(h-l[t])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[t],c+e.padding,d+e.padding-f,!0),e.fill&&this.drawLetterSpacing(a[t],c+e.padding,d+e.padding-f)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const i=this._style.letterSpacing,s=cc.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===i||s)return s&&(this.context.letterSpacing=i,this.context.textLetterSpacing=i),void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));let a=e;const o=Array.from?Array.from(t):t.split("");let l=this.context.measureText(t).width,h=0;for(let t=0;t<o.length;++t){const e=o[t];n?this.context.strokeText(e,a,r):this.context.fillText(e,a,r);let s="";for(let e=t+1;e<o.length;++e)s+=o[e];h=this.context.measureText(s).width,a+=l-h+i,l=h}}updateTexture(){const t=this.canvas;if(this._style.trim){const e=Vs(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];let i;const s=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,o=this.canvas.width/this._resolution-s-2*a,l=this.canvas.height/this._resolution-s-2*a,h=n.slice(),u=t.fillGradientStops.slice();if(!u.length){const t=h.length+1;for(let e=1;e<t;++e)u.push(e/t)}if(h.unshift(n[0]),u.unshift(0),h.push(n[n.length-1]),u.push(1),t.fillGradientType===ec.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,a,o/2,l+a);const n=r.fontProperties.fontSize+t.strokeThickness;for(let t=0;t<e.length;t++){const s=r.lineHeight*(t-1)+n,a=r.lineHeight*t;let o=a;t>0&&s>a&&(o=(a+s)/2);const c=a+n,d=r.lineHeight*(t+1);let f=c;t+1<e.length&&d<c&&(f=(c+d)/2);const p=(f-o)/l;for(let t=0;t<h.length;t++){let e=0;e="number"==typeof u[t]?u[t]:t/h.length;let r=Math.min(1,Math.max(0,o/l+e*p));r=Number(r.toFixed(5)),i.addColorStop(r,h[t])}}}else{i=this.context.createLinearGradient(a,l/2,o+a,l/2);const t=h.length+1;let e=1;for(let r=0;r<h.length;r++){let n;n="number"==typeof u[r]?u[r]:e/t,i.addColorStop(n,h[r]),e++}}return i}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},uc,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Ns(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Ns(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},this._style=t instanceof ic?t:new ic(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let dc=cc;dc.experimentalLetterSpacing=!1;class fc{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function pc(t,e){let r=!1;if(t?._textures?.length)for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof Ta){const i=t._textures[n].baseTexture;e.includes(i)||(e.push(i),r=!0)}return r}function mc(t,e){if(t.baseTexture instanceof ia){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function gc(t,e){if(t._texture&&t._texture instanceof Ta){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function _c(t,e){return e instanceof dc&&(e.updateText(!0),!0)}function vc(t,e){if(e instanceof ic){const t=e.toFontString();return hc.measureFont(t),!0}return!1}function yc(t,e){if(t instanceof dc){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function xc(t,e){return t instanceof ic&&(e.includes(t)||e.push(t),!0)}class bc{constructor(t){this.limiter=new fc(Ri.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(yc),this.registerFindHook(xc),this.registerFindHook(pc),this.registerFindHook(mc),this.registerFindHook(gc),this.registerUploadHook(_c),this.registerUploadHook(vc)}upload(t){return new Promise((e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,is.system.addOnce(this.tick,this,rs.UTILITY))):e()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)is.system.addOnce(this.tick,this,rs.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ll)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&is.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function wc(t,e){return e instanceof ia&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Tc(t,e){if(!(e instanceof Bu))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let e=0;e<n.length;e++){const{texture:r}=n[e].style;r&&wc(t,r.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function Ec(t,e){return t instanceof Bu&&(e.push(t),!0)}class Sc extends bc{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Ec),this.registerUploadHook(wc),this.registerUploadHook(Tc)}}Sc.extension={name:"prepare",type:Pi.RendererSystem},Mi.add(Sc);class Ac{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const Cc=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof Ta?t:null,this.baseTexture=t instanceof ia?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=Qs(t,null);return null===r&&(r=parseFloat(e??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise((t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Cc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(t){let e=t;const r=Cc.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const t=this._frameKeys[e],r=this._frames[t],n=r.frame;if(n){let e=null,i=null;const s=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,a=new Li(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);e=r.rotated?new Li(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new Li(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(i=new Li(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[t]=new Ta(this.baseTexture,e,a,i,r.rotated?2:0,r.anchor),Ta.addToCache(this.textures[t],t)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Cc.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*Cc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(t=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Rc=Cc;Rc.BATCH_SIZE=1e3;const Pc=["jpg","png","jpeg","avif","webp"];function Ic(t,e,r){const n={};if(t.forEach((t=>{n[t]=e})),Object.keys(e.textures).forEach((t=>{n[t]=e.textures[t]})),!r){const r=ds.dirname(t[0]);e.linkedSheets.forEach(((t,i)=>{const s=Ic([`${r}/${e.data.meta.related_multi_packs[i]}`],t,!0);Object.assign(n,s)}))}return n}const Mc={extension:Pi.Asset,cache:{test:t=>t instanceof Rc,getCacheableAssets:(t,e)=>Ic(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return"json"===r&&Pc.includes(n)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(Ri.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:Pi.LoadParser,priority:_h.Normal},testParse:async(t,e)=>ds.extname(e.src).includes(".json")&&!!t.frames,async parse(t,e,r){let n=ds.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");const i=n+t.meta.image,s=(await r.load([i]))[i],a=new Rc(s.baseTexture,t,e.src);await a.parse();const o=t?.meta?.related_multi_packs;if(Array.isArray(o)){const t=[];for(const i of o){if("string"!=typeof i)continue;const s=n+i;e.data?.ignoreMultiPack||t.push(r.load({src:s,data:{ignoreMultiPack:!0}}))}const i=await Promise.all(t);a.linkedSheets=i,i.forEach((t=>{t.linkedSheets=[a].concat(a.linkedSheets.filter((e=>e!==t)))}))}return a},unload(t){t.destroy(!0)}}};Mi.add(Mc);class kc extends Gl{constructor(t,e=!0){super(t[0]instanceof Ta?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(is.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(is.shared.add(this.update,this,rs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let r=0;r<t.length;++r)e.push(Ta.from(t[r]));return new kc(e)}static fromImages(t){const e=[];for(let r=0;r<t.length;++r)e.push(Ta.from(t[r]));return new kc(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof Ta)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(is.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(is.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Dc=new Fi;class Oc extends Gl{constructor(t,e=100,r=100){super(t),this.tileTransform=new ts,this._width=e,this._height=r,this.uvMatrix=this.texture.uvMatrix||new wo(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)}getLocalBounds(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Li),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Dc);const e=this._width,r=this._height,n=-e*this.anchor._x;if(Dc.x>=n&&Dc.x<n+e){const t=-r*this.anchor._y;if(Dc.y>=t&&Dc.y<t+r)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const r=t instanceof Ta?t:Ta.from(t,e);return new Oc(r,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var Nc="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Fc=new Xi;class Bc extends Ha{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Na,this.state=yo.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=vo.from(Nc,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?vo.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):vo.from(Nc,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)}render(t){const e=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const i=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;n=r.uvs,n[0]=n[6]=-i,n[1]=n[3]=-s,n[2]=n[4]=1-i,n[5]=n[7]=1-s,r.invalidate();const a=t._texture,o=a.baseTexture,l=o.alphaMode>0,h=t.tileTransform.localTransform,u=t.uvMatrix;let c=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==ti.CLAMP:o.wrapMode===ti.CLAMP&&(o.wrapMode=ti.REPEAT));const d=c?this.simpleShader:this.shader,f=a.width,p=a.height,m=t._width,g=t._height;Fc.set(h.a*f/m,h.b*f/g,h.c*p/m,h.d*p/g,h.tx/m,h.ty/g),Fc.invert(),c?Fc.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=Fc.toArray(!0),d.uniforms.uColor=As(t.tint,t.worldAlpha,d.uniforms.uColor,l),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,e.shader.bind(d),e.geometry.bind(r),this.state.blendMode=Ts(t.blendMode,l),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Bc.extension={name:"tilingSprite",type:Pi.RendererPlugin},Mi.add(Bc);class Lc{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Uc{static test(t){return"string"==typeof t&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const t in e){const n=e[t].match(/^[a-z]+/gm)[0],i=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const t in i){const e=i[t].split("="),r=e[0],n=e[1].replace(/"/gm,""),a=parseFloat(n),o=isNaN(a)?n:a;s[r]=o}r[n].push(s)}const n=new Lc;return r.info.forEach((t=>n.info.push({face:t.face,size:parseInt(t.size,10)}))),r.common.forEach((t=>n.common.push({lineHeight:parseInt(t.lineHeight,10)}))),r.page.forEach((t=>n.page.push({id:parseInt(t.id,10),file:t.file}))),r.char.forEach((t=>n.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)}))),r.kerning.forEach((t=>n.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)}))),r.distanceField.forEach((t=>n.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType}))),n}}class zc{static test(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(t){const e=new Lc,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),o=t.getElementsByTagName("distanceField");for(let t=0;t<r.length;t++)e.info.push({face:r[t].getAttribute("face"),size:parseInt(r[t].getAttribute("size"),10)});for(let t=0;t<n.length;t++)e.common.push({lineHeight:parseInt(n[t].getAttribute("lineHeight"),10)});for(let t=0;t<i.length;t++)e.page.push({id:parseInt(i[t].getAttribute("id"),10)||0,file:i[t].getAttribute("file")});for(let t=0;t<s.length;t++){const r=s[t];e.char.push({id:parseInt(r.getAttribute("id"),10),page:parseInt(r.getAttribute("page"),10)||0,x:parseInt(r.getAttribute("x"),10),y:parseInt(r.getAttribute("y"),10),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10),xoffset:parseInt(r.getAttribute("xoffset"),10),yoffset:parseInt(r.getAttribute("yoffset"),10),xadvance:parseInt(r.getAttribute("xadvance"),10)})}for(let t=0;t<a.length;t++)e.kerning.push({first:parseInt(a[t].getAttribute("first"),10),second:parseInt(a[t].getAttribute("second"),10),amount:parseInt(a[t].getAttribute("amount"),10)});for(let t=0;t<o.length;t++)e.distanceField.push({fieldType:o[t].getAttribute("fieldType"),distanceRange:parseInt(o[t].getAttribute("distanceRange"),10)});return e}}class Gc{static test(t){if("string"==typeof t&&t.includes("<font>")){const e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return zc.test(e)}return!1}static parse(t){const e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return zc.parse(e)}}const Hc=[Uc,zc,Gc];function jc(t){for(let e=0;e<Hc.length;e++)if(Hc[e].test(t))return Hc[e];return null}function Xc(t,e,r,n,i,s,a){const o=r.text,l=r.fontProperties;e.translate(n,i),e.scale(s,s);const h=a.strokeThickness/2,u=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,r,n,i,s){const a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];let o;const l=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,u=t.width/n-l-2*h,c=t.height/n-l-2*h,d=a.slice(),f=r.fillGradientStops.slice();if(!f.length){const t=d.length+1;for(let e=1;e<t;++e)f.push(e/t)}if(d.unshift(a[0]),f.unshift(0),d.push(a[a.length-1]),f.push(1),r.fillGradientType===ec.LINEAR_VERTICAL){o=e.createLinearGradient(u/2,h,u/2,c+h);let t=0;const n=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let e=0;e<i.length;e++){const r=s.lineHeight*e;for(let e=0;e<d.length;e++){let i=0;i="number"==typeof f[e]?f[e]:e/d.length;const s=r/c+i*n;let a=Math.max(t,s);a=Math.min(a,1),o.addColorStop(a,d[e]),t=a}}}else{o=e.createLinearGradient(h,c/2,u+h,c/2);const t=d.length+1;let r=1;for(let e=0;e<d.length;e++){let n;n="number"==typeof f[e]?f[e]:r/t,o.addColorStop(n,d[e]),r++}}return o}(t,e,a,s,[o],r),e.strokeStyle=a.stroke,a.dropShadow){const t=a.dropShadowColor,r=vs("number"==typeof t?t:xs(t)),n=a.dropShadowBlur*s,i=a.dropShadowDistance*s;e.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${a.dropShadowAlpha})`,e.shadowBlur=n,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*i,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*i}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(o,h,u+r.lineHeight-l.descent),a.fill&&e.fillText(o,h,u+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Wc(t){return Array.from?Array.from(t):t.split("")}function Vc(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const Yc=class{constructor(t,e,r){const[n]=t.info,[i]=t.common,[s]=t.page,[a]=t.distanceField,o=Qs(s.file),l={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/o,this.chars={},this.pageTextures=l;for(let r=0;r<t.page.length;r++){const{id:n,file:i}=t.page[r];l[n]=e instanceof Array?e[r]:e[i],a?.fieldType&&"none"!==a.fieldType&&(l[n].baseTexture.alphaMode=ri.NO_PREMULTIPLIED_ALPHA,l[n].baseTexture.mipmap=ei.OFF)}for(let e=0;e<t.char.length;e++){const{id:r,page:n}=t.char[e];let{x:i,y:s,width:a,height:h,xoffset:u,yoffset:c,xadvance:d}=t.char[e];i/=o,s/=o,a/=o,h/=o,u/=o,c/=o,d/=o;const f=new Li(i+l[n].frame.x/o,s+l[n].frame.y/o,a,h);this.chars[r]={xOffset:u,yOffset:c,xAdvance:d,kerning:{},texture:new Ta(l[n].baseTexture,f),page:n}}for(let e=0;e<t.kerning.length;e++){let{first:r,second:n,amount:i}=t.kerning[e];r/=o,n/=o,i/=o,this.chars[n]&&(this.chars[n].kerning[r]=i)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof Lc)n=t;else{const e=jc(t);if(!e)throw new Error("Unrecognized data format for font.");n=e.parse(t)}e instanceof Ta&&(e=[e]);const i=new Yc(n,e,r);return Yc.available[i.font]=i,i}static uninstall(t){const e=Yc.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Yc.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:a,textureHeight:o,...l}=Object.assign({},Yc.defaultOptions,r),h=function(t){"string"==typeof t&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const t=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<t)throw new Error("[BitmapFont]: Invalid character range.");for(let n=t,i=r;n<=i;n++)e.push(String.fromCharCode(n))}else e.push(...Wc(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(n),u=e instanceof ic?e:new ic(e),c=a,d=new Lc;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};let f,p,m,g=0,_=0,v=0;const y=[],x=[];for(let t=0;t<h.length;t++){f||(f=Ri.ADAPTER.createCanvas(),f.width=a,f.height=o,p=f.getContext("2d"),m=new ia(f,{resolution:s,...l}),y.push(m),x.push(new Ta(m)),d.page.push({id:x.length-1,file:""}));const e=h[t],r=hc.measureText(e,u,!1,f),n=r.width,b=Math.ceil(r.height),w=Math.ceil(("italic"===u.fontStyle?2:1)*n);if(_>=o-b*s){if(0===_)throw new Error(`[BitmapFont] textureHeight ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${e}')`);--t,f=null,p=null,m=null,_=0,g=0,v=0;continue}if(v=Math.max(b+r.fontProperties.descent,v),w*s+g>=c){if(0===g)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${e}')`);--t,_+=v*s,_=Math.ceil(_),g=0,v=0;continue}Xc(f,p,r,g,_,s,u);const T=Vc(r.text);d.char.push({id:T,page:x.length-1,x:g/s,y:_/s,width:w,height:b,xoffset:0,yoffset:0,xadvance:Math.ceil(n-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),g+=(w+2*i)*s,g=Math.ceil(g)}for(let t=0,e=h.length;t<e;t++){const r=h[t];for(let t=0;t<e;t++){const e=h[t],n=p.measureText(r).width,i=p.measureText(e).width,s=p.measureText(r+e).width-(n+i);s&&d.kerning.push({first:Vc(r),second:Vc(e),amount:s})}}const b=new Yc(d,x,!0);return void 0!==Yc.available[t]&&Yc.uninstall(t),Yc.available[t]=b,b}};let $c=Yc;$c.ALPHA=[["a","z"],["A","Z"]," "],$c.NUMERIC=[["0","9"]],$c.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],$c.ASCII=[[" ","~"]],$c.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Yc.ALPHANUMERIC},$c.available={};const qc=[],Kc=[],Qc=[],Zc=class extends Ll{constructor(t,e={}){super(),this._tint=16777215;const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:a,fontSize:o}=Object.assign({},Zc.styleDefaults,e);if(!$c.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=n,this._font=void 0,this._fontName=a,this._fontSize=o,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new ji((()=>{this.dirty=!0}),this,0,0),this._roundPixels=Ri.ROUND_PIXELS,this.dirty=!0,this._resolution=Ri.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=$c.available[this._fontName],e=this.fontSize,r=e/t.size,n=new Fi,i=[],s=[],a=[],o=Wc(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*t.size/e,h="none"===t.distanceFieldType?qc:Kc;let u=null,c=0,d=0,f=0,p=-1,m=0,g=0,_=0,v=0;for(let e=0;e<o.length;e++){const r=o[e],h=Vc(r);if(/(?:\s)/.test(r)&&(p=e,m=c,v++),"\r"===r||"\n"===r){s.push(c),a.push(-1),d=Math.max(d,c),++f,++g,n.x=0,n.y+=t.lineHeight,u=null,v=0;continue}const y=t.chars[h];if(!y)continue;u&&y.kerning[u]&&(n.x+=y.kerning[u]);const x=Qc.pop()||{texture:Ta.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Fi};x.texture=y.texture,x.line=f,x.charCode=h,x.position.x=n.x+y.xOffset+this._letterSpacing/2,x.position.y=n.y+y.yOffset,x.prevSpaces=v,i.push(x),c=x.position.x+Math.max(y.xAdvance-y.xOffset,y.texture.orig.width),n.x+=y.xAdvance+this._letterSpacing,_=Math.max(_,y.yOffset+y.texture.height),u=h,-1!==p&&l>0&&n.x>l&&(++g,Os(i,1+p-g,1+e-p),e=p,p=-1,s.push(m),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,m),f++,n.x=0,n.y+=t.lineHeight,u=null,v=0)}const y=o[o.length-1];"\r"!==y&&"\n"!==y&&(/(?:\s)/.test(y)&&(c=m),s.push(c),d=Math.max(d,c),a.push(-1));const x=[];for(let t=0;t<=f;t++){let e=0;"right"===this._align?e=d-s[t]:"center"===this._align?e=(d-s[t])/2:"justify"===this._align&&(e=a[t]<0?0:(d-s[t])/a[t]),x.push(e)}const b=i.length,w={},T=[],E=this._activePagesMeshData;h.push(...E);for(let e=0;e<b;e++){const r=i[e].texture,n=r.baseTexture.uid;if(!w[n]){let e=h.pop();if(!e){const r=new Wu;let n,i;"none"===t.distanceFieldType?(n=new Xu(Ta.EMPTY),i=Yn.NORMAL):(n=new Xu(Ta.EMPTY,{program:_o.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),i=Yn.NORMAL_NPM);const s=new ju(r,n);s.blendMode=i,e={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:s,vertices:null,uvs:null,indices:null}}e.index=0,e.indexCount=0,e.vertexCount=0,e.uvsCount=0,e.total=0;const{_textureCache:i}=this;i[n]=i[n]||new Ta(r.baseTexture),e.mesh.texture=i[n],e.mesh.tint=this._tint,T.push(e),w[n]=e}w[n].total++}for(let t=0;t<E.length;t++)T.includes(E[t])||this.removeChild(E[t].mesh);for(let t=0;t<T.length;t++)T[t].mesh.parent!==this&&this.addChild(T[t].mesh);this._activePagesMeshData=T;for(const t in w){const e=w[t],r=e.total;if(!(e.indices?.length>6*r)||e.vertices.length<2*ju.BATCHABLE_SIZE)e.vertices=new Float32Array(8*r),e.uvs=new Float32Array(8*r),e.indices=new Uint16Array(6*r);else{const t=e.total,r=e.vertices;for(let e=4*t*2;e<r.length;e++)r[e]=0}e.mesh.size=6*r}for(let t=0;t<b;t++){const e=i[t];let n=e.position.x+x[e.line]*("justify"===this._align?e.prevSpaces:1);this._roundPixels&&(n=Math.round(n));const s=n*r,a=e.position.y*r,o=e.texture,l=w[o.baseTexture.uid],h=o.frame,u=o._uvs,c=l.index++;l.indices[6*c+0]=0+4*c,l.indices[6*c+1]=1+4*c,l.indices[6*c+2]=2+4*c,l.indices[6*c+3]=0+4*c,l.indices[6*c+4]=2+4*c,l.indices[6*c+5]=3+4*c,l.vertices[8*c+0]=s,l.vertices[8*c+1]=a,l.vertices[8*c+2]=s+h.width*r,l.vertices[8*c+3]=a,l.vertices[8*c+4]=s+h.width*r,l.vertices[8*c+5]=a+h.height*r,l.vertices[8*c+6]=s,l.vertices[8*c+7]=a+h.height*r,l.uvs[8*c+0]=u.x0,l.uvs[8*c+1]=u.y0,l.uvs[8*c+2]=u.x1,l.uvs[8*c+3]=u.y1,l.uvs[8*c+4]=u.x2,l.uvs[8*c+5]=u.y2,l.uvs[8*c+6]=u.x3,l.uvs[8*c+7]=u.y3}this._textWidth=d*r,this._textHeight=(n.y+t.lineHeight)*r;for(const t in w){const e=w[t];if(0!==this.anchor.x||0!==this.anchor.y){let t=0;const r=this._textWidth*this.anchor.x,n=this._textHeight*this.anchor.y;for(let i=0;i<e.total;i++)e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n}this._maxLineHeight=_*r;const n=e.mesh.geometry.getBuffer("aVertexPosition"),i=e.mesh.geometry.getBuffer("aTextureCoord"),s=e.mesh.geometry.getIndex();n.data=e.vertices,i.data=e.uvs,s.data=e.indices,n.update(),i.update(),s.update()}for(let t=0;t<i.length;t++)Qc.push(i[t]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=$c.available[this._fontName];if("none"!==r){const{a:r,b:i,c:s,d:a}=this.worldTransform,o=Math.sqrt(r*r+i*i),l=Math.sqrt(s*s+a*a),h=(Math.abs(o)+Math.abs(l))/2,u=this.fontSize/n,c=t._view.resolution;for(const t of this._activePagesMeshData)t.mesh.shader.uniforms.uFWidth=h*e*u*c}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=$c.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!$c.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??$c.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r="none"===$c.available[this._fontName].distanceFieldType?qc:Kc;r.push(...this._activePagesMeshData);for(const t of this._activePagesMeshData)this.removeChild(t.mesh);this._activePagesMeshData=[],r.filter((t=>e[t.mesh.texture.baseTexture.uid])).forEach((t=>{t.mesh.texture=Ta.EMPTY}));for(const t in e)e[t].destroy(),delete e[t];this._font=null,this._textureCache=null,super.destroy(t)}};let Jc=Zc;Jc.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const td=[".xml",".fnt"],ed={extension:{type:Pi.LoadParser,priority:_h.Normal},test:t=>td.includes(ds.extname(t)),testParse:async t=>Uc.test(t)||Gc.test(t),async parse(t,e,r){const n=Uc.test(t)?Uc.parse(t):Gc.parse(t),{src:i}=e,{page:s}=n,a=[];for(let t=0;t<s.length;++t){const e=s[t].file,r=ds.join(ds.dirname(i),e);a.push(r)}const o=await r.load(a),l=a.map((t=>o[t]));return $c.install(n,l,!0)},load:async(t,e)=>(await Ri.ADAPTER.fetch(t)).text(),unload(t){t.destroy()}};Mi.add(ed);const rd={AlphaFilter:class extends xo{constructor(t=1){super(fl,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}},BlurFilter:class extends xo{constructor(t=8,e=4,r=Ri.FILTER_RESOLUTION,n=5){super(),this.blurXFilter=new kl(!0,t,e,r,n),this.blurYFilter=new kl(!1,t,e,r,n),this.resolution=r,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,r,n){const i=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(i&&s){const i=t.getFilterTexture();this.blurXFilter.apply(t,e,i,ni.CLEAR),this.blurYFilter.apply(t,i,r,n),t.returnFilterTexture(i)}else s?this.blurYFilter.apply(t,e,r,n):this.blurXFilter.apply(t,e,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}},BlurFilterPass:kl,ColorMatrixFilter:Dl,DisplacementFilter:class extends xo{constructor(t,e){const r=new Xi;t.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,null==e&&(e=20),this.scale=new Fi(e,e)}apply(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,s=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==s&&0!==a&&(this.uniforms.rotation[0]=i.a/s,this.uniforms.rotation[1]=i.b/s,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),t.applyFilter(this,e,r,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}},FXAAFilter:class extends xo{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class extends xo{constructor(t=.5,e=Math.random()){super(pl,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}};class nd extends kc{states;state;constructor(t,e,r,n=!0){super(t,n),this.states=e,this.state=r}set currentFrame(t){super.currentFrame=t}get currentFrame(){if(void 0===this.states)return 0;const t=this.states[this.state],[e,r]="number"==typeof t?[t,t+1]:t,n=r-e;return e+super.currentFrame%n}setState(t){this.state=t;const e=this.states[t];"number"==typeof e?this.gotoAndStop(e):this.gotoAndPlay(e[0])}}class id{renderer;constructor(t){this.renderer=t}projectileNodes=new Map;removeProjectile(t){this.projectileNodes.get(t).destroy(),this.projectileNodes.delete(t)}drawProjectileAnimation(t){let e=this.projectileNodes.get(t);e||(e=this.createProjectileNode(t));const r=fn(hn(dn(t.targetLocation,t.sourceLocation)),t.speed);e.x+=r.x,e.y+=r.y}createProjectileNode(t){const e=this.renderer.assetManager.getSprite(t.projectileId),r=new nd(e.texture,e.animations,"idle");return r.position.copyFrom(t.sourceLocation),r.anchor.set(.5,0),this.projectileNodes.set(t,r),this.renderer.container.addChild(r),r}}const sd=class extends xo{constructor(t){const e=Object.assign({},sd.defaults,t),{outerStrength:r,innerStrength:n,color:i,knockout:s,quality:a}=e,o=Math.round(e.distance);super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,`${(1/a/o).toFixed(7)}`).replace(/__DIST__/gi,`${o.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:i,outerStrength:r,innerStrength:n,padding:o,knockout:s})}get color(){return bs(this.uniforms.glowColor)}set color(t){vs(t,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(t){this.uniforms.outerStrength=t}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(t){this.uniforms.innerStrength=t}get knockout(){return this.uniforms.knockout}set knockout(t){this.uniforms.knockout=t}};let ad=sd;function od(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ld(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}ad.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1};var hd,ud,cd,dd,fd,pd,md,gd,_d,vd,yd,xd,bd,wd,Td,Ed={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Sd={duration:.5,overwrite:!1,delay:0},Ad=1e8,Cd=1e-8,Rd=2*Math.PI,Pd=Rd/4,Id=0,Md=Math.sqrt,kd=Math.cos,Dd=Math.sin,Od=function(t){return"string"==typeof t},Nd=function(t){return"function"==typeof t},Fd=function(t){return"number"==typeof t},Bd=function(t){return void 0===t},Ld=function(t){return"object"==typeof t},Ud=function(t){return!1!==t},zd=function(){return"undefined"!=typeof window},Gd=function(t){return Nd(t)||Od(t)},Hd="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},jd=Array.isArray,Xd=/(?:-?\.?\d|\.)+/gi,Wd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Vd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Yd=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$d=/[+-]=-?[.\d]+/,qd=/[^,'"\[\]\s]+/gi,Kd=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Qd={},Zd={},Jd=function(t){return(Zd=Pf(t,Qd))&&Rm},tf=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ef=function(t,e){return!e&&console.warn(t)},rf=function(t,e){return t&&(Qd[t]=e)&&Zd&&(Zd[t]=e)||Qd},nf=function(){return 0},sf={suppressEvents:!0,isStart:!0,kill:!1},af={suppressEvents:!0,kill:!1},of={suppressEvents:!0},lf={},hf=[],uf={},cf={},df={},ff=30,pf=[],mf="",gf=function(t){var e,r,n=t[0];if(Ld(n)||Nd(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(r=pf.length;r--&&!pf[r].targetTest(n););e=pf[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new jp(t[r],e)))||t.splice(r,1);return t},_f=function(t){return t._gsap||gf(op(t))[0]._gsap},vf=function(t,e,r){return(r=t[e])&&Nd(r)?t[e]():Bd(r)&&t.getAttribute&&t.getAttribute(e)||r},yf=function(t,e){return(t=t.split(",")).forEach(e)||t},xf=function(t){return Math.round(1e5*t)/1e5||0},bf=function(t){return Math.round(1e7*t)/1e7||0},wf=function(t,e){var r=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===r?t+n:"-"===r?t-n:"*"===r?t*n:t/n},Tf=function(t,e){for(var r=e.length,n=0;t.indexOf(e[n])<0&&++n<r;);return n<r},Ef=function(){var t,e,r=hf.length,n=hf.slice(0);for(uf={},hf.length=0,t=0;t<r;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Sf=function(t,e,r,n){hf.length&&Ef(),t.render(e,r,n||ud&&e<0&&(t._initted||t._startAt)),hf.length&&Ef()},Af=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(qd).length<2?e:Od(t)?t.trim():t},Cf=function(t){return t},Rf=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},Pf=function(t,e){for(var r in e)t[r]=e[r];return t},If=function t(e,r){for(var n in r)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=Ld(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},Mf=function(t,e){var r,n={};for(r in t)r in e||(n[r]=t[r]);return n},kf=function(t){var e,r=t.parent||dd,n=t.keyframes?(e=jd(t.keyframes),function(t,r){for(var n in r)n in t||"duration"===n&&e||"ease"===n||(t[n]=r[n])}):Rf;if(Ud(t.inherit))for(;r;)n(t,r.vars.defaults),r=r.parent||r._dp;return t},Df=function(t,e,r,n,i){void 0===r&&(r="_first"),void 0===n&&(n="_last");var s,a=t[n];if(i)for(s=e[i];a&&a[i]>s;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t,e},Of=function(t,e,r,n){void 0===r&&(r="_first"),void 0===n&&(n="_last");var i=e._prev,s=e._next;i?i._next=s:t[r]===e&&(t[r]=s),s?s._prev=i:t[n]===e&&(t[n]=i),e._next=e._prev=e.parent=null},Nf=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Ff=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Bf=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Lf=function(t,e,r,n){return t._startAt&&(ud?t._startAt.revert(af):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Uf=function t(e){return!e||e._ts&&t(e.parent)},zf=function(t){return t._repeat?Gf(t._tTime,t=t.duration()+t._rDelay)*t:0},Gf=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},Hf=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},jf=function(t){return t._end=bf(t._start+(t._tDur/Math.abs(t._ts||t._rts||Cd)||0))},Xf=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=bf(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),jf(t),r._dirty||Ff(r,t)),t},Wf=function(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=Hf(t.rawTime(),e),(!e._dur||np(0,e.totalDuration(),r)-e._tTime>Cd)&&e.render(r,!0)),Ff(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},Vf=function(t,e,r,n){return e.parent&&Nf(e),e._start=bf((Fd(r)?r:r||t!==dd?tp(t,r,e):t._time)+e._delay),e._end=bf(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Df(t,e,"_first","_last",t._sort?"_start":0),Kf(e)||(t._recent=e),n||Wf(t,e),t._ts<0&&Xf(t,t._tTime),t},Yf=function(t,e){return(Qd.ScrollTrigger||tf("scrollTrigger",e))&&Qd.ScrollTrigger.create(e,t)},$f=function(t,e,r,n,i){return Qp(t,e,i),t._initted?!r&&t._pt&&!ud&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&_d!==Ip.frame?(hf.push(t),t._lazy=[i,n],1):void 0:1},qf=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Kf=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Qf=function(t,e,r,n){var i=t._repeat,s=bf(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=i?i<0?1e10:bf(s*(i+1)+t._rDelay*i):s,a>0&&!n&&Xf(t,t._tTime=t._tDur*a),t.parent&&jf(t),r||Ff(t.parent,t),t},Zf=function(t){return t instanceof Wp?Ff(t):Qf(t,t._dur)},Jf={_start:0,endTime:nf,totalDuration:nf},tp=function t(e,r,n){var i,s,a,o=e.labels,l=e._recent||Jf,h=e.duration()>=Ad?l.endTime(!1):e._dur;return Od(r)&&(isNaN(r)||r in o)?(s=r.charAt(0),a="%"===r.substr(-1),i=r.indexOf("="),"<"===s||">"===s?(i>=0&&(r=r.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(i<0?l:n).totalDuration()/100:1)):i<0?(r in o||(o[r]=h),o[r]):(s=parseFloat(r.charAt(i-1)+r.substr(i+1)),a&&n&&(s=s/100*(jd(n)?n[0]:n).totalDuration()),i>1?t(e,r.substr(0,i-1),n)+s:h+s)):null==r?h:+r},ep=function(t,e,r){var n,i,s=Fd(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=r,t){for(n=o,i=r;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=Ud(i.vars.inherit)&&i.parent;o.immediateRender=Ud(n.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new rm(e[0],o,e[a+1])},rp=function(t,e){return t||0===t?e(t):e},np=function(t,e,r){return r<t?t:r>e?e:r},ip=function(t,e){return Od(t)&&(e=Kd.exec(t))?e[1]:""},sp=[].slice,ap=function(t,e){return t&&Ld(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ld(t[0]))&&!t.nodeType&&t!==fd},op=function(t,e,r){return cd&&!e&&cd.selector?cd.selector(t):!Od(t)||r||!pd&&Mp()?jd(t)?function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var n;return Od(t)&&!e||ap(t,1)?(n=r).push.apply(n,op(t)):r.push(t)}))||r}(t,r):ap(t)?sp.call(t,0):t?[t]:[]:sp.call((e||md).querySelectorAll(t),0)},lp=function(t){return t=op(t)[0]||ef("Invalid scope")||{},function(e){var r=t.current||t.nativeElement||t;return op(e,r.querySelectorAll?r:r===t?ef("Invalid scope")||md.createElement("div"):t)}},hp=function(t){return t.sort((function(){return.5-Math.random()}))},up=function(t){if(Nd(t))return t;var e=Ld(t)?t:{each:t},r=Lp(e.ease),n=e.from||0,i=parseFloat(e.base)||0,s={},a=n>0&&n<1,o=isNaN(n)||a,l=e.axis,h=n,u=n;return Od(n)?h=u={center:.5,edges:.5,end:1}[n]||0:!a&&o&&(h=n[0],u=n[1]),function(t,a,c){var d,f,p,m,g,_,v,y,x,b=(c||e).length,w=s[b];if(!w){if(!(x="auto"===e.grid?0:(e.grid||[1,Ad])[1])){for(v=-Ad;v<(v=c[x++].getBoundingClientRect().left)&&x<b;);x--}for(w=s[b]=[],d=o?Math.min(x,b)*h-.5:n%x,f=x===Ad?0:o?b*u/x-.5:n/x|0,v=0,y=Ad,_=0;_<b;_++)p=_%x-d,m=f-(_/x|0),w[_]=g=l?Math.abs("y"===l?m:p):Md(p*p+m*m),g>v&&(v=g),g<y&&(y=g);"random"===n&&hp(w),w.max=v-y,w.min=y,w.v=b=(parseFloat(e.amount)||parseFloat(e.each)*(x>b?b-1:l?"y"===l?b/x:x:Math.max(x,b/x))||0)*("edges"===n?-1:1),w.b=b<0?i-b:i,w.u=ip(e.amount||e.each)||0,r=r&&b<0?Fp(r):r}return b=(w[t]-w.min)/w.max||0,bf(w.b+(r?r(b):b)*w.v)+w.u}},cp=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var n=bf(Math.round(parseFloat(r)/t)*t*e);return(n-n%1)/e+(Fd(r)?0:ip(r))}},dp=function(t,e){var r,n,i=jd(t);return!i&&Ld(t)&&(r=i=t.radius||Ad,t.values?(t=op(t.values),(n=!Fd(t[0]))&&(r*=r)):t=cp(t.increment)),rp(e,i?Nd(t)?function(e){return n=t(e),Math.abs(n-e)<=r?n:e}:function(e){for(var i,s,a=parseFloat(n?e.x:e),o=parseFloat(n?e.y:0),l=Ad,h=0,u=t.length;u--;)(i=n?(i=t[u].x-a)*i+(s=t[u].y-o)*s:Math.abs(t[u]-a))<l&&(l=i,h=u);return h=!r||l<=r?t[h]:e,n||h===e||Fd(e)?h:h+ip(e)}:cp(t))},fp=function(t,e,r,n){return rp(jd(t)?!e:!0===r?!!(r=0):!n,(function(){return jd(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*n)/n}))},pp=function(t,e,r){return rp(r,(function(r){return t[~~e(r)]}))},mp=function(t){for(var e,r,n,i,s=0,a="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),i="["===t.charAt(e+7),r=t.substr(e+7,n-e-7).match(i?qd:Xd),a+=t.substr(s,e-s)+fp(i?r:+r[0],i?0:+r[1],+r[2]||1e-5),s=n+1;return a+t.substr(s,t.length-s)},gp=function(t,e,r,n,i){var s=e-t,a=n-r;return rp(i,(function(e){return r+((e-t)/s*a||0)}))},_p=function(t,e,r){var n,i,s,a=t.labels,o=Ad;for(n in a)(i=a[n]-e)<0==!!r&&i&&o>(i=Math.abs(i))&&(s=n,o=i);return s},vp=function(t,e,r){var n,i,s,a=t.vars,o=a[e],l=cd,h=t._ctx;if(o)return n=a[e+"Params"],i=a.callbackScope||t,r&&hf.length&&Ef(),h&&(cd=h),s=n?o.apply(i,n):o.call(i),cd=l,s},yp=function(t){return Nf(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ud),t.progress()<1&&vp(t,"onInterrupt"),t},xp=function(t){var e=(t=!t.name&&t.default||t).name,r=Nd(t),n=e&&!r&&t.init?function(){this._props=[]}:t,i={init:nf,render:cm,add:qp,kill:fm,modifier:dm,rawVars:0},s={targetTest:0,get:0,getSetter:om,aliases:{},register:0};if(Mp(),t!==n){if(cf[e])return;Rf(n,Rf(Mf(t,i),s)),Pf(n.prototype,Pf(i,Mf(t,s))),cf[n.prop=e]=n,t.targetTest&&(pf.push(n),lf[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}rf(e,n),t.register&&t.register(Rm,n,gm)},bp=255,wp={aqua:[0,bp,bp],lime:[0,bp,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,bp],navy:[0,0,128],white:[bp,bp,bp],olive:[128,128,0],yellow:[bp,bp,0],orange:[bp,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[bp,0,0],pink:[bp,192,203],cyan:[0,bp,bp],transparent:[bp,bp,bp,0]},Tp=function(t,e,r){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*bp+.5|0},Ep=function(t,e,r){var n,i,s,a,o,l,h,u,c,d,f=t?Fd(t)?[t>>16,t>>8&bp,t&bp]:0:wp.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),wp[t])f=wp[t];else if("#"===t.charAt(0)){if(t.length<6&&(n=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+n+n+i+i+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&bp,f&bp,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&bp,t&bp]}else if("hsl"===t.substr(0,3))if(f=d=t.match(Xd),e){if(~t.indexOf("="))return f=t.match(Wd),r&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,o=+f[1]/100,n=2*(l=+f[2]/100)-(i=l<=.5?l*(o+1):l+o-l*o),f.length>3&&(f[3]*=1),f[0]=Tp(a+1/3,n,i),f[1]=Tp(a,n,i),f[2]=Tp(a-1/3,n,i);else f=t.match(Xd)||wp.transparent;f=f.map(Number)}return e&&!d&&(n=f[0]/bp,i=f[1]/bp,s=f[2]/bp,l=((h=Math.max(n,i,s))+(u=Math.min(n,i,s)))/2,h===u?a=o=0:(c=h-u,o=l>.5?c/(2-h-u):c/(h+u),a=h===n?(i-s)/c+(i<s?6:0):h===i?(s-n)/c+2:(n-i)/c+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*o+.5),f[2]=~~(100*l+.5)),r&&f.length<4&&(f[3]=1),f},Sp=function(t){var e=[],r=[],n=-1;return t.split(Cp).forEach((function(t){var i=t.match(Vd)||[];e.push.apply(e,i),r.push(n+=i.length+1)})),e.c=r,e},Ap=function(t,e,r){var n,i,s,a,o="",l=(t+o).match(Cp),h=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map((function(t){return(t=Ep(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=Sp(t),(n=r.c).join(o)!==s.c.join(o)))for(a=(i=t.replace(Cp,"1").split(Vd)).length-1;u<a;u++)o+=i[u]+(~n.indexOf(u)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:r).shift());if(!i)for(a=(i=t.split(Cp)).length-1;u<a;u++)o+=i[u]+l[u];return o+i[a]},Cp=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in wp)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Rp=/hsl[a]?\(/,Pp=function(t){var e,r=t.join(" ");if(Cp.lastIndex=0,Cp.test(r))return e=Rp.test(r),t[1]=Ap(t[1],e),t[0]=Ap(t[0],e,Sp(t[1])),!0},Ip=function(){var t,e,r,n,i,s,a=Date.now,o=500,l=33,h=a(),u=h,c=1e3/240,d=c,f=[],p=function r(p){var m,g,_,v,y=a()-u,x=!0===p;if(y>o&&(h+=y-l),((m=(_=(u+=y)-h)-d)>0||x)&&(v=++n.frame,i=_-1e3*n.time,n.time=_/=1e3,d+=m+(m>=c?4:c-m),g=1),x||(t=e(r)),g)for(s=0;s<f.length;s++)f[s](_,i,v,p)};return n={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){gd&&(!pd&&zd()&&(fd=pd=window,md=fd.document||{},Qd.gsap=Rm,(fd.gsapVersions||(fd.gsapVersions=[])).push(Rm.version),Jd(Zd||fd.GreenSockGlobals||!fd.gsap&&fd||{}),r=fd.requestAnimationFrame),t&&n.sleep(),e=r||function(t){return setTimeout(t,d-1e3*n.time+1|0)},yd=1,p(2))},sleep:function(){(r?fd.cancelAnimationFrame:clearTimeout)(t),yd=0,e=nf},lagSmoothing:function(t,e){o=t||1e8,l=Math.min(e,o,0)},fps:function(t){c=1e3/(t||240),d=1e3*n.time+c},add:function(t,e,r){var i=e?function(e,r,s,a){t(e,r,s,a),n.remove(i)}:t;return n.remove(t),f[r?"unshift":"push"](i),Mp(),i},remove:function(t,e){~(e=f.indexOf(t))&&f.splice(e,1)&&s>=e&&s--},_listeners:f},n}(),Mp=function(){return!yd&&Ip.wake()},kp={},Dp=/^[\d.\-M][\d.\-,\s]/,Op=/["']/g,Np=function(t){for(var e,r,n,i={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)r=s[o],e=o!==l-1?r.lastIndexOf(","):r.length,n=r.substr(0,e),i[a]=isNaN(n)?n.replace(Op,"").trim():+n,a=r.substr(e+1).trim();return i},Fp=function(t){return function(e){return 1-t(1-e)}},Bp=function t(e,r){for(var n,i=e._first;i;)i instanceof Wp?t(i,r):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===r||(i.timeline?t(i.timeline,r):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=r)),i=i._next},Lp=function(t,e){return t&&(Nd(t)?t:kp[t]||function(t){var e,r,n,i,s=(t+"").split("("),a=kp[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Np(s[1])]:(e=t,r=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",r),e.substring(r,~i&&i<n?e.indexOf(")",n+1):n)).split(",").map(Af)):kp._CE&&Dp.test(t)?kp._CE("",t):a}(t))||e},Up=function(t,e,r,n){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,s={easeIn:e,easeOut:r,easeInOut:n};return yf(t,(function(t){for(var e in kp[t]=Qd[t]=s,kp[i=t.toLowerCase()]=r,s)kp[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=kp[t+"."+e]=s[e]})),s},zp=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Gp=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),a=s/Rd*(Math.asin(1/i)||0),o=function(t){return 1===t?1:i*Math.pow(2,-10*t)*Dd((t-a)*s)+1},l="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:zp(o);return s=Rd/s,l.config=function(r,n){return t(e,r,n)},l},Hp=function t(e,r){void 0===r&&(r=1.70158);var n=function(t){return t?--t*t*((r+1)*t+r)+1:0},i="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:zp(n);return i.config=function(r){return t(e,r)},i};yf("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;Up(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),kp.Linear.easeNone=kp.none=kp.Linear.easeIn,Up("Elastic",Gp("in"),Gp("out"),Gp()),xd=7.5625,wd=1/(bd=2.75),Up("Bounce",(function(t){return 1-Td(1-t)}),Td=function(t){return t<wd?xd*t*t:t<.7272727272727273?xd*Math.pow(t-1.5/bd,2)+.75:t<.9090909090909092?xd*(t-=2.25/bd)*t+.9375:xd*Math.pow(t-2.625/bd,2)+.984375}),Up("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Up("Circ",(function(t){return-(Md(1-t*t)-1)})),Up("Sine",(function(t){return 1===t?1:1-kd(t*Pd)})),Up("Back",Hp("in"),Hp("out"),Hp()),kp.SteppedEase=kp.steps=Qd.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,n=t+(e?0:1),i=e?1:0;return function(t){return((n*np(0,.99999999,t)|0)+i)*r}}},Sd.ease=kp["quad.out"],yf("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return mf+=t+","+t+"Params,"}));var jp=function(t,e){this.id=Id++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:vf,this.set=e?e.getSetter:om},Xp=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Qf(this,+t.duration,1,1),this.data=t.data,cd&&(this._ctx=cd,cd.data.push(this)),yd||Ip.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Qf(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Mp(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Xf(this,t),!r._dp||r.parent||Wf(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Vf(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Cd||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Sf(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+zf(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+zf(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?Gf(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Hf(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(np(-this._delay,this._tDur,e),!0),jf(this),Bf(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Cd&&(this._tTime-=Cd)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Vf(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Ud(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Hf(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=of);var e=ud;return ud=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),ud=e,this},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(e._ts||1),e=e._dp;return!this.parent&&this.vars.immediateRender?-1:r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Zf(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Zf(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(tp(this,t),Ud(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Ud(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,r=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<this.endTime(!0)-Cd))},e.eventCallback=function(t,e,r){var n=this.vars;return arguments.length>1?(e?(n[t]=e,r&&(n[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(r){var n=Nd(t)?t:Cf,i=function(){var t=e.then;e.then=null,Nd(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),r(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){yp(this)},t}();Rf(Xp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Wp=function(t){function e(e,r){var n;return void 0===e&&(e={}),(n=t.call(this,e)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Ud(e.sortChildren),dd&&Vf(e.parent||dd,od(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&Yf(od(n),e.scrollTrigger),n}ld(e,t);var r=e.prototype;return r.to=function(t,e,r){return ep(0,arguments,this),this},r.from=function(t,e,r){return ep(1,arguments,this),this},r.fromTo=function(t,e,r,n){return ep(2,arguments,this),this},r.set=function(t,e,r){return e.duration=0,e.parent=this,kf(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new rm(t,e,tp(this,r),1),this},r.call=function(t,e,r){return Vf(this,rm.delayedCall(0,t,e),r)},r.staggerTo=function(t,e,r,n,i,s,a){return r.duration=e,r.stagger=r.stagger||n,r.onComplete=s,r.onCompleteParams=a,r.parent=this,new rm(t,r,tp(this,i)),this},r.staggerFrom=function(t,e,r,n,i,s,a){return r.runBackwards=1,kf(r).immediateRender=Ud(r.immediateRender),this.staggerTo(t,e,r,n,i,s,a)},r.staggerFromTo=function(t,e,r,n,i,s,a,o){return n.startAt=r,kf(n).immediateRender=Ud(n.immediateRender),this.staggerTo(t,e,n,i,s,a,o)},r.render=function(t,e,r){var n,i,s,a,o,l,h,u,c,d,f,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,_=this._dur,v=t<=0?0:bf(t),y=this._zTime<0!=t<0&&(this._initted||!_);if(this!==dd&&v>g&&t>=0&&(v=g),v!==this._tTime||r||y){if(m!==this._time&&_&&(v+=this._time-m,t+=this._time-m),n=v,c=this._start,l=!(u=this._ts),y&&(_||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,o=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,r);if(n=bf(v%o),v===g?(a=this._repeat,n=_):((a=~~(v/o))&&a===v/o&&(n=_,a--),n>_&&(n=_)),d=Gf(this._tTime,o),!m&&this._tTime&&d!==a&&(d=a),f&&1&a&&(n=_-n,p=1),a!==d&&!this._lock){var x=f&&1&d,b=x===(f&&1&a);if(a<d&&(x=!x),m=x?0:_,this._lock=1,this.render(m||(p?0:bf(a*o)),e,!_)._lock=0,this._tTime=v,!e&&this.parent&&vp(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,g=this._tDur,b&&(this._lock=2,m=x?_:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Bp(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,r){var n;if(r>e)for(n=t._first;n&&n._start<=r;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,bf(m),bf(n)),h&&(v-=n-(n=h._start))),this._tTime=v,this._time=n,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&n&&!e&&(vp(this,"onStart"),this._tTime!==v))return this;if(n>=m&&t>=0)for(i=this._first;i;){if(s=i._next,(i._act||n>=i._start)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(n-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(n-i._start)*i._ts,e,r),n!==this._time||!this._ts&&!l){h=0,s&&(v+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var w=t<0?t:n;i;){if(s=i._prev,(i._act||w<=i._end)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(w-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(w-i._start)*i._ts,e,r||ud&&(i._initted||i._startAt)),n!==this._time||!this._ts&&!l){h=0,s&&(v+=this._zTime=w?-1e-8:Cd);break}}i=s}}if(h&&!e&&(this.pause(),h.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=c,jf(this),this.render(t,e,r);this._onUpdate&&!e&&vp(this,"onUpdate",!0),(v===g&&this._tTime>=this.totalDuration()||!v&&m)&&(c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!_)&&(v===g&&this._ts>0||!v&&this._ts<0)&&Nf(this,1),e||t<0&&!m||!v&&!m&&g||(vp(this,v===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<g&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(t,e){var r=this;if(Fd(e)||(e=tp(this,e,t)),!(t instanceof Xp)){if(jd(t))return t.forEach((function(t){return r.add(t,e)})),this;if(Od(t))return this.addLabel(t,e);if(!Nd(t))return this;t=rm.delayedCall(0,t)}return this!==t?Vf(this,t,e):this},r.getChildren=function(t,e,r,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=-Ad);for(var i=[],s=this._first;s;)s._start>=n&&(s instanceof rm?e&&i.push(s):(r&&i.push(s),t&&i.push.apply(i,s.getChildren(!0,e,r)))),s=s._next;return i},r.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},r.remove=function(t){return Od(t)?this.removeLabel(t):Nd(t)?this.killTweensOf(t):(Of(this,t),t===this._recent&&(this._recent=this._last),Ff(this))},r.totalTime=function(e,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=bf(Ip.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,r),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=tp(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,r){var n=rm.delayedCall(0,e||nf,r);return n.data="isPause",this._hasPause=1,Vf(this,n,tp(this,t))},r.removePause=function(t){var e=this._first;for(t=tp(this,t);e;)e._start===t&&"isPause"===e.data&&Nf(e),e=e._next},r.killTweensOf=function(t,e,r){for(var n=this.getTweensOf(t,r),i=n.length;i--;)Vp!==n[i]&&n[i].kill(t,e);return this},r.getTweensOf=function(t,e){for(var r,n=[],i=op(t),s=this._first,a=Fd(e);s;)s instanceof rm?Tf(s._targets,i)&&(a?(!Vp||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(r=s.getTweensOf(i,e)).length&&n.push.apply(n,r),s=s._next;return n},r.tweenTo=function(t,e){e=e||{};var r,n=this,i=tp(n,t),s=e,a=s.startAt,o=s.onStart,l=s.onStartParams,h=s.immediateRender,u=rm.to(n,Rf({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:n._time))/n.timeScale())||Cd,onStart:function(){if(n.pause(),!r){var t=e.duration||Math.abs((i-(a&&"time"in a?a.time:n._time))/n.timeScale());u._dur!==t&&Qf(u,t,0,1).render(u._time,!0,!0),r=1}o&&o.apply(u,l||[])}},e));return h?u.render(0):u},r.tweenFromTo=function(t,e,r){return this.tweenTo(e,Rf({startAt:{time:tp(this,t)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),_p(this,tp(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),_p(this,tp(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Cd)},r.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var n,i=this._first,s=this.labels;i;)i._start>=r&&(i._start+=t,i._end+=t),i=i._next;if(e)for(n in s)s[n]>=r&&(s[n]+=t);return Ff(this)},r.invalidate=function(e){var r=this._first;for(this._lock=0;r;)r.invalidate(e),r=r._next;return t.prototype.invalidate.call(this,e)},r.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ff(this)},r.totalDuration=function(t){var e,r,n,i=0,s=this,a=s._last,o=Ad;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(r=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Vf(s,a,r-a._delay,1)._lock=0):o=r,r<0&&a._ts&&(i-=r,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),o=0),a._end>i&&a._ts&&(i=a._end),a=e;Qf(s,s===dd&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(dd._ts&&(Sf(dd,Hf(t,dd)),_d=Ip.frame),Ip.frame>=ff){ff+=Ed.autoSleep||120;var e=dd._first;if((!e||!e._ts)&&Ed.autoSleep&&Ip._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ip.sleep()}}},e}(Xp);Rf(Wp.prototype,{_lock:0,_hasPause:0,_forcing:0});var Vp,Yp,$p=function(t,e,r,n,i,s,a){var o,l,h,u,c,d,f,p,m=new gm(this._pt,t,e,0,1,um,null,i),g=0,_=0;for(m.b=r,m.e=n,r+="",(f=~(n+="").indexOf("random("))&&(n=mp(n)),s&&(s(p=[r,n],t,e),r=p[0],n=p[1]),l=r.match(Yd)||[];o=Yd.exec(n);)u=o[0],c=n.substring(g,o.index),h?h=(h+1)%5:"rgba("===c.substr(-5)&&(h=1),u!==l[_++]&&(d=parseFloat(l[_-1])||0,m._pt={_next:m._pt,p:c||1===_?c:",",s:d,c:"="===u.charAt(1)?wf(d,u)-d:parseFloat(u)-d,m:h&&h<4?Math.round:0},g=Yd.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=a,($d.test(n)||f)&&(m.e=0),this._pt=m,m},qp=function(t,e,r,n,i,s,a,o,l,h){Nd(n)&&(n=n(i||0,t,s));var u,c=t[e],d="get"!==r?r:Nd(c)?l?t[e.indexOf("set")||!Nd(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():c,f=Nd(c)?l?sm:im:nm;if(Od(n)&&(~n.indexOf("random(")&&(n=mp(n)),"="===n.charAt(1)&&((u=wf(d,n)+(ip(d)||0))||0===u)&&(n=u)),!h||d!==n||Yp)return isNaN(d*n)||""===n?(!c&&!(e in t)&&tf(e,n),$p.call(this,t,e,d,n,f,o||Ed.stringFilter,l)):(u=new gm(this._pt,t,e,+d||0,n-(d||0),"boolean"==typeof c?hm:lm,0,f),l&&(u.fp=l),a&&u.modifier(a,this,t),this._pt=u)},Kp=function(t,e,r,n,i,s){var a,o,l,h;if(cf[t]&&!1!==(a=new cf[t]).init(i,a.rawVars?e[t]:function(t,e,r,n,i){if(Nd(t)&&(t=Jp(t,i,e,r,n)),!Ld(t)||t.style&&t.nodeType||jd(t)||Hd(t))return Od(t)?Jp(t,i,e,r,n):t;var s,a={};for(s in t)a[s]=Jp(t[s],i,e,r,n);return a}(e[t],n,i,s,r),r,n,s)&&(r._pt=o=new gm(r._pt,i,t,0,1,a.render,a,0,a.priority),r!==vd))for(l=r._ptLookup[r._targets.indexOf(i)],h=a._props.length;h--;)l[a._props[h]]=o;return a},Qp=function t(e,r,n){var i,s,a,o,l,h,u,c,d,f,p,m,g,_=e.vars,v=_.ease,y=_.startAt,x=_.immediateRender,b=_.lazy,w=_.onUpdate,T=_.onUpdateParams,E=_.callbackScope,S=_.runBackwards,A=_.yoyoEase,C=_.keyframes,R=_.autoRevert,P=e._dur,I=e._startAt,M=e._targets,k=e.parent,D=k&&"nested"===k.data?k.vars.targets:M,O="auto"===e._overwrite&&!hd,N=e.timeline;if(N&&(!C||!v)&&(v="none"),e._ease=Lp(v,Sd.ease),e._yEase=A?Fp(Lp(!0===A?v:A,Sd.ease)):0,A&&e._yoyo&&!e._repeat&&(A=e._yEase,e._yEase=e._ease,e._ease=A),e._from=!N&&!!_.runBackwards,!N||C&&!_.stagger){if(m=(c=M[0]?_f(M[0]).harness:0)&&_[c.prop],i=Mf(_,lf),I&&(I._zTime<0&&I.progress(1),r<0&&S&&x&&!R?I.render(-1,!0):I.revert(S&&P?af:sf),I._lazy=0),y){if(Nf(e._startAt=rm.set(M,Rf({data:"isStart",overwrite:!1,parent:k,immediateRender:!0,lazy:Ud(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:T,callbackScope:E,stagger:0},y))),e._startAt._dp=0,r<0&&(ud||!x&&!R)&&e._startAt.revert(af),x&&P&&r<=0&&n<=0)return void(r&&(e._zTime=r))}else if(S&&P&&!I)if(r&&(x=!1),a=Rf({overwrite:!1,data:"isFromStart",lazy:x&&Ud(b),immediateRender:x,stagger:0,parent:k},i),m&&(a[c.prop]=m),Nf(e._startAt=rm.set(M,a)),e._startAt._dp=0,r<0&&(ud?e._startAt.revert(af):e._startAt.render(-1,!0)),e._zTime=r,x){if(!r)return}else t(e._startAt,Cd,Cd);for(e._pt=e._ptCache=0,b=P&&Ud(b)||b&&!P,s=0;s<M.length;s++){if(u=(l=M[s])._gsap||gf(M)[s]._gsap,e._ptLookup[s]=f={},uf[u.id]&&hf.length&&Ef(),p=D===M?s:D.indexOf(l),c&&!1!==(d=new c).init(l,m||i,e,p,D)&&(e._pt=o=new gm(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){f[t]=o})),d.priority&&(h=1)),!c||m)for(a in i)cf[a]&&(d=Kp(a,i,e,p,l,D))?d.priority&&(h=1):f[a]=o=qp.call(e,l,a,"get",i[a],p,D,0,_.stringFilter);e._op&&e._op[s]&&e.kill(l,e._op[s]),O&&e._pt&&(Vp=e,dd.killTweensOf(l,f,e.globalTime(r)),g=!e.parent,Vp=0),e._pt&&b&&(uf[u.id]=1)}h&&mm(e),e._onInit&&e._onInit(e)}e._onUpdate=w,e._initted=(!e._op||e._pt)&&!g,C&&r<=0&&N.render(Ad,!0,!0)},Zp=function(t,e,r,n){var i,s,a=e.ease||n||"power1.inOut";if(jd(e))s=r[t]||(r[t]=[]),e.forEach((function(t,r){return s.push({t:r/(e.length-1)*100,v:t,e:a})}));else for(i in e)s=r[i]||(r[i]=[]),"ease"===i||s.push({t:parseFloat(t),v:e[i],e:a})},Jp=function(t,e,r,n,i){return Nd(t)?t.call(e,r,n,i):Od(t)&&~t.indexOf("random(")?mp(t):t},tm=mf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",em={};yf(tm+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return em[t]=1}));var rm=function(t){function e(e,r,n,i){var s;"number"==typeof r&&(n.duration=r,r=n,n=null);var a,o,l,h,u,c,d,f,p=(s=t.call(this,i?r:kf(r))||this).vars,m=p.duration,g=p.delay,_=p.immediateRender,v=p.stagger,y=p.overwrite,x=p.keyframes,b=p.defaults,w=p.scrollTrigger,T=p.yoyoEase,E=r.parent||dd,S=(jd(e)||Hd(e)?Fd(e[0]):"length"in r)?[e]:op(e);if(s._targets=S.length?gf(S):ef("GSAP target "+e+" not found. https://greensock.com",!Ed.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=y,x||v||Gd(m)||Gd(g)){if(r=s.vars,(a=s.timeline=new Wp({data:"nested",defaults:b||{},targets:E&&"nested"===E.data?E.vars.targets:S})).kill(),a.parent=a._dp=od(s),a._start=0,v||Gd(m)||Gd(g)){if(h=S.length,d=v&&up(v),Ld(v))for(u in v)~tm.indexOf(u)&&(f||(f={}),f[u]=v[u]);for(o=0;o<h;o++)(l=Mf(r,em)).stagger=0,T&&(l.yoyoEase=T),f&&Pf(l,f),c=S[o],l.duration=+Jp(m,od(s),o,c,S),l.delay=(+Jp(g,od(s),o,c,S)||0)-s._delay,!v&&1===h&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(c,l,d?d(o,c,S):0),a._ease=kp.none;a.duration()?m=g=0:s.timeline=0}else if(x){kf(Rf(a.vars.defaults,{ease:"none"})),a._ease=Lp(x.ease||r.ease||"none");var A,C,R,P=0;if(jd(x))x.forEach((function(t){return a.to(S,t,">")})),a.duration();else{for(u in l={},x)"ease"===u||"easeEach"===u||Zp(u,x[u],l,x.easeEach);for(u in l)for(A=l[u].sort((function(t,e){return t.t-e.t})),P=0,o=0;o<A.length;o++)(R={ease:(C=A[o]).e,duration:(C.t-(o?A[o-1].t:0))/100*m})[u]=C.v,a.to(S,R,P),P+=R.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==y||hd||(Vp=od(s),dd.killTweensOf(S),Vp=0),Vf(E,od(s),n),r.reversed&&s.reverse(),r.paused&&s.paused(!0),(_||!m&&!x&&s._start===bf(E._time)&&Ud(_)&&Uf(od(s))&&"nested"!==E.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),w&&Yf(od(s),w),s}ld(e,t);var r=e.prototype;return r.render=function(t,e,r){var n,i,s,a,o,l,h,u,c,d=this._time,f=this._tDur,p=this._dur,m=t<0,g=t>f-Cd&&!m?f:t<Cd?0:t;if(p){if(g!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(n=g,u=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+t,e,r);if(n=bf(g%a),g===f?(s=this._repeat,n=p):((s=~~(g/a))&&s===g/a&&(n=p,s--),n>p&&(n=p)),(l=this._yoyo&&1&s)&&(c=this._yEase,n=p-n),o=Gf(this._tTime,a),n===d&&!r&&this._initted)return this._tTime=g,this;s!==o&&(u&&this._yEase&&Bp(u,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=r=1,this.render(bf(a*s),!0).invalidate()._lock=0))}if(!this._initted){if($f(this,m?t:n,r,e,g))return this._tTime=0,this;if(d!==this._time)return this;if(p!==this._dur)return this.render(t,e,r)}if(this._tTime=g,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(c||this._ease)(n/p),this._from&&(this.ratio=h=1-h),n&&!d&&!e&&(vp(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(h,i.d),i=i._next;u&&u.render(t<0?t:!n&&l?-1e-8:u._dur*u._ease(n/this._dur),e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&Lf(this,t,0,r),vp(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!e&&this.parent&&vp(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&Lf(this,t,0,!0),(t||!p)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Nf(this,1),e||m&&!d||!(g||d||l)||(vp(this,g===f?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,r,n){var i,s,a,o=t.ratio,l=e<0||!e&&(!t._start&&qf(t)&&(t._initted||!Kf(t))||(t._ts<0||t._dp._ts<0)&&!Kf(t))?0:1,h=t._rDelay,u=0;if(h&&t._repeat&&(u=np(0,t._tDur,e),s=Gf(u,h),t._yoyo&&1&s&&(l=1-l),s!==Gf(t._tTime,h)&&(o=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==o||ud||n||t._zTime===Cd||!e&&t._zTime){if(!t._initted&&$f(t,e,n,r,u))return;for(a=t._zTime,t._zTime=e||(r?Cd:0),r||(r=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,i=t._pt;i;)i.r(l,i.d),i=i._next;e<0&&Lf(t,e,0,!0),t._onUpdate&&!r&&vp(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&vp(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Nf(t,1),r||ud||(vp(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,r);return this},r.targets=function(){return this._targets},r.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},r.resetTo=function(t,e,r,n){yd||Ip.wake(),this._ts||this.play();var i=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Qp(this,i),function(t,e,r,n,i,s,a){var o,l,h,u,c=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!c)for(c=t._ptCache[e]=[],h=t._ptLookup,u=t._targets.length;u--;){if((o=h[u][e])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==e&&o.fp!==e;)o=o._next;if(!o)return Yp=1,t.vars[e]="+=0",Qp(t,a),Yp=0,1;c.push(o)}for(u=c.length;u--;)(o=(l=c[u])._pt||l).s=!n&&0!==n||i?o.s+(n||0)+s*o.c:n,o.c=r-o.s,l.e&&(l.e=xf(r)+ip(l.e)),l.b&&(l.b=o.s+ip(l.b))}(this,t,e,r,n,this._ease(i/this._dur),i)?this.resetTo(t,e,r,n):(Xf(this,0),this.parent||Df(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?yp(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Vp&&!0!==Vp.vars.overwrite)._first||yp(this),this.parent&&r!==this.timeline.totalDuration()&&Qf(this,this._dur*this.timeline._tDur/r,0,1),this}var n,i,s,a,o,l,h,u=this._targets,c=t?op(t):u,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,n=r===e.length;n&&r--&&t[r]===e[r];);return r<0}(u,c))return"all"===e&&(this._pt=0),yp(this);for(n=this._op=this._op||[],"all"!==e&&(Od(e)&&(o={},yf(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var r,n,i,s,a=t[0]?_f(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(n in r=Pf({},e),o)if(n in r)for(i=(s=o[n].split(",")).length;i--;)r[s[i]]=r[n];return r}(u,e)),h=u.length;h--;)if(~c.indexOf(u[h]))for(o in i=d[h],"all"===e?(n[h]=e,a=i,s={}):(s=n[h]=n[h]||{},a=e),a)(l=i&&i[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Of(this,l,"_pt"),delete i[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&f&&yp(this),this},e.to=function(t,r){return new e(t,r,arguments[2])},e.from=function(t,e){return ep(1,arguments)},e.delayedCall=function(t,r,n,i){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},e.fromTo=function(t,e,r){return ep(2,arguments)},e.set=function(t,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(t,r)},e.killTweensOf=function(t,e,r){return dd.killTweensOf(t,e,r)},e}(Xp);Rf(rm.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),yf("staggerTo,staggerFrom,staggerFromTo",(function(t){rm[t]=function(){var e=new Wp,r=sp.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var nm=function(t,e,r){return t[e]=r},im=function(t,e,r){return t[e](r)},sm=function(t,e,r,n){return t[e](n.fp,r)},am=function(t,e,r){return t.setAttribute(e,r)},om=function(t,e){return Nd(t[e])?im:Bd(t[e])&&t.setAttribute?am:nm},lm=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},hm=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},um=function(t,e){var r=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+n,r=r._next;n+=e.c}e.set(e.t,e.p,n,e)},cm=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},dm=function(t,e,r,n){for(var i,s=this._pt;s;)i=s._next,s.p===n&&s.modifier(t,e,r),s=i},fm=function(t){for(var e,r,n=this._pt;n;)r=n._next,n.p===t&&!n.op||n.op===t?Of(this,n,"_pt"):n.dep||(e=1),n=r;return!e},pm=function(t,e,r,n){n.mSet(t,e,n.m.call(n.tween,r,n.mt),n)},mm=function(t){for(var e,r,n,i,s=t._pt;s;){for(e=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:i)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:i=s,s=e}t._pt=n},gm=function(){function t(t,e,r,n,i,s,a,o,l){this.t=e,this.s=n,this.c=i,this.p=r,this.r=s||lm,this.d=a||this,this.set=o||nm,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=pm,this.m=t,this.mt=r,this.tween=e},t}();yf(mf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return lf[t]=1})),Qd.TweenMax=Qd.TweenLite=rm,Qd.TimelineLite=Qd.TimelineMax=Wp,dd=new Wp({sortChildren:!1,defaults:Sd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ed.stringFilter=Pp;var _m=[],vm={},ym=[],xm=0,bm=function(t){return(vm[t]||ym).map((function(t){return t()}))},wm=function(){var t=Date.now(),e=[];t-xm>2&&(bm("matchMediaInit"),_m.forEach((function(t){var r,n,i,s,a=t.queries,o=t.conditions;for(n in a)(r=fd.matchMedia(a[n]).matches)&&(i=1),r!==o[n]&&(o[n]=r,s=1);s&&(t.revert(),i&&e.push(t))})),bm("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t)})),xm=t,bm("matchMedia"))},Tm=function(){function t(t,e){this.selector=e&&lp(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,r){Nd(t)&&(r=e,e=t,t=Nd);var n=this,i=function(){var t,i=cd,s=n.selector;return i&&i!==n&&i.data.push(n),r&&(n.selector=lp(r)),cd=n,t=e.apply(n,arguments),Nd(t)&&n._r.push(t),cd=i,n.selector=s,n.isReverted=!1,t};return n.last=i,t===Nd?i(n):t?n[t]=i:i},e.ignore=function(t){var e=cd;cd=null,t(this),cd=e},e.getTweens=function(){var e=[];return this.data.forEach((function(r){return r instanceof t?e.push.apply(e,r.getTweens()):r instanceof rm&&!(r.parent&&"nested"===r.parent.data)&&e.push(r)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var r=this;if(t){var n=this.getTweens();this.data.forEach((function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(t){return n.splice(n.indexOf(t),1)})))})),n.map((function(t){return{g:t.globalTime(0),t}})).sort((function(t,e){return e.g-t.g||-1})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof Xp)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,r)})),this.isReverted=!0}else this.data.forEach((function(t){return t.kill&&t.kill()}));if(this.clear(),e){var i=_m.indexOf(this);~i&&_m.splice(i,1)}},e.revert=function(t){this.kill(t||{})},t}(),Em=function(){function t(t){this.contexts=[],this.scope=t}var e=t.prototype;return e.add=function(t,e,r){Ld(t)||(t={matches:t});var n,i,s,a=new Tm(0,r||this.scope),o=a.conditions={};for(i in this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===i?s=1:(n=fd.matchMedia(t[i]))&&(_m.indexOf(a)<0&&_m.push(a),(o[i]=n.matches)&&(s=1),n.addListener?n.addListener(wm):n.addEventListener("change",wm));return s&&e(a),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),Sm={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return xp(t)}))},timeline:function(t){return new Wp(t)},getTweensOf:function(t,e){return dd.getTweensOf(t,e)},getProperty:function(t,e,r,n){Od(t)&&(t=op(t)[0]);var i=_f(t||{}).get,s=r?Cf:Af;return"native"===r&&(r=""),t?e?s((cf[e]&&cf[e].get||i)(t,e,r,n)):function(e,r,n){return s((cf[e]&&cf[e].get||i)(t,e,r,n))}:t},quickSetter:function(t,e,r){if((t=op(t)).length>1){var n=t.map((function(t){return Rm.quickSetter(t,e,r)})),i=n.length;return function(t){for(var e=i;e--;)n[e](t)}}t=t[0]||{};var s=cf[e],a=_f(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(e){var n=new s;vd._pt=0,n.init(t,r?e+r:e,vd,0,[t]),n.render(1,n),vd._pt&&cm(1,vd)}:a.set(t,o);return s?l:function(e){return l(t,o,r?e+r:e,a,1)}},quickTo:function(t,e,r){var n,i=Rm.to(t,Pf(((n={})[e]="+=0.1",n.paused=!0,n),r||{})),s=function(t,r,n){return i.resetTo(e,t,r,n)};return s.tween=i,s},isTweening:function(t){return dd.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Lp(t.ease,Sd.ease)),If(Sd,t||{})},config:function(t){return If(Ed,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,n=t.plugins,i=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!cf[t]&&!Qd[t]&&ef(e+" effect requires "+t+" plugin.")})),df[e]=function(t,e,n){return r(op(t),Rf(e||{},i),n)},s&&(Wp.prototype[e]=function(t,r,n){return this.add(df[e](t,Ld(r)?r:(n=r)&&{},this),n)})},registerEase:function(t,e){kp[t]=Lp(e)},parseEase:function(t,e){return arguments.length?Lp(t,e):kp},getById:function(t){return dd.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,n,i=new Wp(t);for(i.smoothChildTiming=Ud(t.smoothChildTiming),dd.remove(i),i._dp=0,i._time=i._tTime=dd._time,r=dd._first;r;)n=r._next,!e&&!r._dur&&r instanceof rm&&r.vars.onComplete===r._targets[0]||Vf(i,r,r._start-r._delay),r=n;return Vf(dd,i,0),i},context:function(t,e){return t?new Tm(t,e):cd},matchMedia:function(t){return new Em(t)},matchMediaRefresh:function(){return _m.forEach((function(t){var e,r,n=t.conditions;for(r in n)n[r]&&(n[r]=!1,e=1);e&&t.revert()}))||wm()},addEventListener:function(t,e){var r=vm[t]||(vm[t]=[]);~r.indexOf(e)||r.push(e)},removeEventListener:function(t,e){var r=vm[t],n=r&&r.indexOf(e);n>=0&&r.splice(n,1)},utils:{wrap:function t(e,r,n){var i=r-e;return jd(e)?pp(e,t(0,e.length),r):rp(n,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,r,n){var i=r-e,s=2*i;return jd(e)?pp(e,t(0,e.length-1),r):rp(n,(function(t){return e+((t=(s+(t-e)%s)%s||0)>i?s-t:t)}))},distribute:up,random:fp,snap:dp,normalize:function(t,e,r){return gp(t,e,0,1,r)},getUnit:ip,clamp:function(t,e,r){return rp(r,(function(r){return np(t,e,r)}))},splitColor:Ep,toArray:op,selector:lp,mapRange:gp,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||ip(r))}},interpolate:function t(e,r,n,i){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var a,o,l,h,u,c=Od(e),d={};if(!0===n&&(i=1)&&(n=null),c)e={p:e},r={p:r};else if(jd(e)&&!jd(r)){for(l=[],h=e.length,u=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(u,~~t);return l[e](t-e)},n=r}else i||(e=Pf(jd(e)?[]:{},e));if(!l){for(a in r)qp.call(d,e,a,"get",r[a]);s=function(t){return cm(t,d)||(c?e.p:e)}}}return rp(n,s)},shuffle:hp},install:Jd,effects:df,ticker:Ip,updateRoot:Wp.updateRoot,plugins:cf,globalTimeline:dd,core:{PropTween:gm,globals:rf,Tween:rm,Timeline:Wp,Animation:Xp,getCache:_f,_removeLinkedListItem:Of,reverting:function(){return ud},context:function(t){return t&&cd&&(cd.data.push(t),t._ctx=cd),cd},suppressOverwrites:function(t){return hd=t}}};yf("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Sm[t]=rm[t]})),Ip.add(Wp.updateRoot),vd=Sm.to({},{duration:0});var Am=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},Cm=function(t,e){return{name:t,rawVars:1,init:function(t,r,n){n._onInit=function(t){var n,i;if(Od(r)&&(n={},yf(r,(function(t){return n[t]=1})),r=n),e){for(i in n={},r)n[i]=e(r[i]);r=n}!function(t,e){var r,n,i,s=t._targets;for(r in e)for(n=s.length;n--;)(i=t._ptLookup[n][r])&&(i=i.d)&&(i._pt&&(i=Am(i,r)),i&&i.modifier&&i.modifier(e[r],t,s[n],r))}(t,r)}}}},Rm=Sm.registerPlugin({name:"attr",init:function(t,e,r,n,i){var s,a,o;for(s in this.tween=r,e)o=t.getAttribute(s)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[s],n,i,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var r=e._pt;r;)ud?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r],0,0,0,0,0,1)}},Cm("roundProps",cp),Cm("modifiers"),Cm("snap",dp))||Sm;rm.version=Wp.version=Rm.version="3.11.3",gd=1,zd()&&Mp(),kp.Power0,kp.Power1,kp.Power2,kp.Power3,kp.Power4,kp.Linear,kp.Quad,kp.Cubic,kp.Quart,kp.Quint,kp.Strong,kp.Elastic,kp.Back,kp.SteppedEase,kp.Bounce,kp.Sine,kp.Expo,kp.Circ;var Pm,Im,Mm,km,Dm,Om,Nm,Fm,Bm={},Lm=180/Math.PI,Um=Math.PI/180,zm=Math.atan2,Gm=/([A-Z])/g,Hm=/(left|right|width|margin|padding|x)/i,jm=/[\s,\(]\S/,Xm={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wm=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Vm=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Ym=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},$m=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},qm=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Km=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Qm=function(t,e,r){return t.style[e]=r},Zm=function(t,e,r){return t.style.setProperty(e,r)},Jm=function(t,e,r){return t._gsap[e]=r},tg=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},eg=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},rg=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},ng="transform",ig=ng+"Origin",sg=function(t,e){var r=this,n=this.target,i=n.style;if(t in Bm){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=Xm[t]||t).indexOf(",")?t.split(",").forEach((function(t){return r.tfm[t]=Tg(n,t)})):this.tfm[t]=n._gsap.x?n._gsap[t]:Tg(n,t)),this.props.indexOf(ng)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(ig,e,"")),t=ng}(i||e)&&this.props.push(t,e,i[t])},ag=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},og=function(){var t,e,r=this.props,n=this.target,i=n.style,s=n._gsap;for(t=0;t<r.length;t+=3)r[t+1]?n[r[t]]=r[t+2]:r[t+2]?i[r[t]]=r[t+2]:i.removeProperty(r[t].replace(Gm,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),!(t=Nm())||t.isStart||i[ng]||(ag(i),s.uncache=1)}},lg=function(t,e){var r={target:t,props:[],revert:og,save:sg};return e&&e.split(",").forEach((function(t){return r.save(t)})),r},hg=function(t,e){var r=Im.createElementNS?Im.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Im.createElement(t);return r.style?r:Im.createElement(t)},ug=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(Gm,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,dg(r)||r,1)||""},cg="O,Moz,ms,Ms,Webkit".split(","),dg=function(t,e,r){var n=(e||Dm).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(cg[i]+t in n););return i<0?null:(3===i?"ms":i>=0?cg[i]:"")+t},fg=function(){"undefined"!=typeof window&&window.document&&(Pm=window,Im=Pm.document,Mm=Im.documentElement,Dm=hg("div")||{style:{}},hg("div"),ng=dg(ng),ig=ng+"Origin",Dm.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Fm=!!dg("perspective"),Nm=Rm.core.reverting,km=1)},pg=function t(e){var r,n=hg("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(Mm.appendChild(n),n.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Mm.removeChild(n),this.style.cssText=a,r},mg=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},gg=function(t){var e;try{e=t.getBBox()}catch(r){e=pg.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===pg||(e=pg.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+mg(t,["x","cx","x1"])||0,y:+mg(t,["y","cy","y1"])||0,width:0,height:0}},_g=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!gg(t))},vg=function(t,e){if(e){var r=t.style;e in Bm&&e!==ig&&(e=ng),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(Gm,"-$1").toLowerCase())):r.removeAttribute(e)}},yg=function(t,e,r,n,i,s){var a=new gm(t._pt,e,r,0,1,s?Km:qm);return t._pt=a,a.b=n,a.e=i,t._props.push(r),a},xg={deg:1,rad:1,turn:1},bg={grid:1,flex:1},wg=function t(e,r,n,i){var s,a,o,l,h=parseFloat(n)||0,u=(n+"").trim().substr((h+"").length)||"px",c=Dm.style,d=Hm.test(r),f="svg"===e.tagName.toLowerCase(),p=(f?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===i,_="%"===i;return i===u||!h||xg[i]||xg[u]?h:("px"!==u&&!g&&(h=t(e,r,n,"px")),l=e.getCTM&&_g(e),!_&&"%"!==u||!Bm[r]&&!~r.indexOf("adius")?(c[d?"width":"height"]=m+(g?u:i),a=~r.indexOf("adius")||"em"===i&&e.appendChild&&!f?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Im&&a.appendChild||(a=Im.body),(o=a._gsap)&&_&&o.width&&d&&o.time===Ip.time&&!o.uncache?xf(h/o.width*m):((_||"%"===u)&&!bg[ug(a,"display")]&&(c.position=ug(e,"position")),a===e&&(c.position="static"),a.appendChild(Dm),s=Dm[p],a.removeChild(Dm),c.position="absolute",d&&_&&((o=_f(a)).time=Ip.time,o.width=a[p]),xf(g?s*h/m:s&&h?m/s*h:0))):(s=l?e.getBBox()[d?"width":"height"]:e[p],xf(_?h/s*m:h/100*s)))},Tg=function(t,e,r,n){var i;return km||fg(),e in Xm&&"transform"!==e&&~(e=Xm[e]).indexOf(",")&&(e=e.split(",")[0]),Bm[e]&&"transform"!==e?(i=Og(t,n),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Ng(ug(t,ig))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=Cg[e]&&Cg[e](t,e,r)||ug(t,e)||vf(t,e)||("opacity"===e?1:0)),r&&!~(i+"").trim().indexOf(" ")?wg(t,e,i,r)+r:i},Eg=function(t,e,r,n){if(!r||"none"===r){var i=dg(e,t,1),s=i&&ug(t,i,1);s&&s!==r?(e=i,r=s):"borderColor"===e&&(r=ug(t,"borderTopColor"))}var a,o,l,h,u,c,d,f,p,m,g,_=new gm(this._pt,t.style,e,0,1,um),v=0,y=0;if(_.b=r,_.e=n,r+="","auto"==(n+="")&&(t.style[e]=n,n=ug(t,e)||n,t.style[e]=r),Pp(a=[r,n]),n=a[1],l=(r=a[0]).match(Vd)||[],(n.match(Vd)||[]).length){for(;o=Vd.exec(n);)d=o[0],p=n.substring(v,o.index),u?u=(u+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(u=1),d!==(c=l[y++]||"")&&(h=parseFloat(c)||0,g=c.substr((h+"").length),"="===d.charAt(1)&&(d=wf(h,d)+g),f=parseFloat(d),m=d.substr((f+"").length),v=Vd.lastIndex-m.length,m||(m=m||Ed.units[e]||g,v===n.length&&(n+=m,_.e+=m)),g!==m&&(h=wg(t,e,c,m)||0),_._pt={_next:_._pt,p:p||1===y?p:",",s:h,c:f-h,m:u&&u<4||"zIndex"===e?Math.round:0});_.c=v<n.length?n.substring(v,n.length):""}else _.r="display"===e&&"none"===n?Km:qm;return $d.test(n)&&(_.e=0),this._pt=_,_},Sg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ag=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,s=e.t,a=s.style,o=e.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(i=(o=o.split(",")).length;--i>-1;)r=o[i],Bm[r]&&(n=1,r="transformOrigin"===r?ig:ng),vg(s,r);n&&(vg(s,ng),l&&(l.svg&&s.removeAttribute("transform"),Og(s,1),l.uncache=1,ag(a)))}},Cg={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data){var s=t._pt=new gm(t._pt,e,r,0,0,Ag);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},Rg=[1,0,0,1,0,0],Pg={},Ig=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Mg=function(t){var e=ug(t,ng);return Ig(e)?Rg:e.substr(7).match(Wd).map(xf)},kg=function(t,e){var r,n,i,s,a=t._gsap||_f(t),o=t.style,l=Mg(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Rg:l:(l!==Rg||t.offsetParent||t===Mm||a.svg||(i=o.display,o.display="block",(r=t.parentNode)&&t.offsetParent||(s=1,n=t.nextElementSibling,Mm.appendChild(t)),l=Mg(t),i?o.display=i:vg(t,"display"),s&&(n?r.insertBefore(t,n):r?r.appendChild(t):Mm.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Dg=function(t,e,r,n,i,s){var a,o,l,h=t._gsap,u=i||kg(t,!0),c=h.xOrigin||0,d=h.yOrigin||0,f=h.xOffset||0,p=h.yOffset||0,m=u[0],g=u[1],_=u[2],v=u[3],y=u[4],x=u[5],b=e.split(" "),w=parseFloat(b[0])||0,T=parseFloat(b[1])||0;r?u!==Rg&&(o=m*v-g*_)&&(l=w*(-g/o)+T*(m/o)-(m*x-g*y)/o,w=w*(v/o)+T*(-_/o)+(_*x-v*y)/o,T=l):(w=(a=gg(t)).x+(~b[0].indexOf("%")?w/100*a.width:w),T=a.y+(~(b[1]||b[0]).indexOf("%")?T/100*a.height:T)),n||!1!==n&&h.smooth?(y=w-c,x=T-d,h.xOffset=f+(y*m+x*_)-y,h.yOffset=p+(y*g+x*v)-x):h.xOffset=h.yOffset=0,h.xOrigin=w,h.yOrigin=T,h.smooth=!!n,h.origin=e,h.originIsAbsolute=!!r,t.style[ig]="0px 0px",s&&(yg(s,h,"xOrigin",c,w),yg(s,h,"yOrigin",d,T),yg(s,h,"xOffset",f,h.xOffset),yg(s,h,"yOffset",p,h.yOffset)),t.setAttribute("data-svg-origin",w+" "+T)},Og=function(t,e){var r=t._gsap||new jp(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,s,a,o,l,h,u,c,d,f,p,m,g,_,v,y,x,b,w,T,E,S,A,C,R,P,I,M,k,D,O,N=t.style,F=r.scaleX<0,B="px",L="deg",U=getComputedStyle(t),z=ug(t,ig)||"0";return n=i=s=l=h=u=c=d=f=0,a=o=1,r.svg=!(!t.getCTM||!_g(t)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(N[ng]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[ng]?U[ng]:"")),N.scale=N.rotate=N.translate="none"),g=kg(t,r.svg),r.svg&&(r.uncache?(C=t.getBBox(),z=r.xOrigin-C.x+"px "+(r.yOrigin-C.y)+"px",A=""):A=!e&&t.getAttribute("data-svg-origin"),Dg(t,A||z,!!A||r.originIsAbsolute,!1!==r.smooth,g)),p=r.xOrigin||0,m=r.yOrigin||0,g!==Rg&&(x=g[0],b=g[1],w=g[2],T=g[3],n=E=g[4],i=S=g[5],6===g.length?(a=Math.sqrt(x*x+b*b),o=Math.sqrt(T*T+w*w),l=x||b?zm(b,x)*Lm:0,(c=w||T?zm(w,T)*Lm+l:0)&&(o*=Math.abs(Math.cos(c*Um))),r.svg&&(n-=p-(p*x+m*w),i-=m-(p*b+m*T))):(O=g[6],k=g[7],P=g[8],I=g[9],M=g[10],D=g[11],n=g[12],i=g[13],s=g[14],h=(_=zm(O,M))*Lm,_&&(A=E*(v=Math.cos(-_))+P*(y=Math.sin(-_)),C=S*v+I*y,R=O*v+M*y,P=E*-y+P*v,I=S*-y+I*v,M=O*-y+M*v,D=k*-y+D*v,E=A,S=C,O=R),u=(_=zm(-w,M))*Lm,_&&(v=Math.cos(-_),D=T*(y=Math.sin(-_))+D*v,x=A=x*v-P*y,b=C=b*v-I*y,w=R=w*v-M*y),l=(_=zm(b,x))*Lm,_&&(A=x*(v=Math.cos(_))+b*(y=Math.sin(_)),C=E*v+S*y,b=b*v-x*y,S=S*v-E*y,x=A,E=C),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,u=180-u),a=xf(Math.sqrt(x*x+b*b+w*w)),o=xf(Math.sqrt(S*S+O*O)),_=zm(E,S),c=Math.abs(_)>2e-4?_*Lm:0,f=D?1/(D<0?-D:D):0),r.svg&&(A=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Ig(ug(t,ng)),A&&t.setAttribute("transform",A))),Math.abs(c)>90&&Math.abs(c)<270&&(F?(a*=-1,c+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),e=e||r.uncache,r.x=n-((r.xPercent=n&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+B,r.y=i-((r.yPercent=i&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+B,r.z=s+B,r.scaleX=xf(a),r.scaleY=xf(o),r.rotation=xf(l)+L,r.rotationX=xf(h)+L,r.rotationY=xf(u)+L,r.skewX=c+L,r.skewY=d+L,r.transformPerspective=f+B,(r.zOrigin=parseFloat(z.split(" ")[2])||0)&&(N[ig]=Ng(z)),r.xOffset=r.yOffset=0,r.force3D=Ed.force3D,r.renderTransform=r.svg?Hg:Fm?Gg:Bg,r.uncache=0,r},Ng=function(t){return(t=t.split(" "))[0]+" "+t[1]},Fg=function(t,e,r){var n=ip(e);return xf(parseFloat(e)+parseFloat(wg(t,"x",r+"px",n)))+n},Bg=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Gg(t,e)},Lg="0deg",Ug="0px",zg=") ",Gg=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.z,l=r.rotation,h=r.rotationY,u=r.rotationX,c=r.skewX,d=r.skewY,f=r.scaleX,p=r.scaleY,m=r.transformPerspective,g=r.force3D,_=r.target,v=r.zOrigin,y="",x="auto"===g&&t&&1!==t||!0===g;if(v&&(u!==Lg||h!==Lg)){var b,w=parseFloat(h)*Um,T=Math.sin(w),E=Math.cos(w);w=parseFloat(u)*Um,b=Math.cos(w),s=Fg(_,s,T*b*-v),a=Fg(_,a,-Math.sin(w)*-v),o=Fg(_,o,E*b*-v+v)}m!==Ug&&(y+="perspective("+m+zg),(n||i)&&(y+="translate("+n+"%, "+i+"%) "),(x||s!==Ug||a!==Ug||o!==Ug)&&(y+=o!==Ug||x?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+zg),l!==Lg&&(y+="rotate("+l+zg),h!==Lg&&(y+="rotateY("+h+zg),u!==Lg&&(y+="rotateX("+u+zg),c===Lg&&d===Lg||(y+="skew("+c+", "+d+zg),1===f&&1===p||(y+="scale("+f+", "+p+zg),_.style[ng]=y||"translate(0, 0)"},Hg=function(t,e){var r,n,i,s,a,o=e||this,l=o.xPercent,h=o.yPercent,u=o.x,c=o.y,d=o.rotation,f=o.skewX,p=o.skewY,m=o.scaleX,g=o.scaleY,_=o.target,v=o.xOrigin,y=o.yOrigin,x=o.xOffset,b=o.yOffset,w=o.forceCSS,T=parseFloat(u),E=parseFloat(c);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=Um,f*=Um,r=Math.cos(d)*m,n=Math.sin(d)*m,i=Math.sin(d-f)*-g,s=Math.cos(d-f)*g,f&&(p*=Um,a=Math.tan(f-p),i*=a=Math.sqrt(1+a*a),s*=a,p&&(a=Math.tan(p),r*=a=Math.sqrt(1+a*a),n*=a)),r=xf(r),n=xf(n),i=xf(i),s=xf(s)):(r=m,s=g,n=i=0),(T&&!~(u+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(T=wg(_,"x",u,"px"),E=wg(_,"y",c,"px")),(v||y||x||b)&&(T=xf(T+v-(v*r+y*i)+x),E=xf(E+y-(v*n+y*s)+b)),(l||h)&&(a=_.getBBox(),T=xf(T+l/100*a.width),E=xf(E+h/100*a.height)),a="matrix("+r+","+n+","+i+","+s+","+T+","+E+")",_.setAttribute("transform",a),w&&(_.style[ng]=a)},jg=function(t,e,r,n,i){var s,a,o=360,l=Od(i),h=parseFloat(i)*(l&&~i.indexOf("rad")?Lm:1)-n,u=n+h+"deg";return l&&("short"===(s=i.split("_")[1])&&(h%=o)!=h%180&&(h+=h<0?o:-360),"cw"===s&&h<0?h=(h+36e9)%o-~~(h/o)*o:"ccw"===s&&h>0&&(h=(h-36e9)%o-~~(h/o)*o)),t._pt=a=new gm(t._pt,e,r,n,h,Vm),a.e=u,a.u="deg",t._props.push(r),a},Xg=function(t,e){for(var r in e)t[r]=e[r];return t},Wg=function(t,e,r){var n,i,s,a,o,l,h,u=Xg({},r._gsap),c=r.style;for(i in u.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),c[ng]=e,n=Og(r,1),vg(r,ng),r.setAttribute("transform",s)):(s=getComputedStyle(r)[ng],c[ng]=e,n=Og(r,1),c[ng]=s),Bm)(s=u[i])!==(a=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=ip(s)!==(h=ip(a))?wg(r,i,s,h):parseFloat(s),l=parseFloat(a),t._pt=new gm(t._pt,n,i,o,l-o,Wm),t._pt.u=h||0,t._props.push(i));Xg(n,u)};yf("padding,margin,Width,Radius",(function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map((function(r){return e<2?t+r:"border"+r+t}));Cg[e>1?"border"+t:t]=function(t,e,r,n,i){var s,o;if(arguments.length<4)return s=a.map((function(e){return Tg(t,e,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(n+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,i)}}));var Vg,Yg,$g={name:"css",register:fg,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s,a,o,l,h,u,c,d,f,p,m,g,_,v,y,x,b,w,T,E,S=this._props,A=t.style,C=r.vars.startAt;for(c in km||fg(),this.styles=this.styles||lg(t),x=this.styles.props,this.tween=r,e)if("autoRound"!==c&&(a=e[c],!cf[c]||!Kp(c,e,r,n,t,i)))if(h=typeof a,u=Cg[c],"function"===h&&(h=typeof(a=a.call(r,n,t,i))),"string"===h&&~a.indexOf("random(")&&(a=mp(a)),u)u(this,t,c,a,r)&&(y=1);else if("--"===c.substr(0,2))s=(getComputedStyle(t).getPropertyValue(c)+"").trim(),a+="",Cp.lastIndex=0,Cp.test(s)||(d=ip(s),f=ip(a)),f?d!==f&&(s=wg(t,c,s,f)+f):d&&(a+=d),this.add(A,"setProperty",s,a,n,i,0,0,c),S.push(c),x.push(c,0,A[c]);else if("undefined"!==h){if(C&&c in C?(s="function"==typeof C[c]?C[c].call(r,n,t,i):C[c],Od(s)&&~s.indexOf("random(")&&(s=mp(s)),ip(s+"")||(s+=Ed.units[c]||ip(Tg(t,c))||""),"="===(s+"").charAt(1)&&(s=Tg(t,c))):s=Tg(t,c),l=parseFloat(s),(p="string"===h&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),c in Xm&&("autoAlpha"===c&&(1===l&&"hidden"===Tg(t,"visibility")&&o&&(l=0),x.push("visibility",0,A.visibility),yg(this,A,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==c&&"transform"!==c&&~(c=Xm[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Bm)if(this.styles.save(c),g||((_=t._gsap).renderTransform&&!e.parseTransform||Og(t,e.parseTransform),v=!1!==e.smoothOrigin&&_.smooth,(g=this._pt=new gm(this._pt,A,ng,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===c)this._pt=new gm(this._pt,_,"scaleY",l,(p?wf(l,p+o):o)-l||0,Wm),this._pt.u=0,S.push("scaleY",c),c+="X";else{if("transformOrigin"===c){x.push(ig,0,A[ig]),w=void 0,T=void 0,E=void 0,T=(w=(b=a).split(" "))[0],E=w[1]||"50%","top"!==T&&"bottom"!==T&&"left"!==E&&"right"!==E||(b=T,T=E,E=b),w[0]=Sg[T]||T,w[1]=Sg[E]||E,a=w.join(" "),_.svg?Dg(t,a,0,v,0,this):((f=parseFloat(a.split(" ")[2])||0)!==_.zOrigin&&yg(this,_,"zOrigin",_.zOrigin,f),yg(this,A,c,Ng(s),Ng(a)));continue}if("svgOrigin"===c){Dg(t,a,1,v,0,this);continue}if(c in Pg){jg(this,_,c,l,p?wf(l,p+a):a);continue}if("smoothOrigin"===c){yg(this,_,"smooth",_.smooth,a);continue}if("force3D"===c){_[c]=a;continue}if("transform"===c){Wg(this,a,t);continue}}else c in A||(c=dg(c)||c);if(m||(o||0===o)&&(l||0===l)&&!jm.test(a)&&c in A)o||(o=0),(d=(s+"").substr((l+"").length))!==(f=ip(a)||(c in Ed.units?Ed.units[c]:d))&&(l=wg(t,c,s,f)),this._pt=new gm(this._pt,m?_:A,c,l,(p?wf(l,p+o):o)-l,m||"px"!==f&&"zIndex"!==c||!1===e.autoRound?Wm:$m),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=Ym);else if(c in A)Eg.call(this,t,c,s,p?p+a:a);else{if(!(c in t)){tf(c,a);continue}this.add(t,c,s||t[c],p?p+a:a,n,i)}m||(c in A?x.push(c,0,A[c]):x.push(c,1,s||t[c])),S.push(c)}y&&mm(this)},render:function(t,e){if(e.tween._time||!Nm())for(var r=e._pt;r;)r.r(t,r.d),r=r._next;else e.styles.revert()},get:Tg,aliases:Xm,getSetter:function(t,e,r){var n=Xm[e];return n&&n.indexOf(",")<0&&(e=n),e in Bm&&e!==ig&&(t._gsap.x||Tg(t,"x"))?r&&Om===r?"scale"===e?tg:Jm:(Om=r||{})&&("scale"===e?eg:rg):t.style&&!Bd(t.style[e])?Qm:~e.indexOf("-")?Zm:om(t,e)},core:{_removeProperty:vg,_getMatrix:kg}};Rm.utils.checkPrefix=dg,Rm.core.getStyleSaver=lg,Yg=yf("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Vg="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Bm[t]=1})),yf(Vg,(function(t){Ed.units[t]="deg",Pg[t]=1})),Xm[Yg[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Vg,yf("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Xm[e[1]]=Yg[e[0]]})),yf("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Ed.units[t]="px"})),Rm.registerPlugin($g);var qg=Rm.registerPlugin($g)||Rm;qg.core.Tween;class Kg{renderer;constructor(t){this.renderer=t}unitState=new Map;unitNodes=new Map;healthbarNodes=new Map;drawUnitAnimation(t){let e=this.unitNodes.get(t);e||(e=this.createUnitNode(t),this.unitState.set(t,{facing:tn.Right,animation:"idle",hp:t.hp,location:t.location,selected:!1}));const r=this.unitState.get(t),n=this.transformUnitToState(t);n.facing&&r.facing!==n.facing&&this.setUnitFacingDirection(t,n.facing),n.location.x===r.location.x&&n.location.y===r.location.y||this.moveUnit(t),n.animation!==r.animation&&("dead"===r.animation&&e.setState("idle"),"idle"===n.animation&&e.setState("idle"),"move"===n.animation&&e.setState("move"),"attack"===n.animation&&e.setState("attack"),"dead"===n.animation)&&(this.healthbarNodes.get(t).destroy(),this.healthbarNodes.delete(t),e.setState("die"),e.onLoop=()=>{e.setState("dead"),delete e.onLoop}),r.hp!==n.hp&&n.hp>0&&(t.maxHp>n.hp&&this.createNumberTextAnimation(t.location,r.hp-n.hp,"red"),r.hp<n.hp&&this.createNumberTextAnimation(t.location,Math.abs(r.hp-n.hp),"green"),"dead"===r.animation&&"dead"!==n.animation&&this.createHealthBar(t),this.createHealthBar(t)),this.unitState.set(t,Zr(r,n))}clearAllUnitsSelection(){[...this.unitState.entries()].forEach((([t])=>this.unselectUnit(t)))}selectUnit(t){const e=this.unitNodes.get(t),r=this.unitState.get(t);e.filters=[new ad],this.unitState.set(t,Zr(r,{selected:!0}))}unselectUnit(t){const e=this.unitNodes.get(t),r=this.unitState.get(t);e.filters=[],this.unitState.set(t,Zr(r,{selected:!1}))}createNumberTextAnimation(t,e,r){const n=new dc(e,{fontSize:14,fill:r});n.x=t.x+12,n.y=t.y,qg.to(n,{x:n.x+5,y:n.y-20,duration:1,onComplete:()=>n.destroy()}),this.renderer.container.addChild(n)}createUnitNode(t){const e=this.renderer.assetManager.getSprite(t.spriteId),r=new nd(e.texture,e.animations,"idle");r.animationSpeed=.075,r.position.copyFrom(t.location);const n=t.size/r.height;return r.scale.x=n,r.scale.y=n,this.unitNodes.set(t,r),this.renderer.container.addChild(r),this.createHealthBar(t),r}createHealthBar(t){this.healthbarNodes.has(t)&&this.healthbarNodes.get(t).destroy();const e=t.hp/t.maxHp,r=e>.6?32768:e>.3?16776960:16711680,n=new Bu;n.beginFill(r),n.drawRect(0,0,.8*t.size*e,5),n.endFill(),n.x=t.location.x+.1*t.size,n.y=t.location.y+t.size+6,this.healthbarNodes.set(t,n),this.renderer.container.addChild(n)}moveUnit(t){const e=this.unitNodes.get(t),r=this.healthbarNodes.get(t),n=this.unitState.get(t),i=this.transformUnitToState(t),s=dn(i.location,n.location);e.x+=s.x,e.y+=s.y,r.x=t.location.x+.1*t.size,r.y=t.location.y+t.size+6}transformUnitToState(t){const e=0===t.hp?"dead":t.action.state.speed>0&&!t.action.state.cooldown&&t.action.animation?t.action.animation:t.moveDirection?"move":"idle",r=t.action.state?.targetUnit?dn(t.location,t.action.state.targetUnit.location).x>0?tn.Left:tn.Right:t.moveDirection?t.moveDirection.x<0?tn.Left:tn.Right:void 0;return{hp:t.hp,location:t.location,facing:r,animation:e}}setUnitFacingDirection(t,e){const r=this.unitNodes.get(t);r.width*=-1,r.x+=e===tn.Left?r.width:-r.width}}class Qg{assetManager;application;container=new Ll;projectileAnimation;unitAnimation;constructor(t,e){this.assetManager=e,this.application=new nh({width:t.mapSize[0],height:t.mapSize[1]}),this.registerPixiInspector(),t.containerNode.appendChild(this.application.view),this.projectileAnimation=new id(this),this.unitAnimation=new Kg(this),this.application.stage.addChild(this.container)}lastState={units:[],projectiles:[]};selectUnits(t){this.unitAnimation.clearAllUnitsSelection(),t.forEach((t=>this.unitAnimation.selectUnit(t)))}renderScene(t){this.application.ticker.update(0),t.units.forEach((t=>this.unitAnimation.drawUnitAnimation(t))),t.projectiles.forEach((t=>this.projectileAnimation.drawProjectileAnimation(t))),wn(this.lastState.projectiles,...t.projectiles).forEach((t=>this.projectileAnimation.removeProjectile(t))),this.lastState={units:[...t.units],projectiles:[...t.projectiles]}}registerPixiInspector(){window.__PIXI_INSPECTOR_GLOBAL_HOOK__&&window.__PIXI_INSPECTOR_GLOBAL_HOOK__.register({PIXI:e})}}function Zg(t){switch(t){case"w":return{x:0,y:-1};case"s":return{x:0,y:1};case"a":return{x:-1,y:0};case"d":return{x:1,y:0}}}class Jg{moveDirectionChange=t=>{};hookMoveDirectionChangeCallback(t){this.moveDirectionChange=t}hookKeyboardEvents(){const t=["w","s","a","d"],e=[...t];let r;window.addEventListener("keydown",(t=>{if(!e.includes(t.key))return;ft(e,t.key);const n=Zg(t.key);r=r?cn(r,n):n,this.moveDirectionChange(r)})),window.addEventListener("keyup",(n=>{if(!t.includes(n.key))return;if(e.includes(n.key))return;e.push(n.key);const i=Zg(n.key);r=dn(r,i),an(r)&&(r=void 0),this.moveDirectionChange(r)}))}}class t_{renderer;battlefield;constructor(t,e){this.renderer=t,this.battlefield=e}circleGraphics=new Bu;spellId;position;init(){this.renderer.container.addChild(this.circleGraphics)}startSpellSelection(t,e){this.spellId=t,this.position=e,this.highlightUnitSelection(),this.drawSelectionRange()}setSpellPosition(t){this.position=t,this.highlightUnitSelection(),this.drawSelectionRange()}stopSpellSelection(t){t&&this.battlefield.spellsContext.castSpell(this.spellId,this.position),this.position=null,this.spellId=null,this.clearSelectionRange(),this.highlightUnitSelection()}highlightUnitSelection(){let t=[];t=this.spellId?this.battlefield.spellsContext.getTargetUnits(this.spellId,this.position):[],this.renderer.selectUnits(t)}drawSelectionRange(){const t=this.battlefield.spellsContext.getSpellRange(this.spellId);this.clearSelectionRange(),this.circleGraphics.alpha=.1,this.circleGraphics.beginFill(16777215),this.circleGraphics.drawCircle(this.position.x,this.position.y,t),this.circleGraphics.endFill()}clearSelectionRange(){this.circleGraphics.clear()}}class e_{config;mod;constructor(t,e){this.config=t,this.mod=e,this.renderer=new Qg(t,e.assetManager),this.battleField=new jn(t,e.resourceManager),this.player=new Jg,this.spellSelection=new t_(this.renderer,this.battleField)}spellSelection;battleField;renderer;player;isRunning=!1;get assetManager(){return this.mod.assetManager}init(){this.battleField.init(this.mod.battlefieldInit(this.config)),this.spellSelection.init(),this.player.hookKeyboardEvents(),this.player.hookMoveDirectionChangeCallback((t=>this.battleField.controlManuallyControlledUnit(t)))}stop(){this.isRunning=!1}start(){this.isRunning=!0,this.loop()}tick(){this.battleField.tick();const t=this.battleField.getState();this.renderer.renderScene(t),this.battleField.isFinished&&(this.isRunning=!1)}loop=()=>{this.isRunning&&(this.tick(),requestAnimationFrame(this.loop))}}const r_=JSON.parse('{"frames":{"buildings/inn.png":{"frame":{"x":1,"y":1,"w":124,"h":115},"rotated":true,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":124,"h":115},"sourceSize":{"w":124,"h":115}},"icons/spell_book.png":{"frame":{"x":186,"y":1,"w":28,"h":29},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":28,"h":29},"sourceSize":{"w":28,"h":29}},"icons/spells/archer.png":{"frame":{"x":118,"y":1,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"icons/spells/fireball.png":{"frame":{"x":118,"y":35,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"icons/spells/hearth.png":{"frame":{"x":118,"y":69,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"icons/spells/ice_berg.png":{"frame":{"x":152,"y":1,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"icons/spells/lightning.png":{"frame":{"x":152,"y":35,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"icons/spells/shield_break.png":{"frame":{"x":152,"y":69,"w":32,"h":32},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":32,"h":32},"sourceSize":{"w":32,"h":32}},"sprites/archer/archer-0.png":{"frame":{"x":290,"y":31,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-1.png":{"frame":{"x":297,"y":16,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-2.png":{"frame":{"x":280,"y":112,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-3.png":{"frame":{"x":296,"y":77,"w":12,"h":12},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":4,"w":12,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-4.png":{"frame":{"x":290,"y":31,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-5.png":{"frame":{"x":282,"y":80,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":2,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-6.png":{"frame":{"x":290,"y":31,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-7.png":{"frame":{"x":292,"y":62,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":2,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-8.png":{"frame":{"x":303,"y":46,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-9.png":{"frame":{"x":308,"y":91,"w":11,"h":12},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":4,"w":11,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-10.png":{"frame":{"x":311,"y":16,"w":12,"h":12},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":4,"w":12,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-11.png":{"frame":{"x":300,"y":1,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-12.png":{"frame":{"x":297,"y":16,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-13.png":{"frame":{"x":306,"y":61,"w":11,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":11,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-14.png":{"frame":{"x":307,"y":109,"w":11,"h":12},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":4,"w":11,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-15.png":{"frame":{"x":297,"y":16,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-16.png":{"frame":{"x":280,"y":97,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-17.png":{"frame":{"x":294,"y":95,"w":12,"h":12},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":4,"w":12,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-18.png":{"frame":{"x":234,"y":115,"w":13,"h":9},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":7,"w":13,"h":9},"sourceSize":{"w":16,"h":16}},"sprites/archer/archer-19.png":{"frame":{"x":234,"y":22,"w":13,"h":7},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":9,"w":13,"h":7},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-0.png":{"frame":{"x":270,"y":1,"w":13,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":13,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-1.png":{"frame":{"x":275,"y":31,"w":13,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":3,"w":13,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-2.png":{"frame":{"x":270,"y":1,"w":13,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":13,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-3.png":{"frame":{"x":249,"y":109,"w":14,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":14,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-4.png":{"frame":{"x":278,"y":64,"w":12,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":12,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-5.png":{"frame":{"x":267,"y":82,"w":13,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":3,"w":13,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-6.png":{"frame":{"x":278,"y":64,"w":12,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":12,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-7.png":{"frame":{"x":267,"y":82,"w":13,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":3,"w":13,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-8.png":{"frame":{"x":289,"y":46,"w":12,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":12,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-9.png":{"frame":{"x":304,"y":31,"w":12,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":3,"w":12,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-10.png":{"frame":{"x":263,"y":66,"w":13,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":13,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-11.png":{"frame":{"x":285,"y":1,"w":13,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":3,"w":13,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-12.png":{"frame":{"x":281,"y":17,"w":12,"h":14},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":2,"y":2,"w":12,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-13.png":{"frame":{"x":294,"y":109,"w":11,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":3,"w":11,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-14.png":{"frame":{"x":220,"y":115,"w":10,"h":12},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":2,"y":4,"w":10,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-15.png":{"frame":{"x":294,"y":109,"w":11,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":3,"w":11,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-16.png":{"frame":{"x":294,"y":109,"w":11,"h":13},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":3,"w":11,"h":13},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-17.png":{"frame":{"x":220,"y":115,"w":10,"h":12},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":2,"y":4,"w":10,"h":12},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-18.png":{"frame":{"x":314,"y":1,"w":10,"h":10},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":6,"w":10,"h":10},"sourceSize":{"w":16,"h":16}},"sprites/inquisitor/inquisitor-19.png":{"frame":{"x":249,"y":22,"w":12,"h":7},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":9,"w":12,"h":7},"sourceSize":{"w":16,"h":16}},"sprites/projectiles/projectile.png":{"frame":{"x":310,"y":76,"w":10,"h":10},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":3,"w":10,"h":10},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-0.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-1.png":{"frame":{"x":248,"y":72,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-2.png":{"frame":{"x":259,"y":49,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-3.png":{"frame":{"x":248,"y":72,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-4.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-5.png":{"frame":{"x":243,"y":54,"w":14,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":14,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-6.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-7.png":{"frame":{"x":244,"y":31,"w":14,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":14,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-8.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-9.png":{"frame":{"x":260,"y":31,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-10.png":{"frame":{"x":274,"y":48,"w":13,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":3,"y":2,"w":13,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-11.png":{"frame":{"x":252,"y":89,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-12.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-13.png":{"frame":{"x":252,"y":89,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-14.png":{"frame":{"x":254,"y":1,"w":15,"h":14},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1,"y":2,"w":15,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-15.png":{"frame":{"x":265,"y":106,"w":13,"h":15},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":1,"w":13,"h":15},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-16.png":{"frame":{"x":237,"y":91,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":2,"y":0,"w":13,"h":16},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-17.png":{"frame":{"x":254,"y":1,"w":15,"h":14},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1,"y":2,"w":15,"h":14},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-18.png":{"frame":{"x":263,"y":18,"w":16,"h":11},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":5,"w":16,"h":11},"sourceSize":{"w":16,"h":16}},"sprites/skeleton/skeleton-19.png":{"frame":{"x":216,"y":22,"w":16,"h":8},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":8,"w":16,"h":8},"sourceSize":{"w":16,"h":16}},"sprites/steam_dragon/Steam Dragon spritesheet-0.png":{"frame":{"x":118,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-1.png":{"frame":{"x":206,"y":32,"w":19,"h":18},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":19,"h":18},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-2.png":{"frame":{"x":206,"y":53,"w":19,"h":18},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":19,"h":18},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-3.png":{"frame":{"x":186,"y":32,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-4.png":{"frame":{"x":118,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-5.png":{"frame":{"x":186,"y":53,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":0,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-6.png":{"frame":{"x":186,"y":74,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-7.png":{"frame":{"x":198,"y":95,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":0,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-8.png":{"frame":{"x":118,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-9.png":{"frame":{"x":226,"y":32,"w":20,"h":16},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":4,"w":20,"h":16},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-10.png":{"frame":{"x":226,"y":54,"w":19,"h":15},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":5,"w":19,"h":15},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-11.png":{"frame":{"x":236,"y":1,"w":19,"h":16},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":4,"w":19,"h":16},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-12.png":{"frame":{"x":138,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-13.png":{"frame":{"x":206,"y":74,"w":18,"h":18},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":18,"h":18},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-14.png":{"frame":{"x":158,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-15.png":{"frame":{"x":216,"y":1,"w":19,"h":18},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":19,"h":18},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-16.png":{"frame":{"x":178,"y":103,"w":18,"h":19},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":1,"w":18,"h":19},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-17.png":{"frame":{"x":218,"y":94,"w":19,"h":17},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":0,"y":3,"w":19,"h":17},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-18.png":{"frame":{"x":226,"y":75,"w":20,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":6,"w":20,"h":14},"sourceSize":{"w":20,"h":20}},"sprites/steam_dragon/Steam Dragon spritesheet-19.png":{"frame":{"x":198,"y":116,"w":20,"h":9},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":11,"w":20,"h":9},"sourceSize":{"w":20,"h":20}}},"animations":{"sprites/archer/archer":["sprites/archer/archer-0.png","sprites/archer/archer-1.png","sprites/archer/archer-2.png","sprites/archer/archer-3.png","sprites/archer/archer-4.png","sprites/archer/archer-5.png","sprites/archer/archer-6.png","sprites/archer/archer-7.png","sprites/archer/archer-8.png","sprites/archer/archer-9.png","sprites/archer/archer-10.png","sprites/archer/archer-11.png","sprites/archer/archer-12.png","sprites/archer/archer-13.png","sprites/archer/archer-14.png","sprites/archer/archer-15.png","sprites/archer/archer-16.png","sprites/archer/archer-17.png","sprites/archer/archer-18.png","sprites/archer/archer-19.png"],"sprites/inquisitor/inquisitor":["sprites/inquisitor/inquisitor-0.png","sprites/inquisitor/inquisitor-1.png","sprites/inquisitor/inquisitor-2.png","sprites/inquisitor/inquisitor-3.png","sprites/inquisitor/inquisitor-4.png","sprites/inquisitor/inquisitor-5.png","sprites/inquisitor/inquisitor-6.png","sprites/inquisitor/inquisitor-7.png","sprites/inquisitor/inquisitor-8.png","sprites/inquisitor/inquisitor-9.png","sprites/inquisitor/inquisitor-10.png","sprites/inquisitor/inquisitor-11.png","sprites/inquisitor/inquisitor-12.png","sprites/inquisitor/inquisitor-13.png","sprites/inquisitor/inquisitor-14.png","sprites/inquisitor/inquisitor-15.png","sprites/inquisitor/inquisitor-16.png","sprites/inquisitor/inquisitor-17.png","sprites/inquisitor/inquisitor-18.png","sprites/inquisitor/inquisitor-19.png"],"sprites/skeleton/skeleton":["sprites/skeleton/skeleton-0.png","sprites/skeleton/skeleton-1.png","sprites/skeleton/skeleton-2.png","sprites/skeleton/skeleton-3.png","sprites/skeleton/skeleton-4.png","sprites/skeleton/skeleton-5.png","sprites/skeleton/skeleton-6.png","sprites/skeleton/skeleton-7.png","sprites/skeleton/skeleton-8.png","sprites/skeleton/skeleton-9.png","sprites/skeleton/skeleton-10.png","sprites/skeleton/skeleton-11.png","sprites/skeleton/skeleton-12.png","sprites/skeleton/skeleton-13.png","sprites/skeleton/skeleton-14.png","sprites/skeleton/skeleton-15.png","sprites/skeleton/skeleton-16.png","sprites/skeleton/skeleton-17.png","sprites/skeleton/skeleton-18.png","sprites/skeleton/skeleton-19.png"],"sprites/steam_dragon/Steam Dragon spritesheet":["sprites/steam_dragon/Steam Dragon spritesheet-0.png","sprites/steam_dragon/Steam Dragon spritesheet-1.png","sprites/steam_dragon/Steam Dragon spritesheet-2.png","sprites/steam_dragon/Steam Dragon spritesheet-3.png","sprites/steam_dragon/Steam Dragon spritesheet-4.png","sprites/steam_dragon/Steam Dragon spritesheet-5.png","sprites/steam_dragon/Steam Dragon spritesheet-6.png","sprites/steam_dragon/Steam Dragon spritesheet-7.png","sprites/steam_dragon/Steam Dragon spritesheet-8.png","sprites/steam_dragon/Steam Dragon spritesheet-9.png","sprites/steam_dragon/Steam Dragon spritesheet-10.png","sprites/steam_dragon/Steam Dragon spritesheet-11.png","sprites/steam_dragon/Steam Dragon spritesheet-12.png","sprites/steam_dragon/Steam Dragon spritesheet-13.png","sprites/steam_dragon/Steam Dragon spritesheet-14.png","sprites/steam_dragon/Steam Dragon spritesheet-15.png","sprites/steam_dragon/Steam Dragon spritesheet-16.png","sprites/steam_dragon/Steam Dragon spritesheet-17.png","sprites/steam_dragon/Steam Dragon spritesheet-18.png","sprites/steam_dragon/Steam Dragon spritesheet-19.png"]},"meta":{"app":"https://www.codeandweb.com/texturepacker","version":"1.0","image":"assets.png","format":"RGBA8888","size":{"w":325,"h":126},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:cbf18f6d62a2f379544c928e740c86bf:3eddea7b5128d20fbb909f752f70fe4a:a759b6bbc8381ac9c472b28f589ad0d6$"}}'),n_=r.p+"f6beaa508ac495f5f028.png?url";class i_{spriteSheet;assetRenderApplication=new nh;async init(){return ph.load(n_).then((t=>(this.spriteSheet=new Rc(t,r_),this.spriteSheet.parse())))}getSprite(t){const e=this.spriteSheet.textures[t+".png"]||this.spriteSheet.animations[t];if(!e)throw Error(`Texture doesn't exists for ${t}!`);return{texture:Array.isArray(e)?e:[e],animations:{idle:[0,4],move:[4,8],attack:[8,12],hurt:[12,16],die:[16,20],dead:19}}}getAsset(t){const e=this.spriteSheet.textures[t+".png"];if(!e)throw Error(`Texture doesn't exists for ${t}!`);const r=new Gl(e),n=this.assetRenderApplication.renderer.extract.base64(r);return r.destroy(),n}}const s_=r(280),a_=r(154);class o_{getUnitConfig(t){return Tr(s_,{id:t})||Tr(a_,{id:t})}}const l_=new URLSearchParams(window.location.search).get("mod"),h_={castle_wars:new class{assetManager=new i_;resourceManager=new o_;init(){return this.assetManager.init()}battlefieldInit(t){const e={x:t.mapSize[0]/20,y:t.mapSize[1]/2-50},r={x:t.mapSize[0]/20*18,y:t.mapSize[1]/2-50};return{units:[this.generateUnit("castle",e,1),this.generateUnit("castle",r,2)]}}generateUnit(t,e,r){const n=this.resourceManager.getUnitConfig(t),i={location:e,hp:n.maxHp,team:r,effects:n.effects||[],action:{state:{}}};return Zr({},n,i)}}}[l_],u_=document.getElementById("battleground");(0,i.s)(u_).render((0,n.jsx)("div",{children:(0,n.jsx)((({children:t})=>{const[e,r]=(0,s.useState)(),i=(0,s.useRef)();return(0,s.useEffect)((()=>{const t={containerNode:i.current,mapSize:[window.innerWidth,window.innerHeight]};h_.init().then((()=>{const e=new e_(t,h_);new w(e).hookGlobalKeys(),e.init(),e.start(),r(e)}))}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:i}),e&&(0,n.jsx)(a.Provider,{value:e,children:t})]})}),{children:(0,n.jsx)((()=>{const[t,e]=(0,s.useState)(!1),r=(0,s.useContext)(a),i=(0,s.useCallback)((t=>{r.spellSelection.startSpellSelection(t,{x:0,y:0});const e=t=>{r.spellSelection.setSpellPosition({x:t.clientX,y:t.clientY})},n=t=>{r.spellSelection.stopSpellSelection(!0),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),window.removeEventListener("keyup",i)},i=t=>{"Escape"===t.key&&(r.spellSelection.stopSpellSelection(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),window.removeEventListener("keyup",i))};window.addEventListener("mousemove",e),window.addEventListener("mouseup",n),window.addEventListener("keyup",i)}),[]);return(0,n.jsxs)("span",{className:"spellbook",children:[t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"spell",onClick:()=>i("fireball"),children:(0,n.jsx)(o,{id:"icons/spells/fireball"})}),(0,n.jsx)("div",{className:"spell",onClick:()=>i("heal"),children:(0,n.jsx)(o,{id:"icons/spells/hearth"})}),(0,n.jsx)("div",{className:"spell inactive",children:(0,n.jsx)(o,{id:"icons/spells/shield_break"})}),(0,n.jsx)("div",{className:"spell inactive",children:(0,n.jsx)(o,{id:"icons/spells/lightning"})}),(0,n.jsx)("div",{className:"spell inactive",children:(0,n.jsx)(o,{id:"icons/spells/archer"})}),(0,n.jsx)("div",{className:"spell inactive",children:(0,n.jsx)(o,{id:"icons/spells/ice_berg"})})]}),(0,n.jsx)("div",{className:"book",onClick:()=>e(!t),children:(0,n.jsx)(o,{id:"icons/spell_book"})})]})}),{})})}))})()})();
//# sourceMappingURL=bundle.js.map